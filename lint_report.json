[{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\Layout\\AppSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\Layout\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\Layout\\OwnerLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\Layout\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\appointments\\AppointmentDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\appointments\\AppointmentFormDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'loadRealData' function makes the dependencies of useEffect Hook (at line 95) change on every render. Move it inside the useEffect callback. Alternatively, wrap the definition of 'loadRealData' in its own useCallback() Hook.","line":97,"column":9,"nodeType":"VariableDeclarator","endLine":128,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormDescription,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { toast } from 'sonner';\r\nimport { appointmentService } from '@/services/appointmentService';\r\nimport { patientService } from '@/services/patientService';\r\nimport { ownerService } from '@/services/ownerService';\r\nimport { userService } from '@/services/userService';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport type { Appointment } from '@/types/appointment';\r\n\r\nconst formSchema = z.object({\r\n  patientId: z.string().min(1, 'Seleccione un paciente'),\r\n  ownerId: z.string().min(1, 'Seleccione un propietario'),\r\n  veterinarianId: z.string().min(1, 'Seleccione un veterinario'),\r\n  scheduledDate: z.string().min(1, 'Fecha y hora son requeridas'),\r\n  appointmentType: z.enum(['CONSULTATION', 'VACCINATION', 'SURGERY', 'CHECKUP', 'EMERGENCY']),\r\n  reason: z.string().min(10, 'El motivo debe tener al menos 10 caracteres'),\r\n  durationMinutes: z.string().min(1, 'Duraci├│n es requerida'),\r\n  notes: z.string().optional(),\r\n});\r\n\r\ntype FormData = z.infer<typeof formSchema>;\r\n\r\ninterface AppointmentFormDialogProps {\r\n  appointment?: Appointment;\r\n  children: React.ReactNode;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nexport function AppointmentFormDialog({ appointment, children, onSuccess }: AppointmentFormDialogProps) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [patients, setPatients] = useState<unknown[]>([]);\r\n  const [owners, setOwners] = useState<unknown[]>([]);\r\n  const [veterinarians, setVeterinarians] = useState<unknown[]>([]);\r\n  const [loadingData, setLoadingData] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const form = useForm<FormData>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: appointment ? {\r\n      patientId: appointment.patientId.toString(),\r\n      ownerId: appointment.ownerId.toString(),\r\n      veterinarianId: appointment.veterinarianId,\r\n      scheduledDate: appointment.scheduledDate,\r\n      appointmentType: appointment.appointmentType,\r\n      reason: appointment.reason,\r\n      durationMinutes: appointment.durationMinutes.toString(),\r\n      notes: appointment.notes || '',\r\n    } : {\r\n      patientId: '',\r\n      ownerId: '',\r\n      veterinarianId: user?.id || '',\r\n      scheduledDate: new Date().toISOString().slice(0, 16),\r\n      appointmentType: 'CONSULTATION',\r\n      reason: '',\r\n      durationMinutes: '30',\r\n      notes: '',\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadRealData();\r\n    }\r\n  }, [open, loadRealData]);\r\n\r\n  const loadRealData = async () => {\r\n    setLoadingData(true);\r\n    try {\r\n      console.log('≡ƒöä Cargando datos reales desde backend...');\r\n\r\n      const [patientsRes, ownersRes, usersRes] = await Promise.all([\r\n        patientService.getAll(0, 100),\r\n        ownerService.getAll(0, 100),\r\n        userService.getAll(0, 100),\r\n      ]);\r\n\r\n      console.log('Γ£à Pacientes:', patientsRes.content);\r\n      console.log('Γ£à Propietarios:', ownersRes.content);\r\n      console.log('Γ£à Veterinarios:', usersRes.content);\r\n\r\n      setPatients(patientsRes.content || []);\r\n      setOwners(ownersRes.content || []);\r\n      setVeterinarians(usersRes.content || []);\r\n\r\n      if (user && !appointment) {\r\n        form.setValue('veterinarianId', user.id);\r\n      }\r\n    } catch (error) {\r\n      console.error('Γ¥î Error al cargar datos:', error);\r\n      toast.error('Error al cargar datos del formulario');\r\n      setPatients([]);\r\n      setOwners([]);\r\n      setVeterinarians([]);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data: FormData) => {\r\n    try {\r\n      setLoading(true);\r\n      // Convertir la fecha al formato ISO completo que espera el backend (LocalDateTime)\r\n      // El input datetime-local devuelve \"YYYY-MM-DDTHH:mm\", necesitamos asegurar formato completo\r\n      let formattedDate = data.scheduledDate;\r\n      // Si la fecha tiene formato \"YYYY-MM-DDTHH:mm\", agregar \":00\" para segundos\r\n      if (formattedDate && formattedDate.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/)) {\r\n        formattedDate = formattedDate + ':00';\r\n      }\r\n      // El backend espera LocalDateTime en formato ISO sin zona horaria: \"YYYY-MM-DDTHH:mm:ss\"\r\n\r\n      const payload = {\r\n        patientId: parseInt(data.patientId),\r\n        ownerId: parseInt(data.ownerId),\r\n        veterinarianId: data.veterinarianId,\r\n        scheduledDate: formattedDate,\r\n        appointmentType: data.appointmentType,\r\n        reason: data.reason,\r\n        durationMinutes: parseInt(data.durationMinutes),\r\n        notes: data.notes || undefined,\r\n      };\r\n\r\n      console.log('≡ƒôñ Enviando al backend:', payload);\r\n      console.log('≡ƒôà Fecha formateada:', formattedDate);\r\n\r\n      if (appointment) {\r\n        await appointmentService.update(appointment.id, payload);\r\n        toast.success('Cita actualizada exitosamente');\r\n        // Notificar que se actualiz├│ una cita\r\n        localStorage.setItem('appointment_updated', Date.now().toString());\r\n        window.dispatchEvent(new Event('appointment_updated'));\r\n      } else {\r\n        await appointmentService.create(payload);\r\n        toast.success('Cita creada exitosamente');\r\n        // Notificar que se cre├│ una cita\r\n        localStorage.setItem('appointment_created', Date.now().toString());\r\n        window.dispatchEvent(new Event('appointment_created'));\r\n      }\r\n\r\n      console.log('Γ£à Cita guardada, cerrando di├ílogo y llamando onSuccess...');\r\n      setOpen(false);\r\n      form.reset();\r\n\r\n      if (onSuccess) {\r\n        console.log('≡ƒöä Ejecutando onSuccess callback...');\r\n        onSuccess();\r\n      } else {\r\n        console.warn('ΓÜá∩╕Å onSuccess no est├í definido!');\r\n      }\r\n    } catch (error: unknown) {\r\n      console.error('Γ¥î Error:', error);\r\n      const errorMessage = (error as { response?: { data?: { message?: string } }; message?: string }).response?.data?.message || (error as Error).message || 'Error al guardar';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>{children}</DialogTrigger>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>\r\n            {appointment ? 'Editar Cita' : 'Nueva Cita'}\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {appointment ? 'Actualiza la informaci├│n de la cita' : 'Programa una nueva cita m├⌐dica'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"patientId\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Paciente *</FormLabel>\r\n                    <Select\r\n                      onValueChange={field.onChange}\r\n                      defaultValue={field.value}\r\n                      disabled={loadingData || !!appointment}\r\n                    >\r\n                      <FormControl>\r\n                        <SelectTrigger>\r\n                          <SelectValue placeholder=\"Seleccionar paciente REAL\" />\r\n                        </SelectTrigger>\r\n                      </FormControl>\r\n                      <SelectContent>\r\n                        {loadingData ? (\r\n                          <SelectItem value=\"_loading\" disabled>Cargando pacientes...</SelectItem>\r\n                        ) : patients.length === 0 ? (\r\n                          <SelectItem value=\"_empty\" disabled>No hay pacientes disponibles</SelectItem>\r\n                        ) : (\r\n                          patients.map((patient) => (\r\n                            <SelectItem key={patient.id} value={patient.id.toString()}>\r\n                              {patient.name} - {patient.species} ({patient.ownerName})\r\n                            </SelectItem>\r\n                          ))\r\n                        )}\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <FormDescription>\r\n                      Datos cargados desde el backend\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"ownerId\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Propietario *</FormLabel>\r\n                    <Select\r\n                      onValueChange={field.onChange}\r\n                      defaultValue={field.value}\r\n                      disabled={loadingData}\r\n                    >\r\n                      <FormControl>\r\n                        <SelectTrigger>\r\n                          <SelectValue placeholder=\"Seleccionar propietario REAL\" />\r\n                        </SelectTrigger>\r\n                      </FormControl>\r\n                      <SelectContent>\r\n                        {loadingData ? (\r\n                          <SelectItem value=\"_loading\" disabled>Cargando propietarios...</SelectItem>\r\n                        ) : owners.length === 0 ? (\r\n                          <SelectItem value=\"_empty\" disabled>No hay propietarios disponibles</SelectItem>\r\n                        ) : (\r\n                          owners.map((owner) => (\r\n                            <SelectItem key={owner.id} value={owner.id.toString()}>\r\n                              {owner.firstName} {owner.lastName} - {owner.email}\r\n                            </SelectItem>\r\n                          ))\r\n                        )}\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <FormDescription>\r\n                      Datos cargados desde el backend\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"veterinarianId\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Veterinario *</FormLabel>\r\n                  <Select\r\n                    onValueChange={field.onChange}\r\n                    defaultValue={field.value}\r\n                    disabled={loadingData}\r\n                  >\r\n                    <FormControl>\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Seleccionar veterinario REAL\" />\r\n                      </SelectTrigger>\r\n                    </FormControl>\r\n                    <SelectContent>\r\n                      {loadingData ? (\r\n                        <SelectItem value=\"_loading\" disabled>Cargando veterinarios...</SelectItem>\r\n                      ) : veterinarians.length === 0 ? (\r\n                        <SelectItem value=\"_empty\" disabled>No hay veterinarios disponibles</SelectItem>\r\n                      ) : (\r\n                        veterinarians.map((vet) => (\r\n                          <SelectItem key={vet.id} value={vet.id}>\r\n                            {vet.firstName} {vet.lastName} - {vet.username}\r\n                          </SelectItem>\r\n                        ))\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <FormDescription>\r\n                    Datos cargados desde el backend\r\n                  </FormDescription>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"scheduledDate\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Fecha y Hora de la Cita *</FormLabel>\r\n                    <FormControl>\r\n                      <Input\r\n                        type=\"datetime-local\"\r\n                        min={new Date().toISOString().slice(0, 16)}\r\n                        {...field}\r\n                      />\r\n                    </FormControl>\r\n                    <FormDescription>\r\n                      Debe ser una fecha futura\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"durationMinutes\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Duraci├│n (minutos) *</FormLabel>\r\n                    <FormControl>\r\n                      <Input\r\n                        type=\"number\"\r\n                        min=\"15\"\r\n                        max=\"480\"\r\n                        placeholder=\"30\"\r\n                        {...field}\r\n                      />\r\n                    </FormControl>\r\n                    <FormDescription>\r\n                      M├¡nimo 15, m├íximo 480 minutos\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"appointmentType\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tipo de Cita *</FormLabel>\r\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                    <FormControl>\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Seleccionar tipo\" />\r\n                      </SelectTrigger>\r\n                    </FormControl>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"CONSULTATION\">≡ƒ⌐║ Consulta</SelectItem>\r\n                      <SelectItem value=\"VACCINATION\">≡ƒÆë Vacunaci├│n</SelectItem>\r\n                      <SelectItem value=\"SURGERY\">≡ƒÅÑ Cirug├¡a</SelectItem>\r\n                      <SelectItem value=\"CHECKUP\">≡ƒôï Chequeo</SelectItem>\r\n                      <SelectItem value=\"EMERGENCY\">≡ƒÜ¿ Emergencia</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"reason\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Motivo de la Consulta *</FormLabel>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"Describa el motivo de la cita...\"\r\n                      className=\"resize-none\"\r\n                      rows={3}\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"notes\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Notas Adicionales (Opcional)</FormLabel>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"Informaci├│n adicional...\"\r\n                      className=\"resize-none\"\r\n                      rows={2}\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div className=\"flex justify-end gap-3\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => setOpen(false)}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n              <Button type=\"submit\" disabled={loading}>\r\n                {loading ? 'Guardando...' : appointment ? 'Actualizar' : 'Crear Cita'}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </Form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\informed-consents\\InformedConsentDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\informed-consents\\InformedConsentFormDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":121,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3920,3923],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3920,3923],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { patientService, ownerService, userService } from '@/services';\r\nimport { toast } from 'sonner';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport type { Patient } from '@/services/patientService';\r\nimport type { Owner } from '@/types/owner';\r\n\r\ninterface Veterinarian {\r\n  id: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  username: string;\r\n  roles?: ({ name: string } | string)[];\r\n}\r\n\r\ninterface InformedConsentFormDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (consent: unknown) => void;\r\n  consent?: {\r\n    patientId?: string | number;\r\n    ownerId?: string | number;\r\n    veterinarianId?: string | number;\r\n    appointmentId?: string | number;\r\n    procedureType?: string;\r\n    procedureDescription?: string;\r\n    description?: string;\r\n    risks?: string;\r\n    benefits?: string;\r\n    alternatives?: string;\r\n  };\r\n}\r\n\r\nexport function InformedConsentFormDialog({ open, onClose, onSubmit, consent }: InformedConsentFormDialogProps) {\r\n  const { user } = useAuth();\r\n  const [patients, setPatients] = useState<Patient[]>([]);\r\n  const [owners, setOwners] = useState<Owner[]>([]);\r\n  const [veterinarians, setVeterinarians] = useState<Veterinarian[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    patientId: '',\r\n    ownerId: '',\r\n    veterinarianId: user?.id || '',\r\n    appointmentId: '',\r\n    procedureType: '',\r\n    procedureDescription: '',\r\n    risks: '',\r\n    benefits: '',\r\n    alternatives: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadPatients();\r\n      loadOwners();\r\n      loadVeterinarians();\r\n      if (consent) {\r\n        setFormData({\r\n          patientId: consent.patientId?.toString() || '',\r\n          ownerId: consent.ownerId?.toString() || '',\r\n          veterinarianId: consent.veterinarianId?.toString() || user?.id || '',\r\n          appointmentId: consent.appointmentId?.toString() || '',\r\n          procedureType: consent.procedureType || '',\r\n          procedureDescription: consent.procedureDescription || consent.description || '',\r\n          risks: consent.risks || '',\r\n          benefits: consent.benefits || '',\r\n          alternatives: consent.alternatives || '',\r\n        });\r\n      } else {\r\n        setFormData({\r\n          patientId: '',\r\n          ownerId: '',\r\n          veterinarianId: user?.id || '',\r\n          appointmentId: '',\r\n          procedureType: '',\r\n          procedureDescription: '',\r\n          risks: '',\r\n          benefits: '',\r\n          alternatives: '',\r\n        });\r\n      }\r\n    }\r\n  }, [open, consent, user]);\r\n\r\n  const loadPatients = async () => {\r\n    try {\r\n      const response = await patientService.getAll(0, 100);\r\n      setPatients(response.content || []);\r\n    } catch (error) {\r\n      console.error('Error al cargar pacientes:', error);\r\n    }\r\n  };\r\n\r\n  const loadOwners = async () => {\r\n    try {\r\n      const response = await ownerService.getAll(0, 100);\r\n      setOwners(response.content || []);\r\n    } catch (error) {\r\n      console.error('Error al cargar propietarios:', error);\r\n    }\r\n  };\r\n\r\n  const loadVeterinarians = async () => {\r\n    try {\r\n      const response = await userService.getAll(0, 100);\r\n      const vets = response.content.filter((u: { roles?: ({ name: string } | string)[] }) =>\r\n        u.roles?.some((r) => (typeof r === 'string' ? r : r.name) === 'VETERINARIAN')\r\n      );\r\n      setVeterinarians(vets as any);\r\n    } catch (error) {\r\n      console.error('Error al cargar veterinarios:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!formData.patientId || !formData.ownerId || !formData.veterinarianId || !formData.procedureType || !formData.procedureDescription) {\r\n      toast.error('Por favor completa los campos obligatorios');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const consentData = {\r\n        patientId: parseInt(formData.patientId),\r\n        ownerId: parseInt(formData.ownerId),\r\n        veterinarianId: formData.veterinarianId,\r\n        appointmentId: formData.appointmentId ? parseInt(formData.appointmentId) : undefined,\r\n        procedureType: formData.procedureType,\r\n        procedureDescription: formData.procedureDescription,\r\n        risks: formData.risks || undefined,\r\n        benefits: formData.benefits || undefined,\r\n        alternatives: formData.alternatives || undefined,\r\n      };\r\n\r\n      await onSubmit(consentData);\r\n    } catch (error) {\r\n      console.error('Error al guardar consentimiento:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const procedureTypes = [\r\n    'SURGERY',\r\n    'ANESTHESIA',\r\n    'VACCINATION',\r\n    'DIAGNOSTIC',\r\n    'TREATMENT',\r\n    'OTHER',\r\n  ];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>{consent ? 'Editar Consentimiento' : 'Nuevo Consentimiento Informado'}</DialogTitle>\r\n          <DialogDescription>\r\n            {consent ? 'Modifica los datos del consentimiento' : 'Completa los datos para crear un nuevo consentimiento informado'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"patientId\">Paciente *</Label>\r\n              <Select\r\n                value={formData.patientId}\r\n                onValueChange={(value) => setFormData({ ...formData, patientId: value })}\r\n                required\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecciona un paciente\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {patients.map((patient) => (\r\n                    <SelectItem key={patient.id} value={patient.id.toString()}>\r\n                      {patient.name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"ownerId\">Propietario *</Label>\r\n              <Select\r\n                value={formData.ownerId}\r\n                onValueChange={(value) => setFormData({ ...formData, ownerId: value })}\r\n                required\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecciona un propietario\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {owners.map((owner) => (\r\n                    <SelectItem key={owner.id} value={owner.id.toString()}>\r\n                      {owner.firstName} {owner.lastName}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"veterinarianId\">Veterinario *</Label>\r\n              <Select\r\n                value={formData.veterinarianId}\r\n                onValueChange={(value) => setFormData({ ...formData, veterinarianId: value })}\r\n                required\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecciona un veterinario\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {veterinarians.map((vet) => (\r\n                    <SelectItem key={vet.id} value={vet.id}>\r\n                      {vet.firstName} {vet.lastName}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"procedureType\">Tipo de Procedimiento *</Label>\r\n              <Select\r\n                value={formData.procedureType}\r\n                onValueChange={(value) => setFormData({ ...formData, procedureType: value })}\r\n                required\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecciona el tipo\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {procedureTypes.map((type) => (\r\n                    <SelectItem key={type} value={type}>\r\n                      {type === 'SURGERY' && 'Cirug├¡a'}\r\n                      {type === 'ANESTHESIA' && 'Anestesia'}\r\n                      {type === 'VACCINATION' && 'Vacunaci├│n'}\r\n                      {type === 'DIAGNOSTIC' && 'Diagn├│stico'}\r\n                      {type === 'TREATMENT' && 'Tratamiento'}\r\n                      {type === 'OTHER' && 'Otro'}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"procedureDescription\">Descripci├│n del Procedimiento *</Label>\r\n            <Textarea\r\n              id=\"procedureDescription\"\r\n              value={formData.procedureDescription}\r\n              onChange={(e) => setFormData({ ...formData, procedureDescription: e.target.value })}\r\n              placeholder=\"Describe detalladamente el procedimiento...\"\r\n              rows={4}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"risks\">Riesgos</Label>\r\n            <Textarea\r\n              id=\"risks\"\r\n              value={formData.risks}\r\n              onChange={(e) => setFormData({ ...formData, risks: e.target.value })}\r\n              placeholder=\"Describe los riesgos asociados al procedimiento...\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"benefits\">Beneficios</Label>\r\n            <Textarea\r\n              id=\"benefits\"\r\n              value={formData.benefits}\r\n              onChange={(e) => setFormData({ ...formData, benefits: e.target.value })}\r\n              placeholder=\"Describe los beneficios esperados...\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"alternatives\">Alternativas</Label>\r\n            <Textarea\r\n              id=\"alternatives\"\r\n              value={formData.alternatives}\r\n              onChange={(e) => setFormData({ ...formData, alternatives: e.target.value })}\r\n              placeholder=\"Describe las alternativas disponibles...\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading ? 'Guardando...' : consent ? 'Actualizar' : 'Crear'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\inventory\\InventoryDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\inventory\\InventoryFormDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\medical-records\\MedicalRecordDetailsDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4682,4685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4682,4685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4713,4716],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4713,4716],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport {\r\n    Calendar,\r\n    User,\r\n    Activity,\r\n    Thermometer,\r\n    HeartPulse,\r\n    Pill,\r\n    ClipboardList,\r\n    AlertCircle,\r\n    Edit,\r\n    Trash2,\r\n    Stethoscope,\r\n    Weight,\r\n    Clock,\r\n    FileText\r\n} from 'lucide-react';\r\nimport type { MedicalRecord } from '@/types/medicalRecord';\r\nimport { format } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n\r\ninterface MedicalRecordDetailsDialogProps {\r\n    record: MedicalRecord;\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    onEdit?: () => void;\r\n    onDelete?: () => void;\r\n}\r\n\r\nexport function MedicalRecordDetailsDialog({\r\n    record,\r\n    open,\r\n    onOpenChange,\r\n    onEdit,\r\n    onDelete,\r\n}: MedicalRecordDetailsDialogProps) {\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return format(new Date(dateString), \"dd 'de' MMMM, yyyy\", { locale: es });\r\n    };\r\n\r\n    const formatTime = (dateString: string) => {\r\n        return format(new Date(dateString), \"HH:mm\");\r\n    };\r\n\r\n    const getInitials = (name: string) => name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-4xl p-0 overflow-hidden h-[85vh] flex flex-col gap-0\">\r\n\r\n                {/* --- HEADER --- */}\r\n                <div className=\"bg-slate-50 border-b px-6 py-4 flex justify-between items-start shrink-0\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Avatar className=\"h-14 w-14 border-2 border-white shadow-sm\">\r\n                            <AvatarFallback className=\"bg-primary/10 text-primary font-bold text-lg\">\r\n                                {getInitials(record.patientName)}\r\n                            </AvatarFallback>\r\n                        </Avatar>\r\n                        <div>\r\n                            <h2 className=\"text-2xl font-bold text-slate-900\">{record.patientName}</h2>\r\n                            <div className=\"flex items-center gap-2 mt-1\">\r\n                                <Badge variant=\"outline\" className=\"bg-white text-slate-600 font-normal\">\r\n                                    Consulta #{record.id}\r\n                                </Badge>\r\n                                <span className=\"text-sm text-muted-foreground flex items-center gap-1\">\r\n                                    <Clock className=\"w-3 h-3\" /> {formatDate(record.recordDate)}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {record.followUpRequired && (\r\n                        <div className=\"bg-red-50 text-red-700 px-3 py-1 rounded-full text-xs font-bold border border-red-100 flex items-center gap-1 animate-pulse\">\r\n                            <AlertCircle className=\"w-3 h-3\" />\r\n                            SEGUIMIENTO REQUERIDO\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex flex-1 overflow-hidden\">\r\n\r\n                    {/* --- SIDEBAR (SIGNOS VITALES) --- */}\r\n                    <div className=\"w-64 bg-slate-50/50 border-r p-5 overflow-y-auto hidden md:block shrink-0\">\r\n                        <h3 className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-4\">Signos Vitales</h3>\r\n                        <div className=\"space-y-3\">\r\n                            <VitalCard\r\n                                icon={<Weight className=\"w-4 h-4 text-blue-500\" />}\r\n                                label=\"Peso\"\r\n                                value={record.weight ? `${record.weight} kg` : '--'}\r\n                            />\r\n                            <VitalCard\r\n                                icon={<Thermometer className=\"w-4 h-4 text-red-500\" />}\r\n                                label=\"Temperatura\"\r\n                                value={record.temperature ? `${record.temperature}┬░C` : '--'}\r\n                            />\r\n                            <VitalCard\r\n                                icon={<HeartPulse className=\"w-4 h-4 text-emerald-500\" />}\r\n                                label=\"Frec. Card├¡aca\"\r\n                                value={(record as any).heartRate ? `${(record as any).heartRate} bpm` : '--'}\r\n                            />\r\n                        </div>\r\n\r\n                        <Separator className=\"my-6\" />\r\n\r\n                        <h3 className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-4\">Metadatos</h3>\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <p className=\"text-xs text-muted-foreground mb-1\">Especialista</p>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <User className=\"w-3 h-3 text-muted-foreground\" />\r\n                                    <span className=\"text-sm font-medium\">Dr. {record.veterinarianName.split(' ')[0]}</span>\r\n                                </div>\r\n                            </div>\r\n                            {record.followUpDate && (\r\n                                <div>\r\n                                    <p className=\"text-xs text-muted-foreground mb-1\">Pr├│xima Visita</p>\r\n                                    <div className=\"flex items-center gap-2 text-orange-600\">\r\n                                        <Calendar className=\"w-3 h-3\" />\r\n                                        <span className=\"text-sm font-bold\">{formatDate(record.followUpDate)}</span>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* --- MAIN CONTENT (HISTORIA) --- */}\r\n                    <ScrollArea className=\"flex-1 p-6 md:p-8\">\r\n                        <div className=\"max-w-2xl mx-auto space-y-8 pb-10\">\r\n\r\n                            {/* Secci├│n S├¡ntomas */}\r\n                            {record.symptoms && (\r\n                                <section>\r\n                                    <div className=\"flex items-center gap-2 mb-3\">\r\n                                        <div className=\"p-1.5 bg-orange-100 rounded-md text-orange-600\">\r\n                                            <Activity className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <h3 className=\"font-bold text-lg text-slate-800\">S├¡ntomas Reportados</h3>\r\n                                    </div>\r\n                                    <div className=\"bg-slate-50 border border-slate-100 rounded-xl p-4 text-slate-700 leading-relaxed text-sm\">\r\n                                        {record.symptoms}\r\n                                    </div>\r\n                                </section>\r\n                            )}\r\n\r\n                            {/* Secci├│n Diagn├│stico */}\r\n                            <section>\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <div className=\"p-1.5 bg-blue-100 rounded-md text-blue-600\">\r\n                                        <ClipboardList className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <h3 className=\"font-bold text-lg text-slate-800\">Diagn├│stico M├⌐dico</h3>\r\n                                </div>\r\n                                <div className=\"bg-white border rounded-xl p-5 shadow-sm text-slate-800 font-medium leading-relaxed\">\r\n                                    {record.diagnosis}\r\n                                </div>\r\n                            </section>\r\n\r\n                            {/* Secci├│n Tratamiento */}\r\n                            <section>\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <div className=\"p-1.5 bg-emerald-100 rounded-md text-emerald-600\">\r\n                                        <Pill className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <h3 className=\"font-bold text-lg text-slate-800\">Plan de Tratamiento</h3>\r\n                                </div>\r\n                                <div className=\"bg-emerald-50/50 border border-emerald-100/50 rounded-xl p-5 text-emerald-900 leading-relaxed shadow-sm\">\r\n                                    {record.treatment}\r\n                                </div>\r\n                            </section>\r\n\r\n                            {/* Notas Adicionales */}\r\n                            {record.notes && (\r\n                                <section>\r\n                                    <div className=\"flex items-center gap-2 mb-3\">\r\n                                        <div className=\"p-1.5 bg-slate-100 rounded-md text-slate-600\">\r\n                                            <FileText className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <h3 className=\"font-bold text-lg text-slate-800\">Notas Cl├¡nicas</h3>\r\n                                    </div>\r\n                                    <p className=\"text-sm text-muted-foreground italic pl-2 border-l-2 border-slate-200\">\r\n                                        \"{record.notes}\"\r\n                                    </p>\r\n                                </section>\r\n                            )}\r\n\r\n                        </div>\r\n                    </ScrollArea>\r\n                </div>\r\n\r\n                {/* --- FOOTER --- */}\r\n                {(onEdit || onDelete) && (\r\n                    <div className=\"border-t p-4 bg-white flex justify-between items-center shrink-0\">\r\n                        <div className=\"text-xs text-muted-foreground hidden sm:block\">\r\n                            Reg: {format(new Date(record.createdAt), \"dd/MM/yyyy HH:mm\")}\r\n                        </div>\r\n                        <div className=\"flex gap-2 w-full sm:w-auto justify-end\">\r\n                            {onEdit && (\r\n                                <Button onClick={onEdit} variant=\"outline\" className=\"border-slate-300\">\r\n                                    <Edit className=\"h-4 w-4 mr-2\" /> Editar\r\n                                </Button>\r\n                            )}\r\n                            {onDelete && (\r\n                                <Button onClick={onDelete} variant=\"destructive\">\r\n                                    <Trash2 className=\"h-4 w-4 mr-2\" /> Eliminar\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\n// Helper Component for Sidebar\r\nfunction VitalCard({ icon, label, value }: { icon: React.ReactNode, label: string, value: string }) {\r\n    return (\r\n        <div className=\"bg-white p-3 rounded-lg border shadow-sm flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n                {icon}\r\n                <span className=\"text-xs font-medium text-slate-600\">{label}</span>\r\n            </div>\r\n            <span className=\"font-bold text-sm text-slate-900\">{value}</span>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\medical-records\\MedicalRecordFormDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\owners\\OwnerDetailsDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1844,1847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1844,1847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Mail, Phone, MapPin, FileText, Calendar, Hash, Trash2, Edit } from 'lucide-react';\r\nimport { OwnerFormDialog } from './OwnerFormDialog';\r\nimport { ownerService } from '@/services/ownerService';\r\nimport { toast } from 'sonner';\r\nimport type { Owner } from '@/types/owner';\r\n\r\ninterface OwnerDetailsDialogProps {\r\n  owner: Owner;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onUpdate?: () => void;\r\n}\r\n\r\nexport function OwnerDetailsDialog({\r\n  owner,\r\n  open,\r\n  onOpenChange,\r\n  onUpdate,\r\n}: Readonly<OwnerDetailsDialogProps>) {\r\n  const [showDeleteAlert, setShowDeleteAlert] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showEditDialog, setShowEditDialog] = useState(false);\r\n\r\n  const getDocumentTypeLabel = (type: string) => {\r\n    const labels = {\r\n      CC: 'C├⌐dula de Ciudadan├¡a',\r\n      CE: 'C├⌐dula de Extranjer├¡a',\r\n      TI: 'Tarjeta de Identidad',\r\n      PAS: 'Pasaporte',\r\n    };\r\n    return labels[type as keyof typeof labels] || type;\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      setIsDeleting(true);\r\n      await ownerService.delete(owner.id);\r\n      toast.success('Propietario eliminado exitosamente');\r\n      onOpenChange(false);\r\n      if (onUpdate) onUpdate();\r\n    } catch (error: any) {\r\n      console.error('Error al eliminar propietario:', error);\r\n      toast.error(error.response?.data?.message || 'Error al eliminar el propietario');\r\n    } finally {\r\n      setIsDeleting(false);\r\n      setShowDeleteAlert(false);\r\n    }\r\n  };\r\n\r\n  const handleEditSuccess = () => {\r\n    setShowEditDialog(false);\r\n    if (onUpdate) onUpdate();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-2xl\">\r\n              {owner.firstName} {owner.lastName}\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Informaci├│n detallada del propietario\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                  <Hash className=\"h-4 w-4\" />\r\n                  <span className=\"font-medium\">Documento</span>\r\n                </div>\r\n                <div>\r\n                  <Badge variant=\"secondary\" className=\"mb-1\">\r\n                    {getDocumentTypeLabel(owner.documentType)}\r\n                  </Badge>\r\n                  <p className=\"text-sm\">{owner.documentNumber}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                  <Calendar className=\"h-4 w-4\" />\r\n                  <span className=\"font-medium\">Registro</span>\r\n                </div>\r\n                <p className=\"text-sm\">\r\n                  {new Date(owner.createdAt).toLocaleDateString('es-CO', {\r\n                    year: 'numeric',\r\n                    month: 'long',\r\n                    day: 'numeric',\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <Separator />\r\n\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-semibold text-lg\">Informaci├│n de Contacto</h3>\r\n              \r\n              <div className=\"grid gap-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <Mail className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">Email</p>\r\n                    <p className=\"text-sm\">{owner.email}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-start gap-3\">\r\n                  <Phone className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">Tel├⌐fono</p>\r\n                    <p className=\"text-sm\">{owner.phone}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-start gap-3\">\r\n                  <MapPin className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">Direcci├│n</p>\r\n                    <p className=\"text-sm\">{owner.address}</p>\r\n                    <p className=\"text-sm text-muted-foreground\">{owner.city}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {owner.notes && (\r\n              <>\r\n                <Separator />\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <FileText className=\"h-5 w-5 text-primary\" />\r\n                    <h3 className=\"font-semibold text-lg\">Notas</h3>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                    {owner.notes}\r\n                  </p>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <DialogFooter className=\"gap-2 sm:gap-0\">\r\n            <Button\r\n              variant=\"destructive\"\r\n              onClick={() => setShowDeleteAlert(true)}\r\n              className=\"gap-2\"\r\n            >\r\n              <Trash2 className=\"h-4 w-4\" />\r\n              Eliminar\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowEditDialog(true)}\r\n              className=\"gap-2\"\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              Editar\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Di├ílogo de edici├│n */}\r\n      <OwnerFormDialog\r\n        owner={owner}\r\n        open={showEditDialog}\r\n        onOpenChange={setShowEditDialog}\r\n        onSuccess={handleEditSuccess}\r\n      />\r\n\r\n      {/* Di├ílogo de confirmaci├│n de eliminaci├│n */}\r\n      <AlertDialog open={showDeleteAlert} onOpenChange={setShowDeleteAlert}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>┬┐Est├ís seguro?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Esta acci├│n no se puede deshacer. Se eliminar├í permanentemente al propietario{' '}\r\n              <strong>{owner.firstName} {owner.lastName}</strong> y toda su informaci├│n asociada.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={isDeleting}>\r\n              Cancelar\r\n            </AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleDelete}\r\n              disabled={isDeleting}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              {isDeleting ? 'Eliminando...' : 'Eliminar'}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\owners\\OwnerFormDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":112,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3954,3957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3954,3957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { ownerService } from '@/services/ownerService';\r\nimport type { Owner } from '@/types/owner';\r\n\r\nconst formSchema = z.object({\r\n    documentType: z.enum(['CC', 'CE', 'TI', 'PAS']),\r\n    documentNumber: z.string().min(5, 'Documento debe tener al menos 5 caracteres'),\r\n    firstName: z.string().min(2, 'Nombre debe tener al menos 2 caracteres'),\r\n    lastName: z.string().min(2, 'Apellido debe tener al menos 2 caracteres'),\r\n    email: z.string().email('Email inv├ílido'),\r\n    phone: z.string().min(7, 'Tel├⌐fono debe tener al menos 7 caracteres'),\r\n    address: z.string().min(5, 'Direcci├│n debe tener al menos 5 caracteres'),\r\n    city: z.string().min(2, 'Ciudad debe tener al menos 2 caracteres'),\r\n    notes: z.string().optional(),\r\n    username: z.string().min(4, 'Usuario debe tener al menos 4 caracteres').regex(/^\\w+$/, 'Solo letras, n├║meros y guiones bajos'),\r\n    password: z.string().min(6, 'Contrase├▒a debe tener al menos 6 caracteres'),\r\n});\r\n\r\ntype FormData = z.infer<typeof formSchema>;\r\n\r\ninterface OwnerFormDialogProps {\r\n    owner?: Owner;\r\n    children?: React.ReactNode;\r\n    onSuccess?: () => void;\r\n    open?: boolean;\r\n    onOpenChange?: (open: boolean) => void;\r\n}\r\n\r\nexport function OwnerFormDialog({ owner, children, onSuccess, open: controlledOpen, onOpenChange: controlledOnOpenChange }: Readonly<OwnerFormDialogProps>) {\r\n    const [internalOpen, setInternalOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const { toast } = useToast();\r\n\r\n    // Usar el estado controlado si est├í disponible, de lo contrario usar el estado interno\r\n    const open = controlledOpen ?? internalOpen;\r\n    const setOpen = controlledOnOpenChange ?? setInternalOpen;\r\n\r\n    // Determinar el texto del bot├│n\r\n    const getButtonText = () => {\r\n        if (loading) return 'Guardando...';\r\n        return owner ? 'Actualizar' : 'Crear';\r\n    };\r\n\r\n    const form = useForm<FormData>({\r\n        resolver: zodResolver(formSchema),\r\n        defaultValues: owner || {\r\n            documentType: 'CC',\r\n            documentNumber: '',\r\n            firstName: '',\r\n            lastName: '',\r\n            email: '',\r\n            phone: '',\r\n            address: '',\r\n            city: '',\r\n            notes: '',\r\n            username: '',\r\n            password: '',\r\n        },\r\n    });\r\n\r\n    const onSubmit = async (data: FormData) => {\r\n        try {\r\n            setLoading(true);\r\n\r\n            if (owner) {\r\n                await ownerService.update(owner.id, data);\r\n                toast({\r\n                    title: 'Propietario actualizado',\r\n                    description: `${data.firstName} ${data.lastName} ha sido actualizado exitosamente.`,\r\n                });\r\n            } else {\r\n                await ownerService.create(data as Omit<Owner, 'id' | 'createdAt' | 'updatedAt'>);\r\n                toast({\r\n                    title: 'Propietario creado',\r\n                    description: `${data.firstName} ${data.lastName} ha sido registrado exitosamente.`,\r\n                });\r\n            }\r\n\r\n            setOpen(false);\r\n            form.reset();\r\n            onSuccess?.();\r\n        } catch (error: any) {\r\n            console.error('Error al guardar propietario:', error);\r\n            toast({\r\n                title: 'Error',\r\n                description: error.response?.data?.message || 'No se pudo guardar el propietario',\r\n                variant: 'destructive',\r\n            });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            {children && <DialogTrigger asChild>{children}</DialogTrigger>}\r\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>\r\n                        {owner ? 'Editar Propietario' : 'Nuevo Propietario'}\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        {owner ? 'Actualiza la informaci├│n del propietario' : 'Registra un nuevo propietario en el sistema'}\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"documentType\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Tipo de Documento</FormLabel>\r\n                                        <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                            <FormControl>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Seleccionar\" />\r\n                                                </SelectTrigger>\r\n                                            </FormControl>\r\n                                            <SelectContent>\r\n                                                <SelectItem value=\"CC\">C├⌐dula de Ciudadan├¡a</SelectItem>\r\n                                                <SelectItem value=\"CE\">C├⌐dula de Extranjer├¡a</SelectItem>\r\n                                                <SelectItem value=\"TI\">Tarjeta de Identidad</SelectItem>\r\n                                                <SelectItem value=\"PAS\">Pasaporte</SelectItem>\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"documentNumber\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>N├║mero de Documento</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"1234567890\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"firstName\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Nombre</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"Juan\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"lastName\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Apellido</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"P├⌐rez\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"email\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Email</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"email\" placeholder=\"juan@email.com\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"phone\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Tel├⌐fono</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"+57 300 123 4567\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"address\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Direcci├│n</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Calle 123 #45-67\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"city\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Ciudad</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Bogot├í\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        {!owner && (\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"username\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Nombre de Usuario</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input placeholder=\"juanperez\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"password\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Contrase├▒a</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input type=\"password\" placeholder=\"ΓÇóΓÇóΓÇóΓÇóΓÇóΓÇó\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </div>\r\n                        )}\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"notes\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Notas Adicionales</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea\r\n                                            placeholder=\"Observaciones o informaci├│n adicional...\"\r\n                                            className=\"resize-none\"\r\n                                            {...field}\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <div className=\"flex justify-end gap-3\">\r\n                            <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)} disabled={loading}>\r\n                                Cancelar\r\n                            </Button>\r\n                            <Button type=\"submit\" disabled={loading}>\r\n                                {getButtonText()} Propietario\r\n                            </Button>\r\n                        </div>\r\n                    </form>\r\n                </Form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\patients\\PatientDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\patients\\PatientFormDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[774,777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[774,777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Patient, Species, Sex } from '@/types/patient';\r\nimport { ownerService } from '@/services/ownerService';\r\nimport type { Owner } from '@/types/owner';\r\nimport { toast } from 'sonner';\r\n\r\ninterface PatientFormDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (patient: any) => void;\r\n  patient?: Patient;\r\n}\r\n\r\nexport function PatientFormDialog({ open, onClose, onSubmit, patient }: PatientFormDialogProps) {\r\n  const [owners, setOwners] = useState<Owner[]>([]);\r\n  const [loadingOwners, setLoadingOwners] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    species: 'dog' as Species,\r\n    breed: '',\r\n    age: '',\r\n    weight: '',\r\n    sex: 'male' as Sex,\r\n    color: '',\r\n    ownerName: '',\r\n    ownerId: '',\r\n    microchip: '',\r\n    dateOfBirth: '',\r\n    observations: '',\r\n    isActive: true,\r\n  });\r\n\r\n  // Cargar propietarios al abrir el di├ílogo\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadOwners();\r\n    }\r\n  }, [open]);\r\n\r\n  const loadOwners = async () => {\r\n    try {\r\n      setLoadingOwners(true);\r\n      const response = await ownerService.getAll(0, 100);\r\n      setOwners(response.content);\r\n    } catch (error) {\r\n      console.error('Error al cargar propietarios:', error);\r\n      toast.error('Error al cargar la lista de propietarios');\r\n    } finally {\r\n      setLoadingOwners(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (patient) {\r\n      setFormData({\r\n        name: patient.name,\r\n        species: patient.species,\r\n        breed: patient.breed,\r\n        age: patient.age.toString(),\r\n        weight: patient.weight.toString(),\r\n        sex: patient.sex,\r\n        color: patient.color,\r\n        ownerName: patient.ownerName,\r\n        ownerId: patient.ownerId,\r\n        microchip: patient.microchip || '',\r\n        dateOfBirth: patient.dateOfBirth || '',\r\n        observations: patient.observations || '',\r\n        isActive: patient.isActive,\r\n      });\r\n    } else {\r\n      setFormData({\r\n        name: '',\r\n        species: 'dog',\r\n        breed: '',\r\n        age: '',\r\n        weight: '',\r\n        sex: 'male',\r\n        color: '',\r\n        ownerName: '',\r\n        ownerId: '',\r\n        microchip: '',\r\n        dateOfBirth: '',\r\n        observations: '',\r\n        isActive: true,\r\n      });\r\n    }\r\n  }, [patient, open]);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.name || !formData.breed || !formData.weight) {\r\n      toast.error('Por favor completa todos los campos obligatorios');\r\n      return;\r\n    }\r\n\r\n    if (!formData.ownerId) {\r\n      toast.error('Por favor selecciona un propietario');\r\n      return;\r\n    }\r\n\r\n    // Validar que la fecha de nacimiento sea en el pasado\r\n    if (formData.dateOfBirth) {\r\n      const birthDate = new Date(formData.dateOfBirth);\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      if (birthDate >= today) {\r\n        toast.error('La fecha de nacimiento debe ser en el pasado');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Transformar los datos al formato que espera el backend\r\n    const patientData = {\r\n      name: formData.name,\r\n      species: formData.species.toUpperCase(), // Convertir a may├║sculas\r\n      breed: formData.breed,\r\n      birthDate: formData.dateOfBirth || null, // Cambiar de dateOfBirth a birthDate\r\n      gender: formData.sex.toUpperCase(), // Cambiar de sex a gender y convertir a MALE/FEMALE\r\n      color: formData.color || null,\r\n      weight: parseFloat(formData.weight),\r\n      microchipNumber: formData.microchip || null,\r\n      allergies: null,\r\n      medicalHistory: null,\r\n      notes: formData.observations || null,\r\n      ownerId: parseInt(formData.ownerId), // Convertir a n├║mero\r\n      ...(patient && { id: patient.id }),\r\n    };\r\n\r\n    console.log('Enviando datos del paciente:', patientData); // Para debug\r\n    onSubmit(patientData);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-h-[90vh] overflow-y-auto sm:max-w-[600px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>{patient ? 'Editar Paciente' : 'Nuevo Paciente'}</DialogTitle>\r\n          <DialogDescription>\r\n            {patient \r\n              ? 'Actualiza la informaci├│n del paciente.' \r\n              : 'Completa el formulario para registrar un nuevo paciente.'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"name\">Nombre *</Label>\r\n              <Input\r\n                id=\"name\"\r\n                value={formData.name}\r\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                placeholder=\"Nombre de la mascota\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"species\">Especie *</Label>\r\n              <Select\r\n                value={formData.species}\r\n                onValueChange={(value: Species) => setFormData({ ...formData, species: value })}\r\n              >\r\n                <SelectTrigger id=\"species\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"dog\">Perro</SelectItem>\r\n                  <SelectItem value=\"cat\">Gato</SelectItem>\r\n                  <SelectItem value=\"bird\">Ave</SelectItem>\r\n                  <SelectItem value=\"rabbit\">Conejo</SelectItem>\r\n                  <SelectItem value=\"hamster\">H├ímster</SelectItem>\r\n                  <SelectItem value=\"other\">Otro</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"breed\">Raza *</Label>\r\n              <Input\r\n                id=\"breed\"\r\n                value={formData.breed}\r\n                onChange={(e) => setFormData({ ...formData, breed: e.target.value })}\r\n                placeholder=\"Raza del animal\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"color\">Color *</Label>\r\n              <Input\r\n                id=\"color\"\r\n                value={formData.color}\r\n                onChange={(e) => setFormData({ ...formData, color: e.target.value })}\r\n                placeholder=\"Color del pelaje\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-3\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"age\">Edad (a├▒os) *</Label>\r\n              <Input\r\n                id=\"age\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={formData.age}\r\n                onChange={(e) => setFormData({ ...formData, age: e.target.value })}\r\n                placeholder=\"0\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"weight\">Peso (kg) *</Label>\r\n              <Input\r\n                id=\"weight\"\r\n                type=\"number\"\r\n                step=\"0.1\"\r\n                min=\"0\"\r\n                value={formData.weight}\r\n                onChange={(e) => setFormData({ ...formData, weight: e.target.value })}\r\n                placeholder=\"0.0\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"sex\">Sexo *</Label>\r\n              <Select\r\n                value={formData.sex}\r\n                onValueChange={(value: Sex) => setFormData({ ...formData, sex: value })}\r\n              >\r\n                <SelectTrigger id=\"sex\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"male\">Macho</SelectItem>\r\n                  <SelectItem value=\"female\">Hembra</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"ownerId\">Propietario *</Label>\r\n            <Select\r\n              value={formData.ownerId}\r\n              onValueChange={(value) => {\r\n                const selectedOwner = owners.find(o => o.id === value);\r\n                setFormData({ \r\n                  ...formData, \r\n                  ownerId: value,\r\n                  ownerName: selectedOwner ? `${selectedOwner.firstName} ${selectedOwner.lastName}` : ''\r\n                });\r\n              }}\r\n            >\r\n              <SelectTrigger id=\"ownerId\">\r\n                <SelectValue placeholder={loadingOwners ? \"Cargando propietarios...\" : \"Selecciona un propietario\"} />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {owners.length === 0 && !loadingOwners && (\r\n                  <div className=\"px-2 py-6 text-center text-sm text-muted-foreground\">\r\n                    No hay propietarios registrados.\r\n                    <br />\r\n                    Crea uno primero en la secci├│n Propietarios.\r\n                  </div>\r\n                )}\r\n                {owners.map((owner) => (\r\n                  <SelectItem key={owner.id} value={owner.id}>\r\n                    {owner.firstName} {owner.lastName} - {owner.documentNumber}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"microchip\">Microchip</Label>\r\n              <Input\r\n                id=\"microchip\"\r\n                value={formData.microchip}\r\n                onChange={(e) => setFormData({ ...formData, microchip: e.target.value })}\r\n                placeholder=\"N├║mero de microchip\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"dateOfBirth\">Fecha de Nacimiento</Label>\r\n              <Input\r\n                id=\"dateOfBirth\"\r\n                type=\"date\"\r\n                max={new Date().toISOString().split('T')[0]}\r\n                value={formData.dateOfBirth}\r\n                onChange={(e) => setFormData({ ...formData, dateOfBirth: e.target.value })}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"observations\">Observaciones</Label>\r\n            <Textarea\r\n              id=\"observations\"\r\n              value={formData.observations}\r\n              onChange={(e) => setFormData({ ...formData, observations: e.target.value })}\r\n              placeholder=\"Alergias, comportamiento, notas especiales...\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 pt-4\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\">\r\n              {patient ? 'Actualizar' : 'Crear'} Paciente\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\prescriptions\\PrescriptionDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\prescriptions\\PrescriptionFormDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[743,746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[743,746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[775,778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[775,778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[955,958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[955,958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1011,1014],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1011,1014],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { medicalRecordService } from '@/services/medicalRecordService';\r\nimport { patientService } from '@/services';\r\nimport { toast } from 'sonner';\r\n\r\ninterface PrescriptionFormDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (prescription: any) => void;\r\n  prescription?: any;\r\n}\r\n\r\nexport function PrescriptionFormDialog({ open, onClose, onSubmit, prescription }: PrescriptionFormDialogProps) {\r\n  const [medicalRecords, setMedicalRecords] = useState<any[]>([]);\r\n  const [patients, setPatients] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    medicalRecordId: '',\r\n    patientId: '',\r\n    medicationName: '',\r\n    dosage: '',\r\n    frequency: '',\r\n    duration: '',\r\n    instructions: '',\r\n    startDate: '',\r\n    endDate: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadMedicalRecords();\r\n      loadPatients();\r\n      if (prescription) {\r\n        setFormData({\r\n          medicalRecordId: prescription.medicalRecordId?.toString() || '',\r\n          patientId: prescription.patientId?.toString() || '',\r\n          medicationName: prescription.medicationName || '',\r\n          dosage: prescription.dosage || '',\r\n          frequency: prescription.frequency || '',\r\n          duration: prescription.duration || '',\r\n          instructions: prescription.instructions || '',\r\n          startDate: prescription.startDate ? new Date(prescription.startDate).toISOString().slice(0, 16) : '',\r\n          endDate: prescription.endDate ? new Date(prescription.endDate).toISOString().slice(0, 16) : '',\r\n        });\r\n      } else {\r\n        setFormData({\r\n          medicalRecordId: '',\r\n          patientId: '',\r\n          medicationName: '',\r\n          dosage: '',\r\n          frequency: '',\r\n          duration: '',\r\n          instructions: '',\r\n          startDate: '',\r\n          endDate: '',\r\n        });\r\n      }\r\n    }\r\n  }, [open, prescription]);\r\n\r\n  const loadMedicalRecords = async () => {\r\n    try {\r\n      const response = await medicalRecordService.getAll(0, 100);\r\n      setMedicalRecords(response.content || []);\r\n    } catch (error) {\r\n      console.error('Error al cargar historias cl├¡nicas:', error);\r\n    }\r\n  };\r\n\r\n  const loadPatients = async () => {\r\n    try {\r\n      const response = await patientService.getAll(0, 100);\r\n      setPatients(response.content || []);\r\n    } catch (error) {\r\n      console.error('Error al cargar pacientes:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.medicalRecordId || !formData.patientId || !formData.medicationName) {\r\n      toast.error('Por favor completa los campos obligatorios');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const prescriptionData = {\r\n        medicalRecordId: parseInt(formData.medicalRecordId),\r\n        patientId: parseInt(formData.patientId),\r\n        medicationName: formData.medicationName,\r\n        dosage: formData.dosage,\r\n        frequency: formData.frequency,\r\n        duration: formData.duration,\r\n        instructions: formData.instructions || undefined,\r\n        startDate: formData.startDate ? new Date(formData.startDate).toISOString() : new Date().toISOString(),\r\n        endDate: formData.endDate ? new Date(formData.endDate).toISOString() : undefined,\r\n      };\r\n      \r\n      await onSubmit(prescriptionData);\r\n    } catch (error) {\r\n      console.error('Error al guardar prescripci├│n:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>{prescription ? 'Editar Prescripci├│n' : 'Nueva Prescripci├│n'}</DialogTitle>\r\n          <DialogDescription>\r\n            {prescription ? 'Modifica los datos de la prescripci├│n' : 'Completa los datos para crear una nueva prescripci├│n'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"medicalRecordId\">Historia Cl├¡nica *</Label>\r\n              <Select\r\n                value={formData.medicalRecordId}\r\n                onValueChange={(value) => setFormData({ ...formData, medicalRecordId: value })}\r\n                required\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecciona una historia cl├¡nica\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {medicalRecords.map((record) => (\r\n                    <SelectItem key={record.id} value={record.id.toString()}>\r\n                      {record.patientName || `Historia #${record.id}`}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"patientId\">Paciente *</Label>\r\n              <Select\r\n                value={formData.patientId}\r\n                onValueChange={(value) => setFormData({ ...formData, patientId: value })}\r\n                required\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecciona un paciente\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {patients.map((patient) => (\r\n                    <SelectItem key={patient.id} value={patient.id.toString()}>\r\n                      {patient.name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"medicationName\">Medicamento *</Label>\r\n            <Input\r\n              id=\"medicationName\"\r\n              value={formData.medicationName}\r\n              onChange={(e) => setFormData({ ...formData, medicationName: e.target.value })}\r\n              placeholder=\"Ej: Amoxicilina 500mg\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"dosage\">Dosis *</Label>\r\n              <Input\r\n                id=\"dosage\"\r\n                value={formData.dosage}\r\n                onChange={(e) => setFormData({ ...formData, dosage: e.target.value })}\r\n                placeholder=\"Ej: 500mg\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"frequency\">Frecuencia *</Label>\r\n              <Input\r\n                id=\"frequency\"\r\n                value={formData.frequency}\r\n                onChange={(e) => setFormData({ ...formData, frequency: e.target.value })}\r\n                placeholder=\"Ej: Cada 12 horas\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"duration\">Duraci├│n *</Label>\r\n              <Input\r\n                id=\"duration\"\r\n                value={formData.duration}\r\n                onChange={(e) => setFormData({ ...formData, duration: e.target.value })}\r\n                placeholder=\"Ej: 7 d├¡as\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"startDate\">Fecha de Inicio *</Label>\r\n              <Input\r\n                id=\"startDate\"\r\n                type=\"datetime-local\"\r\n                value={formData.startDate}\r\n                onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"endDate\">Fecha de Fin</Label>\r\n              <Input\r\n                id=\"endDate\"\r\n                type=\"datetime-local\"\r\n                value={formData.endDate}\r\n                onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"instructions\">Instrucciones</Label>\r\n            <Textarea\r\n              id=\"instructions\"\r\n              value={formData.instructions}\r\n              onChange={(e) => setFormData({ ...formData, instructions: e.target.value })}\r\n              placeholder=\"Instrucciones adicionales para el tratamiento...\"\r\n              rows={4}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading ? 'Guardando...' : prescription ? 'Actualizar' : 'Crear'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\services\\ServiceDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\services\\ServiceFormDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2950,2953],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2950,2953],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { ClinicService } from '@/services/clinicService';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ServiceFormDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (service: any) => void;\r\n  service?: ClinicService;\r\n}\r\n\r\nexport function ServiceFormDialog({ open, onClose, onSubmit, service }: ServiceFormDialogProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    category: '',\r\n    price: '',\r\n    durationMinutes: '',\r\n    requiresAppointment: true,\r\n    isActive: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (service) {\r\n        setFormData({\r\n          name: service.name || '',\r\n          description: service.description || '',\r\n          category: service.category || '',\r\n          price: service.price?.toString() || '',\r\n          durationMinutes: service.durationMinutes?.toString() || '',\r\n          requiresAppointment: service.requiresAppointment !== undefined ? service.requiresAppointment : true,\r\n          isActive: service.isActive !== undefined ? service.isActive : true,\r\n        });\r\n      } else {\r\n        setFormData({\r\n          name: '',\r\n          description: '',\r\n          category: '',\r\n          price: '',\r\n          durationMinutes: '',\r\n          requiresAppointment: true,\r\n          isActive: true,\r\n        });\r\n      }\r\n    }\r\n  }, [open, service]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.name || !formData.category || !formData.price || !formData.durationMinutes) {\r\n      toast.error('Por favor completa los campos obligatorios');\r\n      return;\r\n    }\r\n\r\n    const durationValue = parseInt(formData.durationMinutes);\r\n    if (isNaN(durationValue) || durationValue < 1) {\r\n      toast.error('La duraci├│n debe ser un n├║mero mayor a 0');\r\n      return;\r\n    }\r\n\r\n    const priceValue = parseFloat(formData.price);\r\n    if (isNaN(priceValue) || priceValue <= 0) {\r\n      toast.error('El precio debe ser un n├║mero mayor a 0');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const serviceData = {\r\n        name: formData.name,\r\n        description: formData.description || undefined,\r\n        category: formData.category,\r\n        price: priceValue,\r\n        durationMinutes: durationValue,\r\n        requiresAppointment: formData.requiresAppointment,\r\n        ...(service && { isActive: formData.isActive }),\r\n      };\r\n      \r\n      await onSubmit(serviceData);\r\n    } catch (error: any) {\r\n      console.error('Error al guardar servicio:', error);\r\n      // El error ya se maneja en la p├ígina padre\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const categories = [\r\n    'Consultas',\r\n    'Vacunaciones',\r\n    'Cirug├¡as',\r\n    'Laboratorio',\r\n    'Radiolog├¡a',\r\n    'Est├⌐tica',\r\n    'Emergencias',\r\n    'Otros',\r\n  ];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>{service ? 'Editar Servicio' : 'Nuevo Servicio'}</DialogTitle>\r\n          <DialogDescription>\r\n            {service ? 'Modifica los datos del servicio' : 'Completa los datos para crear un nuevo servicio'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"name\">Nombre del Servicio *</Label>\r\n            <Input\r\n              id=\"name\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              placeholder=\"Ej: Consulta Veterinaria General\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"description\">Descripci├│n</Label>\r\n            <Textarea\r\n              id=\"description\"\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"Descripci├│n detallada del servicio...\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"category\">Categor├¡a *</Label>\r\n              <select\r\n                id=\"category\"\r\n                value={formData.category}\r\n                onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                required\r\n              >\r\n                <option value=\"\">Selecciona una categor├¡a</option>\r\n                {categories.map((cat) => (\r\n                  <option key={cat} value={cat}>\r\n                    {cat}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"price\">Precio (COP) *</Label>\r\n              <Input\r\n                id=\"price\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                value={formData.price}\r\n                onChange={(e) => setFormData({ ...formData, price: e.target.value })}\r\n                placeholder=\"0.00\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"durationMinutes\">Duraci├│n (minutos) *</Label>\r\n              <Input\r\n                id=\"durationMinutes\"\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={formData.durationMinutes}\r\n                onChange={(e) => setFormData({ ...formData, durationMinutes: e.target.value })}\r\n                placeholder=\"30\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"requiresAppointment\">Requiere Cita</Label>\r\n              <div className=\"flex items-center space-x-2 pt-2\">\r\n                <Switch\r\n                  id=\"requiresAppointment\"\r\n                  checked={formData.requiresAppointment}\r\n                  onCheckedChange={(checked) => setFormData({ ...formData, requiresAppointment: checked })}\r\n                />\r\n                <Label htmlFor=\"requiresAppointment\" className=\"text-sm font-normal\">\r\n                  {formData.requiresAppointment ? 'S├¡' : 'No'}\r\n                </Label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {service && (\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"isActive\">Estado</Label>\r\n              <div className=\"flex items-center space-x-2 pt-2\">\r\n                <Switch\r\n                  id=\"isActive\"\r\n                  checked={formData.isActive}\r\n                  onCheckedChange={(checked) => setFormData({ ...formData, isActive: checked })}\r\n                />\r\n                <Label htmlFor=\"isActive\" className=\"text-sm font-normal\">\r\n                  {formData.isActive ? 'Activo' : 'Inactivo'}\r\n                </Label>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading ? 'Guardando...' : service ? 'Actualizar' : 'Crear'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\r\n}\r\n\r\nexport { Badge, badgeVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\r\n  },\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[733,784],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\r\nimport { Command as CommandPrimitive } from \"cmdk\";\r\nimport { Search } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCommand.displayName = CommandPrimitive.displayName;\r\n\r\ninterface CommandDialogProps extends DialogProps {}\r\n\r\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName;\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName;\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\r\n));\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName;\r\n\r\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\r\n};\r\nCommandShortcut.displayName = \"CommandShortcut\";\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nconst Form = FormProvider;\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n> = {\r\n  name: TName;\r\n};\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  );\r\n};\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n  const itemContext = React.useContext(FormItemContext);\r\n  const { getFieldState, formState } = useFormContext();\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\");\r\n  }\r\n\r\n  const { id } = itemContext;\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  };\r\n};\r\n\r\ntype FormItemContextValue = {\r\n  id: string;\r\n};\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\r\n\r\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const id = React.useId();\r\n\r\n    return (\r\n      <FormItemContext.Provider value={{ id }}>\r\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n      </FormItemContext.Provider>\r\n    );\r\n  },\r\n);\r\nFormItem.displayName = \"FormItem\";\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField();\r\n\r\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\r\n});\r\nFormLabel.displayName = \"FormLabel\";\r\n\r\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\r\n  ({ ...props }, ref) => {\r\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\r\n\r\n    return (\r\n      <Slot\r\n        ref={ref}\r\n        id={formItemId}\r\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\r\n        aria-invalid={!!error}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nFormControl.displayName = \"FormControl\";\r\n\r\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const { formDescriptionId } = useFormField();\r\n\r\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\r\n  },\r\n);\r\nFormDescription.displayName = \"FormDescription\";\r\n\r\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, children, ...props }, ref) => {\r\n    const { error, formMessageId } = useFormField();\r\n    const body = error ? String(error?.message) : children;\r\n\r\n    if (!body) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\r\n        {body}\r\n      </p>\r\n    );\r\n  },\r\n);\r\nFormMessage.displayName = \"FormMessage\";\r\n\r\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { ChevronDown } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n));\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\r\n    {...props}\r\n  />\r\n));\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\r\n);\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\" \"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n));\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n));\r\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { VariantProps, cva } from \"class-variance-authority\";\r\nimport { PanelLeft } from \"lucide-react\";\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\r\nconst SIDEBAR_WIDTH = \"16rem\";\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\r\n\r\ntype SidebarContext = {\r\n  state: \"expanded\" | \"collapsed\";\r\n  open: boolean;\r\n  setOpen: (open: boolean) => void;\r\n  openMobile: boolean;\r\n  setOpenMobile: (open: boolean) => void;\r\n  isMobile: boolean;\r\n  toggleSidebar: () => void;\r\n};\r\n\r\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext);\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nconst SidebarProvider = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    defaultOpen?: boolean;\r\n    open?: boolean;\r\n    onOpenChange?: (open: boolean) => void;\r\n  }\r\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\r\n  const isMobile = useIsMobile();\r\n  const [openMobile, setOpenMobile] = React.useState(false);\r\n\r\n  // This is the internal state of the sidebar.\r\n  // We use openProp and setOpenProp for control from outside the component.\r\n  const [_open, _setOpen] = React.useState(defaultOpen);\r\n  const open = openProp ?? _open;\r\n  const setOpen = React.useCallback(\r\n    (value: boolean | ((value: boolean) => boolean)) => {\r\n      const openState = typeof value === \"function\" ? value(open) : value;\r\n      if (setOpenProp) {\r\n        setOpenProp(openState);\r\n      } else {\r\n        _setOpen(openState);\r\n      }\r\n\r\n      // This sets the cookie to keep the sidebar state.\r\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\r\n    },\r\n    [setOpenProp, open],\r\n  );\r\n\r\n  // Helper to toggle the sidebar.\r\n  const toggleSidebar = React.useCallback(() => {\r\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\r\n  }, [isMobile, setOpen, setOpenMobile]);\r\n\r\n  // Adds a keyboard shortcut to toggle the sidebar.\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\r\n        event.preventDefault();\r\n        toggleSidebar();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [toggleSidebar]);\r\n\r\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n  // This makes it easier to style the sidebar with Tailwind classes.\r\n  const state = open ? \"expanded\" : \"collapsed\";\r\n\r\n  const contextValue = React.useMemo<SidebarContext>(\r\n    () => ({\r\n      state,\r\n      open,\r\n      setOpen,\r\n      isMobile,\r\n      openMobile,\r\n      setOpenMobile,\r\n      toggleSidebar,\r\n    }),\r\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\r\n  );\r\n\r\n  return (\r\n    <SidebarContext.Provider value={contextValue}>\r\n      <TooltipProvider delayDuration={0}>\r\n        <div\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH,\r\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n              ...style,\r\n            } as React.CSSProperties\r\n          }\r\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\r\n          ref={ref}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </TooltipProvider>\r\n    </SidebarContext.Provider>\r\n  );\r\n});\r\nSidebarProvider.displayName = \"SidebarProvider\";\r\n\r\nconst Sidebar = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    side?: \"left\" | \"right\";\r\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\r\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\r\n  }\r\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\r\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\r\n\r\n  if (collapsible === \"none\") {\r\n    return (\r\n      <div\r\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\r\n        ref={ref}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n        <SheetContent\r\n          data-sidebar=\"sidebar\"\r\n          data-mobile=\"true\"\r\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n            } as React.CSSProperties\r\n          }\r\n          side={side}\r\n        >\r\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n        </SheetContent>\r\n      </Sheet>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className=\"group peer hidden text-sidebar-foreground md:block\"\r\n      data-state={state}\r\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n      data-variant={variant}\r\n      data-side={side}\r\n    >\r\n      {/* This is what handles the sidebar gap on desktop */}\r\n      <div\r\n        className={cn(\r\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\r\n          \"group-data-[collapsible=offcanvas]:w-0\",\r\n          \"group-data-[side=right]:rotate-180\",\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\r\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\r\n        )}\r\n      />\r\n      <div\r\n        className={cn(\r\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\r\n          side === \"left\"\r\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n          // Adjust the padding for floating and inset variants.\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\r\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          data-sidebar=\"sidebar\"\r\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nSidebar.displayName = \"Sidebar\";\r\n\r\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\r\n  ({ className, onClick, ...props }, ref) => {\r\n    const { toggleSidebar } = useSidebar();\r\n\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        data-sidebar=\"trigger\"\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\"h-7 w-7\", className)}\r\n        onClick={(event) => {\r\n          onClick?.(event);\r\n          toggleSidebar();\r\n        }}\r\n        {...props}\r\n      >\r\n        <PanelLeft />\r\n        <span className=\"sr-only\">Toggle Sidebar</span>\r\n      </Button>\r\n    );\r\n  },\r\n);\r\nSidebarTrigger.displayName = \"SidebarTrigger\";\r\n\r\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\r\n  ({ className, ...props }, ref) => {\r\n    const { toggleSidebar } = useSidebar();\r\n\r\n    return (\r\n      <button\r\n        ref={ref}\r\n        data-sidebar=\"rail\"\r\n        aria-label=\"Toggle Sidebar\"\r\n        tabIndex={-1}\r\n        onClick={toggleSidebar}\r\n        title=\"Toggle Sidebar\"\r\n        className={cn(\r\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\r\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\r\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\r\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarRail.displayName = \"SidebarRail\";\r\n\r\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\r\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarInset.displayName = \"SidebarInset\";\r\n\r\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <Input\r\n        ref={ref}\r\n        data-sidebar=\"input\"\r\n        className={cn(\r\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarInput.displayName = \"SidebarInput\";\r\n\r\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\r\n});\r\nSidebarHeader.displayName = \"SidebarHeader\";\r\n\r\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\r\n});\r\nSidebarFooter.displayName = \"SidebarFooter\";\r\n\r\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <Separator\r\n        ref={ref}\r\n        data-sidebar=\"separator\"\r\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarSeparator.displayName = \"SidebarSeparator\";\r\n\r\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarContent.displayName = \"SidebarContent\";\r\n\r\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarGroup.displayName = \"SidebarGroup\";\r\n\r\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\r\n  ({ className, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"div\";\r\n\r\n    return (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"group-label\"\r\n        className={cn(\r\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\r\n\r\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\r\n  ({ className, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n\r\n    return (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"group-action\"\r\n        className={cn(\r\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n          // Increases the hit area of the button on mobile.\r\n          \"after:absolute after:-inset-2 after:md:hidden\",\r\n          \"group-data-[collapsible=icon]:hidden\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\r\n\r\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\r\n  ),\r\n);\r\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\r\n\r\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\r\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\r\n));\r\nSidebarMenu.displayName = \"SidebarMenu\";\r\n\r\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\r\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\r\n));\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nconst SidebarMenuButton = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean;\r\n    isActive?: boolean;\r\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\r\n  } & VariantProps<typeof sidebarMenuButtonVariants>\r\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n  const { isMobile, state } = useSidebar();\r\n\r\n  const button = (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n\r\n  if (!tooltip) {\r\n    return button;\r\n  }\r\n\r\n  if (typeof tooltip === \"string\") {\r\n    tooltip = {\r\n      children: tooltip,\r\n    };\r\n  }\r\n\r\n  return (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\r\n    </Tooltip>\r\n  );\r\n});\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\r\n\r\nconst SidebarMenuAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean;\r\n    showOnHover?: boolean;\r\n  }\r\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\r\n\r\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-badge\"\r\n      className={cn(\r\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\r\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\r\n\r\nconst SidebarMenuSkeleton = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    showIcon?: boolean;\r\n  }\r\n>(({ className, showIcon = false, ...props }, ref) => {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`;\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\r\n      <Skeleton\r\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n});\r\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\r\n\r\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <ul\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub\"\r\n      className={cn(\r\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\r\n\r\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\r\n  <li ref={ref} {...props} />\r\n));\r\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\r\n\r\nconst SidebarMenuSubButton = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentProps<\"a\"> & {\r\n    asChild?: boolean;\r\n    size?: \"sm\" | \"md\";\r\n    isActive?: boolean;\r\n  }\r\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\";\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\r\nimport { Toaster as Sonner, toast } from \"sonner\";\r\n\r\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\r\n\r\nconst Toaster = ({ ...props }: ToasterProps) => {\r\n  const { theme = \"system\" } = useTheme();\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      toastOptions={{\r\n        classNames: {\r\n          toast:\r\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\r\n          description: \"group-[.toast]:text-muted-foreground\",\r\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\r\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport { Toaster, toast };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[79,163],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\r\n));\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName;\r\n\r\nexport { Toggle, toggleVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\users\\UserDetailsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\components\\users\\UserFormDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3313,3316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3313,3316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":128,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":128,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { authService } from '../services/authService';\r\nimport { useToast } from '../hooks/use-toast';\r\n\r\nexport type UserRole = 'admin' | 'veterinarian' | 'receptionist' | 'owner';\r\n\r\nexport interface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  fullName: string;\r\n  role: UserRole;\r\n  roles?: string[];\r\n  permissions?: string[];\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  login: (username: string, password: string) => Promise<boolean>;\r\n  logout: () => void;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    const initAuth = async () => {\r\n      const storedUser = localStorage.getItem('vetclinic_user');\r\n      const token = authService.getToken();\r\n\r\n      if (storedUser && token) {\r\n        try {\r\n          const currentUser = await authService.getCurrentUser();\r\n          setUser(currentUser);\r\n        } catch (error) {\r\n          console.error('Token validation failed:', error);\r\n          localStorage.removeItem('vetclinic_user');\r\n          localStorage.removeItem('vetclinic_token');\r\n          localStorage.removeItem('vetclinic_refresh_token');\r\n        }\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n\r\n    initAuth();\r\n  }, []);\r\n\r\n  const login = async (username: string, password: string): Promise<boolean> => {\r\n    try {\r\n      const response = await authService.login({ username, password });\r\n\r\n      if (response.success && response.data) {\r\n        authService.setTokens(response.data.token, response.data.refreshToken);\r\n\r\n        const roles = response.data.roles || [];\r\n        let primaryRole: UserRole = 'receptionist';\r\n\r\n        if (roles.some((r: string) => r === 'OWNER' || r === 'ROLE_OWNER')) {\r\n          primaryRole = 'owner';\r\n        } else if (roles.some((r: string) => r === 'ADMIN' || r === 'ROLE_ADMIN')) {\r\n          primaryRole = 'admin';\r\n        } else if (roles.some((r: string) => r === 'VETERINARIAN' || r === 'ROLE_VETERINARIAN')) {\r\n          primaryRole = 'veterinarian';\r\n        } else if (roles.some((r: string) => r === 'RECEPTIONIST' || r === 'ROLE_RECEPTIONIST')) {\r\n          primaryRole = 'receptionist';\r\n        }\r\n\r\n        const userData: User = {\r\n          id: response.data.username,\r\n          username: response.data.username,\r\n          email: response.data.email,\r\n          fullName: response.data.fullName,\r\n          role: primaryRole,\r\n          roles: response.data.roles,\r\n          permissions: response.data.permissions,\r\n        };\r\n\r\n        setUser(userData);\r\n        localStorage.setItem('vetclinic_user', JSON.stringify(userData));\r\n\r\n        toast({\r\n          title: 'Login successful',\r\n          description: `Welcome back, ${response.data.fullName}!`,\r\n        });\r\n\r\n        return true;\r\n      }\r\n\r\n      toast({\r\n        title: 'Login failed',\r\n        description: response.message || 'Invalid credentials',\r\n        variant: 'destructive',\r\n      });\r\n      return false;\r\n    } catch (error: any) {\r\n      console.error('Login error:', error);\r\n      toast({\r\n        title: 'Login error',\r\n        description: error.response?.data?.message || 'Unable to connect to server',\r\n        variant: 'destructive',\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await authService.logout();\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    } finally {\r\n      setUser(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n      <AuthContext.Provider value={{ user, login, logout, isLoading }}>\r\n        {children}\r\n      </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Agenda.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2054,2057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2054,2057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAgenda'. Either include it or remove the dependency array.","line":63,"column":6,"nodeType":"ArrayExpression","endLine":63,"endColumn":52,"suggestions":[{"desc":"Update the dependencies array to be: [loadAgenda, selectedDate, selectedVeterinarian, viewType]","fix":{"range":[2648,2694],"text":"[loadAgenda, selectedDate, selectedVeterinarian, viewType]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2862,2865],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2862,2865],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2904,2907],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2904,2907],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17391,17394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17391,17394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Calendar as CalendarIcon, Clock, User, ChevronLeft, ChevronRight, \r\n  Filter, MoreHorizontal, MapPin, Stethoscope \r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { agendaService } from '@/services/agendaService';\r\nimport { userService } from '@/services/userService';\r\nimport { appointmentService } from '@/services/appointmentService';\r\nimport type { Appointment } from '@/types/appointment';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { AppointmentDetailsDialog } from '@/components/appointments/AppointmentDetailsDialog';\r\nimport { \r\n  format, startOfWeek, endOfWeek, startOfMonth, endOfMonth, \r\n  eachDayOfInterval, isSameDay, addDays, addWeeks, addMonths, \r\n  subDays, subWeeks, subMonths, isToday \r\n} from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// Configuraci├│n de colores para citas en el calendario\r\nconst statusColors: Record<string, string> = {\r\n  SCHEDULED: 'bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200',\r\n  CONFIRMED: 'bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200',\r\n  IN_PROGRESS: 'bg-amber-100 text-amber-700 border-amber-200 hover:bg-amber-200',\r\n  COMPLETED: 'bg-slate-100 text-slate-600 border-slate-200 hover:bg-slate-200',\r\n  CANCELLED: 'bg-rose-50 text-rose-700 border-rose-100 hover:bg-rose-100 opacity-60',\r\n};\r\n\r\nexport default function Agenda() {\r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n  const [veterinarians, setVeterinarians] = useState<any[]>([]);\r\n  const [selectedDate, setSelectedDate] = useState(new Date());\r\n  const [selectedVeterinarian, setSelectedVeterinarian] = useState<string>('all');\r\n  const [viewType, setViewType] = useState<'DAILY' | 'WEEKLY' | 'MONTHLY'>('WEEKLY');\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    loadVeterinarians();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadAgenda();\r\n  }, [selectedDate, selectedVeterinarian, viewType]);\r\n\r\n  const loadVeterinarians = async () => {\r\n    try {\r\n      const response = await userService.getAll(0, 100);\r\n      const vets = response.content.filter((user: any) => \r\n        user.roles?.some((role: any) => role.name === 'VETERINARIAN' || role === 'VETERINARIAN')\r\n      );\r\n      setVeterinarians(vets);\r\n    } catch (error) {\r\n      console.error('Error al cargar veterinarios');\r\n    }\r\n  };\r\n\r\n  const loadAgenda = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const dateStr = format(selectedDate, 'yyyy-MM-dd');\r\n      const vetId = selectedVeterinarian === 'all' ? undefined : selectedVeterinarian;\r\n      \r\n      let response: Appointment[];\r\n      // Optimizamos la carga para traer un rango adecuado seg├║n la vista\r\n      if (viewType === 'MONTHLY') {\r\n          response = await agendaService.getMonthlyView(dateStr, vetId);\r\n      } else if (viewType === 'WEEKLY') {\r\n          response = await agendaService.getWeeklyView(dateStr, vetId);\r\n      } else {\r\n          response = await agendaService.getDailyView(dateStr, vetId);\r\n      }\r\n      setAppointments(response || []);\r\n    } catch (error) {\r\n      toast({ title: 'Error de sincronizaci├│n', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const navigateDate = (direction: 'prev' | 'next') => {\r\n    if (viewType === 'DAILY') {\r\n      setSelectedDate(direction === 'next' ? addDays(selectedDate, 1) : subDays(selectedDate, 1));\r\n    } else if (viewType === 'WEEKLY') {\r\n      setSelectedDate(direction === 'next' ? addWeeks(selectedDate, 1) : subWeeks(selectedDate, 1));\r\n    } else {\r\n      setSelectedDate(direction === 'next' ? addMonths(selectedDate, 1) : subMonths(selectedDate, 1));\r\n    }\r\n  };\r\n\r\n  const handleAppointmentClick = (appointment: Appointment) => {\r\n    setSelectedAppointment(appointment);\r\n    setIsDetailsOpen(true);\r\n  };\r\n\r\n  const handleCancel = async (id: number) => {\r\n    try {\r\n      await appointmentService.cancel(id);\r\n      toast({ title: '├ëxito', description: 'Cita cancelada correctamente' });\r\n      loadAgenda();\r\n      setIsDetailsOpen(false);\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'No se pudo cancelar la cita', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    try {\r\n      await appointmentService.delete(id);\r\n      toast({ title: '├ëxito', description: 'Cita eliminada correctamente' });\r\n      loadAgenda();\r\n      setIsDetailsOpen(false);\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'No se pudo eliminar la cita', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  // --- COMPONENTES DE VISTA ---\r\n\r\n  const DailyView = () => {\r\n    const dayAppointments = appointments.filter(apt => \r\n      isSameDay(new Date(apt.scheduledDate), selectedDate)\r\n    ).sort((a, b) => new Date(a.scheduledDate).getTime() - new Date(b.scheduledDate).getTime());\r\n\r\n    return (\r\n      <div className=\"space-y-4 max-w-3xl mx-auto\">\r\n        {dayAppointments.length === 0 ? (\r\n           <EmptyState />\r\n        ) : (\r\n          <div className=\"relative border-l-2 border-muted ml-4 pl-8 py-4 space-y-8\">\r\n            {dayAppointments.map((apt) => (\r\n                <motion.div \r\n                    key={apt.id} \r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    className=\"relative\"\r\n                >\r\n                    {/* Time Dot */}\r\n                    <div className=\"absolute -left-[41px] top-0 bg-background border-2 border-primary w-5 h-5 rounded-full flex items-center justify-center z-10\">\r\n                        <div className=\"w-2 h-2 bg-primary rounded-full\" />\r\n                    </div>\r\n                    \r\n                    <Card \r\n                        className=\"hover:shadow-md transition-all cursor-pointer border-l-4 hover:scale-[1.02]\" \r\n                        style={{ borderLeftColor: 'var(--primary)' }}\r\n                        onClick={() => handleAppointmentClick(apt)}\r\n                    >\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"flex justify-between items-start mb-2\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Badge variant=\"outline\" className=\"font-mono text-xs\">\r\n                                        {format(new Date(apt.scheduledDate), 'HH:mm')}\r\n                                    </Badge>\r\n                                    <Badge variant=\"secondary\" className={statusColors[apt.status]}>\r\n                                        {apt.status}\r\n                                    </Badge>\r\n                                </div>\r\n                                {apt.veterinarianName && (\r\n                                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded\">\r\n                                        <Stethoscope className=\"w-3 h-3\" /> Dr. {apt.veterinarianName.split(' ')[0]}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <h3 className=\"font-bold text-lg mb-1 hover:text-primary transition-colors\">{apt.patientName}</h3>\r\n                            <p className=\"text-sm text-muted-foreground mb-3\">{apt.reason || 'Consulta General'}</p>\r\n                            <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\r\n                                <span className=\"flex items-center gap-1\"><User className=\"w-3 h-3\" /> {apt.ownerName}</span>\r\n                                <span className=\"flex items-center gap-1\"><Clock className=\"w-3 h-3\" /> {apt.durationMinutes} min</span>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </motion.div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const WeeklyView = () => {\r\n    const weekStart = startOfWeek(selectedDate, { weekStartsOn: 1 });\r\n    const weekEnd = endOfWeek(selectedDate, { weekStartsOn: 1 });\r\n    const weekDays = eachDayOfInterval({ start: weekStart, end: weekEnd });\r\n\r\n    return (\r\n      <div className=\"grid grid-cols-7 gap-px bg-border rounded-lg overflow-hidden border\">\r\n        {weekDays.map((day) => {\r\n          const isCurrentDay = isToday(day);\r\n          const dayAppointments = appointments.filter(apt => isSameDay(new Date(apt.scheduledDate), day));\r\n          \r\n          return (\r\n            <div key={day.toISOString()} className={`min-h-[300px] bg-background p-2 flex flex-col gap-2 ${isCurrentDay ? 'bg-blue-50/30' : ''}`}>\r\n              <div className={`text-center p-2 rounded-lg mb-2 ${isCurrentDay ? 'bg-primary text-primary-foreground shadow-sm' : ''}`}>\r\n                <div className=\"text-xs uppercase font-medium opacity-70\">{format(day, 'EEE', { locale: es })}</div>\r\n                <div className=\"text-lg font-bold\">{format(day, 'd')}</div>\r\n              </div>\r\n              \r\n              <div className=\"flex-1 space-y-1.5 overflow-y-auto max-h-[400px] custom-scrollbar\">\r\n                {dayAppointments.map((apt) => (\r\n                  <AppointmentPill key={apt.id} appointment={apt} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const MonthlyView = () => {\r\n    const monthStart = startOfMonth(selectedDate);\r\n    const monthEnd = endOfMonth(selectedDate);\r\n    const days = eachDayOfInterval({ start: monthStart, end: monthEnd });\r\n    \r\n    // Relleno para que empiece en lunes correctamente (si el mes empieza en mi├⌐rcoles, rellenar lun y mar)\r\n    const startDayOfWeek = monthStart.getDay() || 7; // 1 (Lun) - 7 (Dom)\r\n    const emptyDays = Array(startDayOfWeek - 1).fill(null);\r\n\r\n    return (\r\n      <div className=\"bg-background rounded-lg border shadow-sm\">\r\n        <div className=\"grid grid-cols-7 border-b bg-muted/20\">\r\n            {['Lun', 'Mar', 'Mi├⌐', 'Jue', 'Vie', 'S├íb', 'Dom'].map(d => (\r\n                <div key={d} className=\"p-3 text-center text-sm font-semibold text-muted-foreground\">{d}</div>\r\n            ))}\r\n        </div>\r\n        <div className=\"grid grid-cols-7 auto-rows-fr\">\r\n            {emptyDays.map((_, i) => <div key={`empty-${i}`} className=\"border-b border-r bg-muted/5 p-4 min-h-[120px]\" />)}\r\n            {days.map(day => {\r\n                const dayAppointments = appointments.filter(a => isSameDay(new Date(a.scheduledDate), day));\r\n                const isCurrentDay = isToday(day);\r\n                \r\n                return (\r\n                    <div key={day.toISOString()} className={`border-b border-r p-2 min-h-[120px] transition-colors hover:bg-muted/5 ${isCurrentDay ? 'bg-blue-50/50' : ''}`}>\r\n                        <div className={`text-right mb-2 text-sm font-medium ${isCurrentDay ? 'text-primary' : 'text-muted-foreground'}`}>\r\n                            <span className={isCurrentDay ? 'bg-primary text-primary-foreground w-6 h-6 rounded-full inline-flex items-center justify-center' : ''}>\r\n                                {format(day, 'd')}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            {dayAppointments.slice(0, 3).map(apt => <AppointmentPill key={apt.id} appointment={apt} small />)}\r\n                            {dayAppointments.length > 3 && (\r\n                                <div className=\"text-xs text-center text-muted-foreground font-medium p-1 hover:bg-muted rounded cursor-pointer\">\r\n                                    +{dayAppointments.length - 3} m├ís\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Subcomponente para las citas en el calendario\r\n  const AppointmentPill = ({ appointment, small }: { appointment: Appointment, small?: boolean }) => (\r\n    <TooltipProvider>\r\n        <Tooltip>\r\n            <TooltipTrigger asChild>\r\n                <div \r\n                    className={`\r\n                        text-xs rounded px-2 py-1.5 border cursor-pointer truncate transition-all hover:scale-[1.02] hover:shadow-md\r\n                        ${statusColors[appointment.status] || 'bg-gray-100'}\r\n                    `}\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleAppointmentClick(appointment);\r\n                    }}\r\n                >\r\n                    <div className=\"font-semibold flex justify-between\">\r\n                        <span>{format(new Date(appointment.scheduledDate), 'HH:mm')}</span>\r\n                        {!small && <span className=\"opacity-75 text-[10px]\">{appointment.durationMinutes}m</span>}\r\n                    </div>\r\n                    <div className=\"truncate font-medium\">{appointment.patientName}</div>\r\n                </div>\r\n            </TooltipTrigger>\r\n            <TooltipContent>\r\n                <div className=\"text-xs\">\r\n                    <p className=\"font-bold\">{appointment.patientName}</p>\r\n                    <p>Due├▒o: {appointment.ownerName}</p>\r\n                    <p>{appointment.reason}</p>\r\n                    <p className=\"text-muted-foreground\">{format(new Date(appointment.scheduledDate), 'HH:mm')} - Dr. {appointment.veterinarianName}</p>\r\n                    <p className=\"text-muted-foreground mt-1 text-[10px]\">Click para ver detalles</p>\r\n                </div>\r\n            </TooltipContent>\r\n        </Tooltip>\r\n    </TooltipProvider>\r\n  );\r\n\r\n  const EmptyState = () => (\r\n    <div className=\"text-center py-12 bg-muted/10 rounded-xl border-2 border-dashed\">\r\n        <CalendarIcon className=\"w-12 h-12 mx-auto text-muted-foreground opacity-20 mb-3\" />\r\n        <h3 className=\"text-lg font-semibold text-muted-foreground\">Sin citas programadas</h3>\r\n        <p className=\"text-sm text-muted-foreground/70\">No hay actividad registrada para este d├¡a.</p>\r\n    </div>\r\n  );\r\n\r\n  // --- RENDER PRINCIPAL ---\r\n\r\n  return (\r\n    <div className=\"space-y-6 h-full flex flex-col\">\r\n      {/* HEADER CONTROL BAR */}\r\n      <div className=\"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 bg-background p-1\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight\">Agenda M├⌐dica</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            {viewType === 'DAILY' && format(selectedDate, \"EEEE, d 'de' MMMM yyyy\", { locale: es })}\r\n            {viewType === 'WEEKLY' && `Semana ${format(startOfWeek(selectedDate, { weekStartsOn: 1 }), 'd MMM')} - ${format(endOfWeek(selectedDate, { weekStartsOn: 1 }), 'd MMM', { locale: es })}`}\r\n            {viewType === 'MONTHLY' && format(selectedDate, \"MMMM yyyy\", { locale: es })}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap items-center gap-2 w-full xl:w-auto\">\r\n            {/* VET FILTER */}\r\n            <Select value={selectedVeterinarian} onValueChange={setSelectedVeterinarian}>\r\n                <SelectTrigger className=\"w-[200px] h-9\">\r\n                    <User className=\"w-4 h-4 mr-2 text-muted-foreground\" />\r\n                    <SelectValue placeholder=\"Todos los doctores\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todos los doctores</SelectItem>\r\n                    {veterinarians.map((vet) => (\r\n                        <SelectItem key={vet.id} value={vet.id}>Dr. {vet.firstName} {vet.lastName}</SelectItem>\r\n                    ))}\r\n                </SelectContent>\r\n            </Select>\r\n\r\n            <div className=\"h-6 w-px bg-border mx-2 hidden sm:block\" />\r\n\r\n            {/* NAVIGATION */}\r\n            <div className=\"flex items-center border rounded-md bg-background shadow-sm\">\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-9 w-9\" onClick={() => navigateDate('prev')}>\r\n                    <ChevronLeft className=\"h-4 w-4\" />\r\n                </Button>\r\n                <Button variant=\"ghost\" className=\"h-9 px-4 font-normal\" onClick={() => setSelectedDate(new Date())}>\r\n                    Hoy\r\n                </Button>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-9 w-9\" onClick={() => navigateDate('next')}>\r\n                    <ChevronRight className=\"h-4 w-4\" />\r\n                </Button>\r\n            </div>\r\n\r\n            {/* VIEW TOGGLE */}\r\n            <Tabs value={viewType} onValueChange={(v) => setViewType(v as any)} className=\"w-full sm:w-auto\">\r\n                <TabsList className=\"h-9 w-full sm:w-auto\">\r\n                    <TabsTrigger value=\"DAILY\" className=\"text-xs px-3\">D├¡a</TabsTrigger>\r\n                    <TabsTrigger value=\"WEEKLY\" className=\"text-xs px-3\">Semana</TabsTrigger>\r\n                    <TabsTrigger value=\"MONTHLY\" className=\"text-xs px-3\">Mes</TabsTrigger>\r\n                </TabsList>\r\n            </Tabs>\r\n        </div>\r\n      </div>\r\n\r\n      {/* CALENDAR CONTENT AREA */}\r\n      <div className=\"flex-1 min-h-[500px] relative\">\r\n          {loading && (\r\n              <div className=\"absolute inset-0 bg-background/50 backdrop-blur-sm z-10 flex items-center justify-center\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\r\n              </div>\r\n          )}\r\n          \r\n          <AnimatePresence mode=\"wait\">\r\n              <motion.div\r\n                key={viewType + selectedDate.toISOString()}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                transition={{ duration: 0.2 }}\r\n                className=\"h-full\"\r\n              >\r\n                  {viewType === 'DAILY' && <DailyView />}\r\n                  {viewType === 'WEEKLY' && <WeeklyView />}\r\n                  {viewType === 'MONTHLY' && <MonthlyView />}\r\n              </motion.div>\r\n          </AnimatePresence>\r\n      </div>\r\n\r\n      {/* DETAILS DIALOG */}\r\n      {selectedAppointment && (\r\n        <AppointmentDetailsDialog\r\n          appointment={selectedAppointment}\r\n          open={isDetailsOpen}\r\n          onOpenChange={setIsDetailsOpen}\r\n          onEdit={() => {\r\n            setIsDetailsOpen(false);\r\n            loadAgenda();\r\n          }}\r\n          onCancel={() => handleCancel(selectedAppointment.id)}\r\n          onDelete={() => handleDelete(selectedAppointment.id)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Appointments.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1199,1202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1199,1202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAppointments'. Either include it or remove the dependency array.","line":49,"column":6,"nodeType":"ArrayExpression","endLine":49,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadAppointments]","fix":{"range":[2734,2736],"text":"[loadAppointments]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, Calendar as CalendarIcon, Clock, User, \r\n  AlertCircle, CheckCircle2, MoreHorizontal, ChevronRight, X\r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Calendar } from \"@/components/ui/calendar\"; // Shadcn UI Calendar\r\nimport { AppointmentFormDialog } from '@/components/appointments/AppointmentFormDialog';\r\nimport { AppointmentDetailsDialog } from '@/components/appointments/AppointmentDetailsDialog';\r\nimport { appointmentService } from '@/services/appointmentService';\r\nimport type { Appointment } from '@/types/appointment';\r\nimport { toast } from 'sonner';\r\nimport { format, isSameDay, parseISO, startOfToday } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// Configuraci├│n de Colores y Estilos\r\nconst statusConfig: Record<string, { label: string; style: string; icon: any }> = {\r\n  SCHEDULED: { label: 'Programada', style: 'bg-blue-100 text-blue-700 border-blue-200', icon: CalendarIcon },\r\n  CONFIRMED: { label: 'Confirmada', style: 'bg-emerald-100 text-emerald-700 border-emerald-200', icon: CheckCircle2 },\r\n  IN_PROGRESS: { label: 'En Curso', style: 'bg-amber-100 text-amber-700 border-amber-200', icon: Clock },\r\n  COMPLETED: { label: 'Finalizada', style: 'bg-slate-100 text-slate-700 border-slate-200', icon: CheckCircle2 },\r\n  CANCELLED: { label: 'Cancelada', style: 'bg-rose-50 text-rose-700 border-rose-200 opacity-70', icon: X },\r\n};\r\n\r\nconst typeConfig: Record<string, { label: string; color: string }> = {\r\n  CONSULTATION: { label: 'Consulta', color: 'bg-blue-500' },\r\n  VACCINATION: { label: 'Vacuna', color: 'bg-emerald-500' },\r\n  SURGERY: { label: 'Cirug├¡a', color: 'bg-rose-500' },\r\n  CHECKUP: { label: 'Control', color: 'bg-violet-500' },\r\n  EMERGENCY: { label: 'Urgencia', color: 'bg-orange-500' },\r\n};\r\n\r\nexport default function Appointments() {\r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(new Date());\r\n  const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [viewMode, setViewMode] = useState<'daily' | 'list'>('daily');\r\n\r\n  useEffect(() => {\r\n    loadAppointments();\r\n  }, []);\r\n\r\n  const loadAppointments = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await appointmentService.getAll(0, 500, searchTerm); // Cargamos m├ís para el calendario\r\n      setAppointments(response.content || []);\r\n    } catch (error) {\r\n      toast.error('Error al sincronizar la agenda');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    try {\r\n      await appointmentService.delete(id);\r\n      toast.success('Cita eliminada');\r\n      loadAppointments();\r\n      setIsDetailsOpen(false);\r\n    } catch (error) {\r\n      toast.error('Error al eliminar');\r\n    }\r\n  };\r\n\r\n  const handleCancel = async (id: number) => {\r\n    try {\r\n      await appointmentService.cancel(id);\r\n      toast.success('Cita cancelada');\r\n      loadAppointments();\r\n      setIsDetailsOpen(false);\r\n    } catch (error) {\r\n      toast.error('Error al cancelar');\r\n    }\r\n  };\r\n\r\n  // Filtrado de citas\r\n  const filteredAppointments = useMemo(() => {\r\n    if (viewMode === 'list') {\r\n      return appointments.filter(apt => \r\n        apt.patientName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        apt.ownerName.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    // En modo diario, filtramos por la fecha seleccionada\r\n    return appointments.filter(apt => \r\n      selectedDate && isSameDay(parseISO(apt.scheduledDate), selectedDate)\r\n    ).sort((a, b) => new Date(a.scheduledDate).getTime() - new Date(b.scheduledDate).getTime());\r\n  }, [appointments, searchTerm, selectedDate, viewMode]);\r\n\r\n  // Fechas que tienen citas (para mostrar indicadores en el calendario)\r\n  const daysWithAppointments = useMemo(() => {\r\n    return appointments.map(a => new Date(a.scheduledDate));\r\n  }, [appointments]);\r\n\r\n  return (\r\n    <div className=\"space-y-6 h-[calc(100vh-100px)] flex flex-col\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Agenda M├⌐dica</h1>\r\n          <p className=\"text-muted-foreground mt-1\">Planificaci├│n y control de citas.</p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <Tabs value={viewMode} onValueChange={(v) => setViewMode(v as 'daily' | 'list')}>\r\n                <TabsList>\r\n                    <TabsTrigger value=\"daily\">Vista Diaria</TabsTrigger>\r\n                    <TabsTrigger value=\"list\">Listado Global</TabsTrigger>\r\n                </TabsList>\r\n            </Tabs>\r\n            <AppointmentFormDialog onSuccess={loadAppointments}>\r\n                <Button className=\"shadow-md\">\r\n                    <Plus className=\"mr-2 h-4 w-4\" /> Nueva Cita\r\n                </Button>\r\n            </AppointmentFormDialog>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- MAIN CONTENT AREA --- */}\r\n      <div className=\"grid lg:grid-cols-12 gap-6 h-full\">\r\n        \r\n        {/* LEFT SIDE: CALENDAR & FILTERS (Solo visible en modo diario o desktop grande) */}\r\n        <div className={`lg:col-span-4 xl:col-span-3 space-y-6 ${viewMode === 'list' ? 'hidden lg:block' : ''}`}>\r\n            <Card className=\"overflow-hidden border shadow-lg\">\r\n                <div className=\"p-4 bg-gradient-to-br from-blue-600 to-blue-700 border-b\">\r\n                    <h3 className=\"font-semibold text-white flex items-center gap-2\">\r\n                        <CalendarIcon className=\"w-4 h-4\" /> Selector de Fecha\r\n                    </h3>\r\n                </div>\r\n                <CardContent className=\"p-4\">\r\n                    <Calendar\r\n                        mode=\"single\"\r\n                        selected={selectedDate}\r\n                        onSelect={setSelectedDate}\r\n                        className=\"rounded-md\"\r\n                        locale={es}\r\n                        modifiers={{\r\n                            booked: daysWithAppointments,\r\n                            today: startOfToday()\r\n                        }}\r\n                        modifiersClassNames={{\r\n                            booked: \"font-bold text-blue-700 dark:text-blue-400 relative after:absolute after:bottom-1 after:left-1/2 after:-translate-x-1/2 after:w-1.5 after:h-1.5 after:bg-blue-600 dark:after:bg-blue-400 after:rounded-full\",\r\n                            today: \"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold\"\r\n                        }}\r\n                        classNames={{\r\n                            months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n                            month: \"space-y-4\",\r\n                            caption: \"flex justify-center pt-1 relative items-center\",\r\n                            caption_label: \"text-sm font-medium\",\r\n                            nav: \"space-x-1 flex items-center\",\r\n                            nav_button: \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\",\r\n                            nav_button_previous: \"absolute left-1\",\r\n                            nav_button_next: \"absolute right-1\",\r\n                            table: \"w-full border-collapse space-y-1\",\r\n                            head_row: \"flex\",\r\n                            head_cell: \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\r\n                            row: \"flex w-full mt-2\",\r\n                            cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\r\n                            day: \"h-9 w-9 p-0 font-normal aria-selected:opacity-100 hover:bg-accent hover:text-accent-foreground\",\r\n                            day_selected: \"bg-gradient-to-br from-blue-600 to-blue-700 text-white hover:bg-gradient-to-br hover:from-blue-700 hover:to-blue-800 focus:bg-gradient-to-br focus:from-blue-600 focus:to-blue-700\",\r\n                            day_today: \"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold\",\r\n                            day_outside: \"text-muted-foreground opacity-50\",\r\n                            day_disabled: \"text-muted-foreground opacity-50\",\r\n                            day_range_middle: \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n                            day_hidden: \"invisible\",\r\n                        }}\r\n                    />\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Quick Stats del D├¡a Seleccionado */}\r\n            <Card className=\"p-4 bg-muted/30 border-none\">\r\n                <h4 className=\"text-sm font-semibold mb-3 text-muted-foreground uppercase\">Resumen del D├¡a</h4>\r\n                <div className=\"space-y-2\">\r\n                    <div className=\"flex justify-between text-sm\">\r\n                        <span>Total Citas</span>\r\n                        <span className=\"font-bold\">{filteredAppointments.length}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm\">\r\n                        <span>Confirmadas</span>\r\n                        <span className=\"font-bold text-emerald-600\">\r\n                            {filteredAppointments.filter(a => a.status === 'CONFIRMED').length}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n\r\n        {/* RIGHT SIDE: APPOINTMENT LIST / TIMELINE */}\r\n        <div className=\"lg:col-span-8 xl:col-span-9 flex flex-col h-full\">\r\n            \r\n            {/* Search Bar */}\r\n            <div className=\"relative mb-4\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                <Input \r\n                    placeholder=\"Buscar paciente, doctor o notas...\" \r\n                    className=\"pl-10 h-12 text-lg bg-background border-none shadow-sm\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n            </div>\r\n\r\n            {/* Content Container */}\r\n            <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar\">\r\n                {loading ? (\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        {[1,2,3].map(i => <div key={i} className=\"h-24 bg-muted/20 animate-pulse rounded-xl\" />)}\r\n                    </div>\r\n                ) : filteredAppointments.length === 0 ? (\r\n                    <div className=\"h-full flex flex-col items-center justify-center text-muted-foreground opacity-50\">\r\n                        <CalendarIcon className=\"w-16 h-16 mb-4\" />\r\n                        <p className=\"text-xl font-medium\">No hay citas para este d├¡a</p>\r\n                        <p>Selecciona otra fecha o crea una nueva cita.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-3\">\r\n                        <AnimatePresence>\r\n                            {filteredAppointments.map((apt) => {\r\n                                const status = statusConfig[apt.status] || statusConfig.SCHEDULED;\r\n                                const type = typeConfig[apt.appointmentType] || typeConfig.CONSULTATION;\r\n                                const time = format(parseISO(apt.scheduledDate), 'HH:mm');\r\n                                \r\n                                return (\r\n                                    <motion.div\r\n                                        key={apt.id}\r\n                                        initial={{ opacity: 0, y: 10 }}\r\n                                        animate={{ opacity: 1, y: 0 }}\r\n                                        exit={{ opacity: 0, height: 0 }}\r\n                                        layout\r\n                                    >\r\n                                        <Card \r\n                                            className=\"group hover:shadow-md transition-all border-l-4 cursor-pointer overflow-hidden\"\r\n                                            style={{ borderLeftColor: type.color.replace('bg-', '') }} // Hack r├ípido, idealmente usar variable CSS\r\n                                            onClick={() => { setSelectedAppointment(apt); setIsDetailsOpen(true); }}\r\n                                        >\r\n                                            <div className=\"p-4 flex items-center gap-4\">\r\n                                                {/* Time Column */}\r\n                                                <div className=\"flex flex-col items-center justify-center min-w-[60px] border-r pr-4\">\r\n                                                    <span className=\"text-lg font-bold text-foreground\">{time}</span>\r\n                                                    <span className=\"text-xs text-muted-foreground\">{apt.durationMinutes} min</span>\r\n                                                </div>\r\n\r\n                                                {/* Info Column */}\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"flex justify-between items-start mb-1\">\r\n                                                        <h3 className=\"font-bold text-lg truncate flex items-center gap-2\">\r\n                                                            {apt.patientName}\r\n                                                            <Badge variant=\"outline\" className=\"text-[10px] font-normal h-5\">\r\n                                                                {type.label}\r\n                                                            </Badge>\r\n                                                        </h3>\r\n                                                        <Badge variant=\"secondary\" className={`${status.style} border-0`}>\r\n                                                            {status.label}\r\n                                                        </Badge>\r\n                                                    </div>\r\n                                                    \r\n                                                    <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\r\n                                                        <span className=\"flex items-center gap-1\">\r\n                                                            <User className=\"w-3 h-3\" /> {apt.ownerName}\r\n                                                        </span>\r\n                                                        <span className=\"flex items-center gap-1\">\r\n                                                            <Clock className=\"w-3 h-3\" /> Dr. {apt.veterinarianName}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    \r\n                                                    {apt.reason && (\r\n                                                        <p className=\"text-xs text-muted-foreground mt-2 italic truncate\">\r\n                                                            \"{apt.reason}\"\r\n                                                        </p>\r\n                                                    )}\r\n                                                </div>\r\n\r\n                                                {/* Action Arrow */}\r\n                                                <div className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                    <Button variant=\"ghost\" size=\"icon\">\r\n                                                        <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </Card>\r\n                                    </motion.div>\r\n                                );\r\n                            })}\r\n                        </AnimatePresence>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* DETAILS DIALOG */}\r\n      {selectedAppointment && (\r\n        <AppointmentDetailsDialog\r\n          appointment={selectedAppointment}\r\n          open={isDetailsOpen}\r\n          onOpenChange={setIsDetailsOpen}\r\n          onEdit={() => setIsDetailsOpen(false)}\r\n          onCancel={() => handleCancel(selectedAppointment.id)}\r\n          onDelete={() => handleDelete(selectedAppointment.id)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[853,856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[853,856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2039,2042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2039,2042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadDashboardData'. Either include it or remove the dependency array.","line":65,"column":6,"nodeType":"ArrayExpression","endLine":65,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadDashboardData]","fix":{"range":[3038,3040],"text":"[loadDashboardData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3931,3934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3931,3934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16128,16131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16128,16131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":350,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18128,18131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18128,18131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Calendar, Users, PawPrint, AlertCircle, TrendingUp, \r\n  Clock, DollarSign, Activity, ArrowUpRight, Plus, \r\n  Search, Bell, MoreHorizontal, CheckCircle2\r\n} from 'lucide-react';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { dashboardService, appointmentService } from '@/services';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion } from 'framer-motion';\r\nimport { format } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\n\r\n// Configuraci├│n de Estilos de Estado (Modernizados)\r\nconst statusConfig: Record<string, { label: string; style: string; icon: any }> = {\r\n  SCHEDULED: { label: 'Programada', style: 'bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300', icon: Calendar },\r\n  CONFIRMED: { label: 'Confirmada', style: 'bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300', icon: CheckCircle2 },\r\n  IN_PROGRESS: { label: 'En Curso', style: 'bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300', icon: Clock },\r\n  COMPLETED: { label: 'Finalizada', style: 'bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300', icon: CheckCircle2 },\r\n  CANCELLED: { label: 'Cancelada', style: 'bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/30 dark:text-rose-300', icon: AlertCircle },\r\n};\r\n\r\nexport default function Dashboard() {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(true);\r\n  const [stats, setStats] = useState({\r\n    totalPatients: 0,\r\n    totalOwners: 0,\r\n    todayAppointments: 0,\r\n    lowStockItems: 0,\r\n    monthlyRevenue: 0,\r\n    activeUsers: 0,\r\n  });\r\n  const [recentAppointments, setRecentAppointments] = useState<any[]>([]);\r\n  const [greeting, setGreeting] = useState('');\r\n\r\n  // L├│gica de Saludo\r\n  useEffect(() => {\r\n    const hour = new Date().getHours();\r\n    if (hour < 12) setGreeting('Buenos d├¡as');\r\n    else if (hour < 18) setGreeting('Buenas tardes');\r\n    else setGreeting('Buenas noches');\r\n  }, []);\r\n\r\n  // L├│gica de Carga de Datos (Mantenida intacta pero optimizada)\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n    const interval = setInterval(loadDashboardData, 30000);\r\n    \r\n    const handleEvents = () => loadDashboardData();\r\n    window.addEventListener('focus', handleEvents);\r\n    window.addEventListener('appointment_created', handleEvents);\r\n    window.addEventListener('appointment_updated', handleEvents);\r\n    \r\n    return () => {\r\n      clearInterval(interval);\r\n      window.removeEventListener('focus', handleEvents);\r\n      window.removeEventListener('appointment_created', handleEvents);\r\n      window.removeEventListener('appointment_updated', handleEvents);\r\n    };\r\n  }, []);\r\n\r\n  const loadDashboardData = async () => {\r\n    try {\r\n      // Optimizamos para que la UI no parpadee si ya hay datos\r\n      if(!stats.totalPatients) setLoading(true);\r\n      \r\n      const dashboardStats = await dashboardService.getStats();\r\n      setStats({\r\n        totalPatients: Number(dashboardStats.totalPatients) || 0,\r\n        totalOwners: Number(dashboardStats.totalOwners) || 0,\r\n        todayAppointments: Number(dashboardStats.todayAppointments) || 0,\r\n        lowStockItems: Number(dashboardStats.lowStockItems) || 0,\r\n        monthlyRevenue: Number(dashboardStats.monthlyRevenue) || 0,\r\n        activeUsers: Number(dashboardStats.activeUsers) || 0,\r\n      });\r\n\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const appointments = await appointmentService.getByDate(today);\r\n      setRecentAppointments(appointments.slice(0, 5));\r\n    } catch (error: any) {\r\n      console.error('Dashboard sync error', error);\r\n      if (!recentAppointments.length) { // Solo mostrar error si no hay datos previos\r\n          toast({ title: 'Error de sincronizaci├│n', description: 'Reintentando conexi├│n...', variant: 'destructive' });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Animaciones Framer Motion\r\n  const containerVariants = {\r\n    hidden: { opacity: 0 },\r\n    visible: { opacity: 1, transition: { staggerChildren: 0.1 } }\r\n  };\r\n  \r\n  const itemVariants = {\r\n    hidden: { y: 20, opacity: 0 },\r\n    visible: { y: 0, opacity: 1 }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 p-1 pb-10\">\r\n      \r\n      {/* --- HEADER CONTEXTUAL --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            {greeting}, {user?.fullName?.split(' ')[0]} <span className=\"text-2xl\">≡ƒæï</span>\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1 flex items-center gap-2\">\r\n            <span className=\"inline-block w-2 h-2 rounded-full bg-emerald-500 animate-pulse\"></span>\r\n            Sistema operativo y sincronizado\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <Button variant=\"outline\" size=\"sm\" className=\"hidden sm:flex\">\r\n                <Bell className=\"w-4 h-4 mr-2\" /> Notificaciones\r\n            </Button>\r\n            <Button size=\"sm\" className=\"shadow-lg shadow-primary/20\">\r\n                <Plus className=\"w-4 h-4 mr-2\" /> Nueva Consulta\r\n            </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading && stats.totalPatients === 0 ? (\r\n        <div className=\"flex h-[400px] items-center justify-center\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n        </div>\r\n      ) : (\r\n        <motion.div \r\n            variants={containerVariants}\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            className=\"space-y-8\"\r\n        >\r\n          {/* --- KPI CARDS (BENTO STYLE) --- */}\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n            <StatCard \r\n                title=\"Citas Hoy\"\r\n                value={stats.todayAppointments}\r\n                icon={<Calendar className=\"h-4 w-4 text-blue-600\" />}\r\n                trend=\"+12% vs ayer\"\r\n                color=\"bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-800\"\r\n            />\r\n            <StatCard \r\n                title=\"Pacientes Activos\"\r\n                value={stats.totalPatients}\r\n                icon={<PawPrint className=\"h-4 w-4 text-violet-600\" />}\r\n                trend=\"Total registrados\"\r\n                color=\"bg-violet-50 dark:bg-violet-900/20 border-violet-100 dark:border-violet-800\"\r\n            />\r\n            <StatCard \r\n                title=\"Ingresos Mes\"\r\n                value={stats.monthlyRevenue}\r\n                prefix=\"$\"\r\n                icon={<DollarSign className=\"h-4 w-4 text-emerald-600\" />}\r\n                trend=\"+8.2% proyecci├│n\"\r\n                color=\"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800\"\r\n            />\r\n            <StatCard \r\n                title=\"Alertas Stock\"\r\n                value={stats.lowStockItems}\r\n                icon={<AlertCircle className=\"h-4 w-4 text-rose-600\" />}\r\n                trend=\"Requiere atenci├│n\"\r\n                isAlert={stats.lowStockItems > 0}\r\n                color=\"bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-800\"\r\n            />\r\n          </div>\r\n\r\n          {/* --- MAIN DASHBOARD GRID --- */}\r\n          <div className=\"grid gap-4 md:grid-cols-7 lg:grid-cols-7\">\r\n            \r\n            {/* LEFT: TIMELINE DE CITAS (4 columnas) */}\r\n            <motion.div variants={itemVariants} className=\"md:col-span-4 rounded-3xl border bg-card text-card-foreground shadow-sm overflow-hidden\">\r\n                <div className=\"p-6 flex flex-row items-center justify-between border-b bg-muted/20\">\r\n                    <div className=\"space-y-1\">\r\n                        <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                            <Clock className=\"w-5 h-5 text-muted-foreground\" /> \r\n                            Agenda del D├¡a\r\n                        </CardTitle>\r\n                        <CardDescription>\r\n                            {format(new Date(), \"EEEE, d 'de' MMMM\", { locale: es })}\r\n                        </CardDescription>\r\n                    </div>\r\n                    <Badge variant=\"outline\" className=\"bg-background\">\r\n                        {recentAppointments.length} Citas\r\n                    </Badge>\r\n                </div>\r\n                \r\n                <div className=\"p-6\">\r\n                    {recentAppointments.length === 0 ? (\r\n                        <EmptyState \r\n                            icon={<Calendar className=\"w-10 h-10 text-muted-foreground/50\" />}\r\n                            title=\"Agenda Libre\"\r\n                            desc=\"No hay citas programadas para el resto del d├¡a.\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"space-y-8 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-muted-foreground/20 before:to-transparent\">\r\n                            {recentAppointments.map((apt, index) => {\r\n                                const status = statusConfig[apt.status] || statusConfig.SCHEDULED;\r\n                                return (\r\n                                    <div key={apt.id} className=\"relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group\">\r\n                                        \r\n                                        {/* Dot on Timeline */}\r\n                                        <div className=\"absolute left-0 md:left-1/2 w-10 h-10 -ml-5 md:-ml-5 flex items-center justify-center rounded-full bg-card border-4 border-background shadow-sm z-10 group-hover:scale-110 transition-transform\">\r\n                                            <status.icon className={`w-4 h-4 ${status.style.split(' ')[1]}`} />\r\n                                        </div>\r\n\r\n                                        {/* Content Card */}\r\n                                        <Card className=\"w-[calc(100%-3rem)] md:w-[calc(50%-2.5rem)] p-4 hover:shadow-md transition-shadow border-l-4\" style={{ borderLeftColor: 'currentColor' }}>\r\n                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                <span className=\"font-mono text-sm font-bold text-muted-foreground bg-muted/30 px-2 py-0.5 rounded\">\r\n                                                    {format(new Date(apt.scheduledDate), 'HH:mm', { locale: es })}\r\n                                                </span>\r\n                                                <Badge variant=\"outline\" className={`text-[10px] px-1.5 py-0 h-5 border-0 ${status.style}`}>\r\n                                                    {status.label}\r\n                                                </Badge>\r\n                                            </div>\r\n                                            <h4 className=\"font-bold text-foreground truncate\">{apt.patientName || 'Sin nombre'}</h4>\r\n                                            <p className=\"text-xs text-muted-foreground mb-3 truncate\">{apt.ownerName || 'Sin propietario'}</p>\r\n                                            {apt.reason && (\r\n                                                <p className=\"text-xs text-muted-foreground mb-2 line-clamp-1\">{apt.reason}</p>\r\n                                            )}\r\n                                            <div className=\"flex items-center text-xs text-muted-foreground gap-2\">\r\n                                                <div className=\"w-full bg-muted rounded-full h-1.5 overflow-hidden\">\r\n                                                    <div className=\"bg-primary h-full rounded-full w-full opacity-50\"></div>\r\n                                                </div>\r\n                                                <span className=\"text-[10px] whitespace-nowrap\">{apt.durationMinutes || 30} min</span>\r\n                                            </div>\r\n                                        </Card>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* RIGHT: ANALYTICS & QUICK ACTIONS (3 columnas) */}\r\n            <div className=\"md:col-span-3 space-y-4\">\r\n                \r\n                {/* Analytics Chart Simulation */}\r\n                <motion.div variants={itemVariants}>\r\n                    <Card className=\"overflow-hidden\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                                <Activity className=\"w-5 h-5 text-muted-foreground\" />\r\n                                Rendimiento Mensual\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-5\">\r\n                                <ChartBar label=\"Consultas\" count={124} max={150} color=\"bg-blue-500\" />\r\n                                <ChartBar label=\"Vacunaciones\" count={89} max={150} color=\"bg-violet-500\" />\r\n                                <ChartBar label=\"Cirug├¡as\" count={32} max={150} color=\"bg-rose-500\" />\r\n                                <ChartBar label=\"Emergencias\" count={18} max={150} color=\"bg-amber-500\" />\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </motion.div>\r\n\r\n                {/* Team / Users */}\r\n                <motion.div variants={itemVariants}>\r\n                    <Card>\r\n                        <CardHeader className=\"pb-3\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <CardTitle className=\"text-sm font-medium text-muted-foreground\">Equipo Activo</CardTitle>\r\n                                <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div className=\"text-2xl font-bold\">{stats.activeUsers}</div>\r\n                                <div className=\"flex -space-x-2\">\r\n                                    {[1,2,3].map(i => (\r\n                                        <div key={i} className=\"w-8 h-8 rounded-full border-2 border-background bg-muted flex items-center justify-center text-xs text-muted-foreground font-medium\">\r\n                                            {String.fromCharCode(64 + i)}\r\n                                        </div>\r\n                                    ))}\r\n                                    {stats.activeUsers > 3 && (\r\n                                        <div className=\"w-8 h-8 rounded-full border-2 border-background bg-primary text-primary-foreground flex items-center justify-center text-xs font-medium\">\r\n                                            +{stats.activeUsers - 3}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </motion.div>\r\n            </div>\r\n\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- SUBCOMPONENTES ESTILIZADOS ---\r\n\r\nfunction StatCard({ title, value, prefix = \"\", icon, trend, color, isAlert }: any) {\r\n    return (\r\n        <Card className={`overflow-hidden transition-all hover:shadow-lg border-l-4 ${color.replace('bg-', 'border-l-').split(' ')[0]}`}>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                    {title}\r\n                </CardTitle>\r\n                <div className={`p-2 rounded-lg ${color}`}>\r\n                    {icon}\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className={`text-2xl font-bold ${isAlert ? 'text-rose-600 animate-pulse' : ''}`}>\r\n                    {prefix}{value}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1 flex items-center gap-1\">\r\n                    {isAlert ? <AlertCircle className=\"w-3 h-3\" /> : <TrendingUp className=\"w-3 h-3\" />}\r\n                    {trend}\r\n                </p>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction ChartBar({ label, count, max, color }: { label: string, count: number, max: number, color: string }) {\r\n    const percentage = Math.round((count / max) * 100);\r\n    return (\r\n        <div className=\"space-y-1 group\">\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-muted-foreground font-medium group-hover:text-foreground transition-colors\">{label}</span>\r\n                <span className=\"font-bold\">{count}</span>\r\n            </div>\r\n            <div className=\"h-2.5 rounded-full bg-muted overflow-hidden\">\r\n                <motion.div \r\n                    initial={{ width: 0 }}\r\n                    animate={{ width: `${percentage}%` }}\r\n                    transition={{ duration: 1, ease: \"easeOut\" }}\r\n                    className={`h-full rounded-full ${color}`} \r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction EmptyState({ icon, title, desc }: any) {\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-xl bg-muted/20\">\r\n            <div className=\"bg-background p-3 rounded-full mb-3 shadow-sm\">{icon}</div>\r\n            <h3 className=\"font-semibold text-foreground\">{title}</h3>\r\n            <p className=\"text-sm text-muted-foreground max-w-[200px]\">{desc}</p>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\ForgotPassword.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[957,960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[957,960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { PawPrint, Mail } from 'lucide-react';\r\nimport { authService } from '@/services/authService';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function ForgotPassword() {\r\n  const [email, setEmail] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [emailSent, setEmailSent] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await authService.forgotPassword(email);\r\n      setEmailSent(true);\r\n      toast.success('Email de recuperaci├│n enviado. Revisa tu bandeja de entrada.');\r\n    } catch (error: any) {\r\n      const errorMessage = error?.response?.data?.message || 'Error al enviar email de recuperaci├│n';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (emailSent) {\r\n    return (\r\n      <div className=\"flex min-h-screen items-center justify-center bg-background p-4\">\r\n        <Card className=\"w-full max-w-md\">\r\n          <CardHeader className=\"space-y-4 text-center\">\r\n            <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary\">\r\n              <Mail className=\"h-10 w-10 text-primary-foreground\" />\r\n            </div>\r\n            <div>\r\n              <CardTitle className=\"text-2xl font-bold\">Email Enviado</CardTitle>\r\n              <CardDescription>\r\n                Revisa tu bandeja de entrada para restablecer tu contrase├▒a\r\n              </CardDescription>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-center space-y-4\">\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Si el email existe en nuestro sistema, recibir├ís un enlace para restablecer tu contrase├▒a.\r\n              </p>\r\n              <Link to=\"/login\">\r\n                <Button variant=\"outline\" className=\"w-full\">\r\n                  Volver al Login\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-background p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-4 text-center\">\r\n          <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary\">\r\n            <PawPrint className=\"h-10 w-10 text-primary-foreground\" />\r\n          </div>\r\n          <div>\r\n            <CardTitle className=\"text-2xl font-bold\">Recuperar Contrase├▒a</CardTitle>\r\n            <CardDescription>Ingresa tu email para recibir un enlace de recuperaci├│n</CardDescription>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\">Email</Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"correo@ejemplo.com\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required\r\n              />\r\n            </div>\r\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\r\n              {isLoading ? 'Enviando...' : 'Enviar Email de Recuperaci├│n'}\r\n            </Button>\r\n          </form>\r\n          \r\n          <div className=\"mt-4 text-center text-sm\">\r\n            <Link to=\"/login\" className=\"text-primary hover:underline\">\r\n              Volver al Login\r\n            </Link>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2594,2597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2594,2597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":268,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15522,15525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15522,15525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":325,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":325,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18591,18594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18591,18594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":359,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":359,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20136,20139],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20136,20139],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":401,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":401,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22422,22425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22422,22425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { \r\n    PawPrint, ArrowRight, CheckCircle2, BarChart3, \r\n    Stethoscope, Zap, CalendarCheck, Users, Activity,\r\n    MousePointer2, Search, Bell, Check\r\n} from 'lucide-react';\r\nimport { \r\n    motion, \r\n    useScroll, \r\n    useTransform, \r\n    useInView, \r\n    animate \r\n} from 'framer-motion';\r\nimport { cn } from '@/lib/utils';\r\n\r\n// --- MAIN COMPONENT ---\r\n\r\nconst Index = () => {\r\n  const navigate = useNavigate();\r\n  const { user, isLoading } = useAuth();\r\n  const [scrolled, setScrolled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && user) navigate('/dashboard');\r\n    const handleScroll = () => setScrolled(window.scrollY > 20);\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [user, isLoading, navigate]);\r\n\r\n  if (isLoading) return <LoadingScreen />;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-foreground overflow-x-hidden selection:bg-indigo-500/30 font-sans\">\r\n      <Navbar scrolled={scrolled} navigate={navigate} />\r\n      <main>\r\n        <HeroSection navigate={navigate} />\r\n        <StatsSection />\r\n        <FeaturesSection />\r\n        <CTASection navigate={navigate} />\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- HELPER: COUNT UP ANIMATION ---\r\nconst CountUp = ({ to, suffix = \"\", prefix = \"\" }: { to: number, suffix?: string, prefix?: string }) => {\r\n    const nodeRef = useRef<HTMLSpanElement>(null);\r\n    const inView = useInView(nodeRef, { once: true, margin: \"-100px\" });\r\n    \r\n    useEffect(() => {\r\n        if (!inView) return;\r\n        const node = nodeRef.current;\r\n        if (!node) return;\r\n\r\n        const controls = animate(0, to, {\r\n            duration: 2.5,\r\n            ease: \"easeOut\",\r\n            onUpdate(value) {\r\n                let formattedValue = \"\";\r\n                if (to % 1 !== 0) formattedValue = value.toFixed(1);\r\n                else formattedValue = Math.round(value).toLocaleString('en-US');\r\n                node.textContent = `${prefix}${formattedValue}${suffix}`;\r\n            }\r\n        });\r\n        return () => controls.stop();\r\n    }, [to, inView, suffix, prefix]);\r\n\r\n    return <span ref={nodeRef} className=\"tabular-nums\" />;\r\n};\r\n\r\n// --- 1. HERO SECTION (CENTRADA + 3D) ---\r\nconst HeroSection = ({ navigate }: { navigate: any }) => {\r\n    const { scrollY } = useScroll();\r\n    \r\n    // Animaciones de fondo\r\n    const y1 = useTransform(scrollY, [0, 500], [0, 200]);\r\n    const y2 = useTransform(scrollY, [0, 500], [0, -150]);\r\n    \r\n    // Efecto 3D Dashboard\r\n    const rotateX = useTransform(scrollY, [0, 400], [20, 0]); \r\n    const scale = useTransform(scrollY, [0, 400], [0.9, 1]);\r\n    const opacity = useTransform(scrollY, [0, 200], [1, 1]);\r\n\r\n    return (\r\n        <section className=\"relative pt-32 pb-32 lg:pt-48 overflow-hidden min-h-screen flex flex-col items-center\">\r\n            {/* Background Orbs */}\r\n            <motion.div style={{ y: y1 }} className=\"absolute top-0 left-1/4 w-[600px] h-[600px] bg-indigo-500/20 rounded-full blur-[120px] -z-10 opacity-60\" />\r\n            <motion.div style={{ y: y2 }} className=\"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-purple-500/20 rounded-full blur-[100px] -z-10 opacity-60\" />\r\n            \r\n            <div className=\"container mx-auto px-4 text-center z-10 flex flex-col items-center\">\r\n                \r\n                {/* Text Content */}\r\n                <motion.div \r\n                    initial={{ opacity: 0, y: 30 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n                    className=\"max-w-4xl mx-auto flex flex-col items-center\"\r\n                >\r\n                    <Badge variant=\"outline\" className=\"mb-8 px-4 py-1.5 text-sm border-indigo-200 bg-white/50 text-indigo-700 dark:bg-indigo-950/30 dark:text-indigo-300 dark:border-indigo-800 backdrop-blur-md shadow-sm\">\r\n                        Γ£¿ Innovaci├│n Veterinaria 2025\r\n                    </Badge>\r\n                    \r\n                    <motion.h1 \r\n                        className=\"text-6xl md:text-8xl font-extrabold tracking-tight mb-8 leading-[1.1] text-center\"\r\n                    >\r\n                        <motion.span\r\n                            className=\"block\"\r\n                            initial={{ opacity: 0, y: -30, rotateX: -90 }}\r\n                            animate={{ opacity: 1, y: 0, rotateX: 0 }}\r\n                            transition={{ \r\n                                duration: 0.8, \r\n                                delay: 0.2, \r\n                                ease: [0.16, 1, 0.3, 1]\r\n                            }}\r\n                        >\r\n                            El Futuro de tu\r\n                        </motion.span>\r\n                        <motion.span \r\n                            className=\"block mt-2 bg-gradient-to-r from-indigo-600 via-violet-600 to-fuchsia-600 bg-clip-text text-transparent\"\r\n                            initial={{ opacity: 0, scale: 0.5, y: 50, rotateY: 90 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0, rotateY: 0 }}\r\n                            transition={{ \r\n                                duration: 1.2, \r\n                                delay: 0.5, \r\n                                ease: [0.16, 1, 0.3, 1],\r\n                                type: \"spring\",\r\n                                stiffness: 80,\r\n                                damping: 15\r\n                            }}\r\n                        >\r\n                            Clinica Veterinaria\r\n                        </motion.span>\r\n                    </motion.h1>\r\n                    \r\n                    <p className=\"max-w-2xl mx-auto text-xl text-muted-foreground mb-12 leading-relaxed text-center\">\r\n                        La plataforma integral que transforma tu cl├¡nica. Pacientes, citas e inventario en perfecta sincron├¡a.\r\n                    </p>\r\n                    \r\n                    <div className=\"flex flex-col sm:flex-row items-center justify-center gap-6 mb-24 w-full\">\r\n                        <Button size=\"lg\" className=\"h-14 px-10 text-lg rounded-full bg-indigo-600 hover:bg-indigo-700 shadow-xl shadow-indigo-500/30 hover:scale-105 transition-transform w-full sm:w-auto\" onClick={() => navigate('/login')}>\r\n                            <Zap className=\"mr-2 h-5 w-5 fill-current\" /> Comenzar Ahora\r\n                        </Button>\r\n                        <Button size=\"lg\" variant=\"outline\" className=\"h-14 px-10 text-lg rounded-full border-2 bg-background/50 backdrop-blur hover:bg-muted/50 w-full sm:w-auto\">\r\n                            Ver Demo\r\n                        </Button>\r\n                    </div>\r\n                </motion.div>\r\n\r\n                {/* 3D Dashboard Mockup - PERFECTAMENTE CENTRADO */}\r\n                <div className=\"w-full max-w-6xl mx-auto perspective-container h-[500px] md:h-[700px] relative\">\r\n                    <motion.div \r\n                        style={{ rotateX, scale, opacity }}\r\n                        className=\"w-full h-full\"\r\n                    >\r\n                        <div className=\"relative w-full h-full rounded-2xl border border-white/20 bg-background/60 backdrop-blur-xl shadow-[0_0_50px_-12px_rgba(79,70,229,0.3)] overflow-hidden ring-1 ring-white/10\">\r\n                            \r\n                            {/* Browser Header */}\r\n                            <div className=\"h-12 border-b border-white/10 bg-muted/40 flex items-center px-6 gap-4 sticky top-0 z-20 backdrop-blur-md\">\r\n                                <div className=\"flex gap-2\">\r\n                                    <div className=\"w-3 h-3 rounded-full bg-red-400/80 shadow-sm\" />\r\n                                    <div className=\"w-3 h-3 rounded-full bg-yellow-400/80 shadow-sm\" />\r\n                                    <div className=\"w-3 h-3 rounded-full bg-green-400/80 shadow-sm\" />\r\n                                </div>\r\n                                <div className=\"flex-1 max-w-2xl h-8 bg-white/5 rounded-lg mx-auto border border-white/5 flex items-center justify-center text-xs text-muted-foreground font-mono\">\r\n                                    vetclinic-pro.app/dashboard\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            {/* Dashboard UI Mockup */}\r\n                            <div className=\"p-8 grid grid-cols-12 gap-6 h-full bg-gradient-to-b from-background/50 to-indigo-950/5\">\r\n                                {/* Sidebar Fake */}\r\n                                <div className=\"col-span-2 hidden lg:flex flex-col gap-4 pr-4 border-r border-dashed border-indigo-200/20\">\r\n                                    {[1,2,3,4,5,6].map(i => (\r\n                                        <div key={i} className=\"h-10 w-full rounded-lg bg-indigo-500/5 animate-pulse\" style={{ animationDelay: `${i * 150}ms` }} />\r\n                                    ))}\r\n                                </div>\r\n                                \r\n                                {/* Main Area */}\r\n                                <div className=\"col-span-12 lg:col-span-10 grid grid-cols-3 gap-6\">\r\n                                    <div className=\"col-span-3 lg:col-span-2 h-48 rounded-2xl bg-gradient-to-br from-indigo-600 to-violet-600 p-8 text-white flex justify-between items-center shadow-lg relative overflow-hidden group\">\r\n                                        <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10\" />\r\n                                        <div className=\"relative z-10 space-y-4\">\r\n                                            <div className=\"h-8 w-48 bg-white/20 rounded-lg backdrop-blur-sm\" />\r\n                                            <div className=\"h-12 w-32 bg-white/30 rounded-lg backdrop-blur-sm\" />\r\n                                        </div>\r\n                                        <Activity className=\"h-32 w-32 text-white/10 absolute -right-4 -bottom-4 group-hover:scale-110 transition-transform duration-500\" />\r\n                                    </div>\r\n\r\n                                    <div className=\"col-span-3 lg:col-span-1 h-48 rounded-2xl border bg-card/40 p-6 flex flex-col justify-between\">\r\n                                        <div className=\"flex justify-between items-center\">\r\n                                            <div className=\"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center text-green-600\">\r\n                                                <ArrowRight className=\"h-5 w-5 -rotate-45\" />\r\n                                            </div>\r\n                                            <Badge variant=\"secondary\" className=\"bg-green-100 text-green-700 hover:bg-green-100\">+24%</Badge>\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <div className=\"h-4 w-20 bg-muted rounded\" />\r\n                                            <div className=\"h-8 w-32 bg-muted rounded\" />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"col-span-3 h-64 rounded-2xl border bg-card/40 p-6 relative overflow-hidden\">\r\n                                        <div className=\"absolute inset-0 bg-grid-slate-200/20 [mask-image:linear-gradient(0deg,white,transparent)] dark:[mask-image:linear-gradient(0deg,white,transparent)]\" />\r\n                                        <div className=\"flex items-end justify-between h-full gap-4 pb-4 px-4\">\r\n                                            {[40, 70, 50, 90, 60, 80, 50].map((h, i) => (\r\n                                                <motion.div \r\n                                                    key={i}\r\n                                                    initial={{ height: 0 }}\r\n                                                    whileInView={{ height: `${h}%` }}\r\n                                                    viewport={{ once: true }}\r\n                                                    transition={{ duration: 1, delay: i * 0.1, ease: \"backOut\" }}\r\n                                                    className=\"w-full bg-indigo-500/20 rounded-t-lg border-t border-x border-indigo-500/30 hover:bg-indigo-500/40 transition-colors\"\r\n                                                />\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Floating Notification */}\r\n                            <motion.div \r\n                                animate={{ y: [0, -15, 0] }}\r\n                                transition={{ duration: 5, repeat: Infinity, ease: \"easeInOut\" }}\r\n                                className=\"absolute bottom-12 left-12 bg-white dark:bg-zinc-800 p-4 pr-8 rounded-2xl shadow-2xl border border-white/20 flex items-center gap-4 z-30 max-w-xs\"\r\n                            >\r\n                                <div className=\"relative\">\r\n                                    <div className=\"bg-green-500 rounded-full p-3 text-white\">\r\n                                        <CheckCircle2 className=\"w-6 h-6\" />\r\n                                    </div>\r\n                                    <span className=\"absolute top-0 right-0 w-3 h-3 bg-red-500 border-2 border-white rounded-full\"></span>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs font-bold text-muted-foreground uppercase tracking-wide\">Actualizaci├│n</p>\r\n                                    <p className=\"font-bold text-sm text-foreground\">Cita Confirmada</p>\r\n                                </div>\r\n                            </motion.div>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n            </div>\r\n            <style>{`.perspective-container { perspective: 2000px; }`}</style>\r\n        </section>\r\n    );\r\n};\r\n\r\n// --- 2. STATS SECTION (CON COUNT UP) ---\r\nconst StatsSection = () => {\r\n    return (\r\n        <section className=\"py-24 bg-muted/20 border-y border-border/50 relative overflow-hidden\">\r\n            <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.03]\" />\r\n            <div className=\"container mx-auto px-4 relative z-10\">\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-12 divide-x divide-border/0 md:divide-border/40\">\r\n                    <StatItem to={2500} suffix=\"+\" label=\"Cl├¡nicas Activas\" />\r\n                    <StatItem to={1.2} suffix=\"M\" label=\"Pacientes Gestionados\" />\r\n                    <StatItem to={99.9} suffix=\"%\" label=\"Uptime Servidor\" />\r\n                    <StatItem to={24} suffix=\"/7\" label=\"Soporte Dedicado\" />\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nconst StatItem = ({ to, suffix, label }: any) => (\r\n    <div className=\"text-center group\">\r\n        <h3 className=\"text-5xl md:text-6xl font-extrabold bg-gradient-to-b from-foreground to-foreground/40 bg-clip-text text-transparent mb-2\">\r\n            <CountUp to={to} suffix={suffix} />\r\n        </h3>\r\n        <p className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest\">{label}</p>\r\n    </div>\r\n);\r\n\r\n// --- 3. FEATURES SECTION (RESTAURADA: DISE├æO BENTO GRID) ---\r\nconst FeaturesSection = () => {\r\n  return (\r\n      <section className=\"py-32 container mx-auto px-4 relative\">\r\n          <div className=\"text-center max-w-3xl mx-auto mb-20\">\r\n              <Badge className=\"mb-4 bg-indigo-100 text-indigo-700 hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-400 border-none\">\r\n                  Potencia Total\r\n              </Badge>\r\n              <h2 className=\"text-4xl md:text-6xl font-bold mb-6\">Todo lo que necesitas. <br/><span className=\"text-muted-foreground\">Y nada que no.</span></h2>\r\n              <p className=\"text-xl text-muted-foreground\">Hemos destilado a├▒os de experiencia veterinaria en una interfaz que se siente m├ígica.</p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n              <FeatureCard \r\n                  className=\"md:col-span-2\"\r\n                  icon={<CalendarCheck className=\"w-10 h-10 text-white\" />}\r\n                  title=\"Agenda Inteligente con IA\"\r\n                  description=\"El sistema predice la duraci├│n de las citas bas├índose en el historial. Env├¡a recordatorios autom├íticos por WhatsApp para reducir el ausentismo en un 40%.\"\r\n                  gradient=\"from-blue-500 to-cyan-500\"\r\n                  delay={0}\r\n              />\r\n              <FeatureCard \r\n                  icon={<Users className=\"w-10 h-10 text-white\" />}\r\n                  title=\"Portal de Clientes\"\r\n                  description=\"Fideliza a los due├▒os permiti├⌐ndoles ver vacunas y reservar citas desde su m├│vil.\"\r\n                  gradient=\"from-purple-500 to-pink-500\"\r\n                  delay={0.2}\r\n              />\r\n              <FeatureCard \r\n                  icon={<Stethoscope className=\"w-10 h-10 text-white\" />}\r\n                  title=\"Historia Cl├¡nica 2.0\"\r\n                  description=\"Templates din├ímicos. Sube fotos, RX y laboratorios con arrastrar y soltar.\"\r\n                  gradient=\"from-orange-500 to-red-500\"\r\n                  delay={0.4}\r\n              />\r\n              <FeatureCard \r\n                  className=\"md:col-span-2\"\r\n                  icon={<BarChart3 className=\"w-10 h-10 text-white\" />}\r\n                  title=\"Anal├¡ticas Financieras\"\r\n                  description=\"Deja de adivinar. Visualiza ingresos, productos m├ís rentables y rendimiento por veterinario en tiempo real. Exporta a Excel con un clic.\"\r\n                  gradient=\"from-emerald-500 to-teal-500\"\r\n                  delay={0.6}\r\n              />\r\n          </div>\r\n      </section>\r\n  );\r\n};\r\n\r\nconst FeatureCard = ({ className, icon, title, description, gradient, delay }: any) => {\r\n  const ref = useRef(null);\r\n  const isInView = useInView(ref, { once: true, margin: \"-50px\" });\r\n\r\n  return (\r\n      <motion.div \r\n          ref={ref}\r\n          initial={{ opacity: 0, y: 50 }}\r\n          animate={isInView ? { opacity: 1, y: 0 } : {}}\r\n          transition={{ duration: 0.5, delay }}\r\n          whileHover={{ y: -10 }}\r\n          className={cn(\r\n              \"group relative overflow-hidden rounded-[2rem] border bg-background p-10 shadow-lg hover:shadow-2xl transition-all duration-300\",\r\n              className\r\n          )}\r\n      >\r\n          <div className={`absolute top-0 right-0 w-64 h-64 bg-gradient-to-br ${gradient} opacity-10 blur-[80px] group-hover:opacity-20 transition-opacity`} />\r\n          \r\n          <div className={`w-16 h-16 rounded-2xl bg-gradient-to-br ${gradient} flex items-center justify-center shadow-lg mb-8 group-hover:scale-110 transition-transform duration-300`}>\r\n              {icon}\r\n          </div>\r\n          \r\n          <h3 className=\"text-2xl font-bold mb-4\">{title}</h3>\r\n          <p className=\"text-muted-foreground text-lg leading-relaxed\">{description}</p>\r\n\r\n          <div className=\"absolute bottom-6 right-6 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-4 group-hover:translate-x-0 transition-transform duration-300\">\r\n              <ArrowRight className=\"w-6 h-6 text-foreground/50\" />\r\n          </div>\r\n      </motion.div>\r\n  );\r\n};\r\n\r\n\r\n// --- 4. CTA SECTION (RESTAURADA: DISE├æO ABSTRACTO) ---\r\nconst CTASection = ({ navigate }: { navigate: any }) => (\r\n    <section className=\"py-24 relative overflow-hidden\">\r\n        <div className=\"container mx-auto px-4\">\r\n            <motion.div \r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                whileInView={{ opacity: 1, scale: 1 }}\r\n                viewport={{ once: true }}\r\n                transition={{ duration: 0.5 }}\r\n                className=\"relative rounded-[3rem] bg-indigo-950 px-6 py-24 text-center shadow-2xl overflow-hidden\"\r\n            >\r\n                {/* Abstract Background Shapes (Restored) */}\r\n                <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden\">\r\n                    <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-indigo-500/30 rounded-full blur-[100px]\" />\r\n                    <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/30 rounded-full blur-[100px]\" />\r\n                </div>\r\n\r\n                <div className=\"relative z-10 max-w-4xl mx-auto space-y-8\">\r\n                    <h2 className=\"text-4xl md:text-6xl font-bold text-white tracking-tight\">\r\n                        ┬┐Listo para transformar tu cl├¡nica?\r\n                    </h2>\r\n                    <p className=\"text-indigo-200 text-xl max-w-2xl mx-auto\">\r\n                        ├Ünete a miles de veterinarios que ya han transformado su pr├íctica diaria.\r\n                        Sin tarjetas de cr├⌐dito. Sin compromisos.\r\n                    </p>\r\n                    <div className=\"flex flex-col sm:flex-row gap-4 justify-center pt-8\">\r\n                        <Button \r\n                            size=\"lg\" \r\n                            className=\"h-16 px-10 text-xl bg-white text-indigo-950 hover:bg-indigo-50 font-bold rounded-full shadow-xl hover:scale-105 transition-transform\"\r\n                            onClick={() => navigate('/login')}\r\n                        >\r\n                            Comenzar Prueba Gratuita\r\n                        </Button>\r\n                    </div>\r\n                    <p className=\"text-sm text-indigo-400/60 mt-8\">Proyecto Universitario de Excelencia 2025</p>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    </section>\r\n);\r\n\r\n// --- COMPONENTES AUXILIARES ---\r\n\r\nconst Navbar = ({ scrolled, navigate }: { scrolled: boolean, navigate: any }) => (\r\n    <motion.header \r\n        initial={{ y: -100 }}\r\n        animate={{ y: 0 }}\r\n        transition={{ type: \"spring\", stiffness: 100, damping: 20 }}\r\n        className={cn(\r\n            \"fixed top-0 w-full z-50 transition-all duration-300\",\r\n            scrolled ? \"bg-background/70 backdrop-blur-xl border-b shadow-sm py-3\" : \"bg-transparent py-6\"\r\n        )}\r\n    >\r\n        <div className=\"container mx-auto px-6 flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2 group cursor-pointer\">\r\n                <div className=\"relative flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-tr from-indigo-600 to-violet-600 shadow-lg shadow-indigo-500/25 group-hover:rotate-12 transition-transform duration-300\">\r\n                    <PawPrint className=\"h-6 w-6 text-white\" />\r\n                </div>\r\n                <h1 className=\"text-xl font-bold tracking-tight\">VetClinic<span className=\"text-indigo-600\">Pro</span></h1>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-4\">\r\n                <Button variant=\"ghost\" className=\"hidden sm:flex hover:bg-indigo-50 dark:hover:bg-indigo-950/50\" onClick={() => navigate('/login')}>\r\n                    Ingresar\r\n                </Button>\r\n                <Button \r\n                    onClick={() => navigate('/login')} \r\n                    className=\"bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 hover:shadow-indigo-500/50 transition-all scale-100 hover:scale-105 active:scale-95\"\r\n                >\r\n                    Empezar Gratis <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    </motion.header>\r\n);\r\n\r\nconst Footer = () => (\r\n    <footer className=\"border-t py-12 bg-background\">\r\n        <div className=\"container mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-6\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <div className=\"h-8 w-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white\">\r\n                    <PawPrint className=\"h-5 w-5\" />\r\n                </div>\r\n                <span className=\"font-bold text-xl tracking-tight\">VetClinic Pro</span>\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground\">┬⌐ 2025 Dise├▒ado con pasi├│n para la Universidad.</p>\r\n            <div className=\"flex gap-6\">\r\n                {['Github', 'Twitter', 'LinkedIn'].map((item) => (\r\n                    <a key={item} href=\"#\" className=\"text-sm font-medium text-muted-foreground hover:text-indigo-600 transition-colors\">\r\n                        {item}\r\n                    </a>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    </footer>\r\n);\r\n\r\nconst LoadingScreen = () => (\r\n    <div className=\"fixed inset-0 bg-background flex items-center justify-center z-50\">\r\n        <motion.div \r\n            animate={{ \r\n                scale: [1, 1.2, 1],\r\n                rotate: [0, 180, 360],\r\n            }}\r\n            transition={{ duration: 2, repeat: Infinity, ease: \"easeInOut\" }}\r\n            className=\"relative h-24 w-24 rounded-2xl bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center shadow-2xl\"\r\n        >\r\n            <PawPrint className=\"h-12 w-12 text-white\" />\r\n        </motion.div>\r\n    </div>\r\n);\r\n\r\nexport default Index;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\InformedConsents.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":49,"column":6,"nodeType":"ArrayExpression","endLine":49,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [page, activeTab, loadData]","fix":{"range":[2115,2132],"text":"[page, activeTab, loadData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, FileText, Eye, Edit, Trash2, \r\n  CheckCircle2, PenTool, ShieldCheck, AlertTriangle, \r\n  Clock, Calendar, UserCheck\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { InformedConsentFormDialog } from '@/components/informed-consents/InformedConsentFormDialog';\r\nimport { InformedConsentDetailsDialog } from '@/components/informed-consents/InformedConsentDetailsDialog';\r\nimport { informedConsentService, InformedConsent } from '@/services/informedConsentService';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { format } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// Configuraci├│n de traducci├│n de tipos de procedimientos\r\nconst procedureTypeLabels: Record<string, string> = {\r\n  SURGERY: 'Cirug├¡a',\r\n  ANESTHESIA: 'Anestesia',\r\n  VACCINATION: 'Vacunaci├│n',\r\n  DIAGNOSTIC: 'Diagn├│stico',\r\n  TREATMENT: 'Tratamiento',\r\n  OTHER: 'Otro',\r\n};\r\n\r\nconst getProcedureTypeLabel = (type: string | undefined): string => {\r\n  if (!type) return 'Sin especificar';\r\n  return procedureTypeLabels[type] || type;\r\n};\r\n\r\nexport default function InformedConsents() {\r\n  const [consents, setConsents] = useState<InformedConsent[]>([]);\r\n  const [pendingConsents, setPendingConsents] = useState<InformedConsent[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [selectedConsent, setSelectedConsent] = useState<InformedConsent | undefined>();\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(0);\r\n  const [activeTab, setActiveTab] = useState('all');\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [page, activeTab]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [allRes, pendingRes] = await Promise.all([\r\n          informedConsentService.getAll(page, 10),\r\n          informedConsentService.getPendingConsents()\r\n      ]);\r\n      setConsents(allRes.content || []);\r\n      setPendingConsents(pendingRes || []);\r\n    } catch (error) {\r\n      toast({ title: 'Error de sincronizaci├│n', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const displayedConsents = useMemo(() => {\r\n      const source = activeTab === 'all' ? consents : pendingConsents;\r\n      return source.filter((c) => \r\n        c.procedureType?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.patientName?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n  }, [consents, pendingConsents, activeTab, searchTerm]);\r\n\r\n  // --- ACTIONS ---\r\n  const handleSign = async (id: number) => {\r\n      try {\r\n          const signature = `Firmado digitalmente - ${new Date().toLocaleString('es-ES')}`;\r\n          await informedConsentService.signConsent(id, signature);\r\n          toast({ title: 'Documento Firmado', description: 'El consentimiento ha sido legalizado correctamente.' });\r\n          loadData();\r\n          setIsDetailsOpen(false);\r\n      } catch (error) {\r\n          toast({ title: 'Error al firmar', variant: 'destructive' });\r\n      }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n      try {\r\n          await informedConsentService.delete(id);\r\n          toast({ title: 'Eliminado', description: 'Documento eliminado del sistema.' });\r\n          loadData();\r\n          setIsDetailsOpen(false);\r\n      } catch (error) {\r\n          toast({ title: 'Error', variant: 'destructive' });\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Gesti├│n Legal <ShieldCheck className=\"h-6 w-6 text-primary\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Repositorio de consentimientos informados y autorizaciones.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <Button \r\n                onClick={() => setIsFormOpen(true)} \r\n                className=\"shadow-lg shadow-primary/20 hover:scale-105 transition-transform\"\r\n            >\r\n                <Plus className=\"mr-2 h-4 w-4\" /> Nuevo Documento\r\n            </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- TABS & FILTERS --- */}\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-center gap-4 bg-muted/40 p-2 rounded-xl border\">\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full sm:w-auto\">\r\n            <TabsList>\r\n                <TabsTrigger value=\"all\" className=\"w-24\">Todos</TabsTrigger>\r\n                <TabsTrigger value=\"pending\" className=\"relative\">\r\n                    Pendientes\r\n                    {pendingConsents.length > 0 && (\r\n                        <span className=\"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-orange-500 text-[10px] text-white animate-pulse\">\r\n                            {pendingConsents.length}\r\n                        </span>\r\n                    )}\r\n                </TabsTrigger>\r\n            </TabsList>\r\n        </Tabs>\r\n\r\n        <div className=\"relative w-full sm:w-64\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input \r\n                placeholder=\"Buscar documento...\" \r\n                className=\"pl-10 h-10 border-none bg-background shadow-sm\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- DOCUMENTS GRID --- */}\r\n      {loading ? (\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n              {[1,2,3].map(i => <div key={i} className=\"h-40 bg-muted/20 animate-pulse rounded-xl\" />)}\r\n          </div>\r\n      ) : displayedConsents.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center py-20 border-2 border-dashed border-muted rounded-3xl bg-muted/5\">\r\n              <FileText className=\"h-12 w-12 text-muted-foreground/30 mb-3\" />\r\n              <p className=\"text-muted-foreground font-medium\">No hay documentos en esta vista</p>\r\n          </div>\r\n      ) : (\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3\">\r\n              <AnimatePresence>\r\n                  {displayedConsents.map((consent) => (\r\n                      <motion.div\r\n                          key={consent.id}\r\n                          layout\r\n                          initial={{ opacity: 0, scale: 0.95 }}\r\n                          animate={{ opacity: 1, scale: 1 }}\r\n                          exit={{ opacity: 0, scale: 0.95 }}\r\n                      >\r\n                          <Card \r\n                              className={`\r\n                                  group cursor-pointer hover:shadow-lg transition-all duration-300 border-l-4 overflow-hidden\r\n                                  ${consent.isSigned ? 'border-l-emerald-500' : 'border-l-orange-400'}\r\n                              `}\r\n                              onClick={() => { setSelectedConsent(consent); setIsDetailsOpen(true); }}\r\n                          >\r\n                              <CardContent className=\"p-5\">\r\n                                  <div className=\"flex justify-between items-start mb-4\">\r\n                                      <div className={`p-2.5 rounded-lg ${consent.isSigned ? 'bg-emerald-100 text-emerald-700' : 'bg-orange-100 text-orange-700'}`}>\r\n                                          <FileText className=\"h-6 w-6\" />\r\n                                      </div>\r\n                                      {consent.isSigned ? (\r\n                                          <Badge variant=\"outline\" className=\"bg-emerald-50 text-emerald-700 border-emerald-200\">\r\n                                              <CheckCircle2 className=\"w-3 h-3 mr-1\" /> Firmado\r\n                                          </Badge>\r\n                                      ) : (\r\n                                          <Badge variant=\"outline\" className=\"bg-orange-50 text-orange-700 border-orange-200 animate-pulse\">\r\n                                              <PenTool className=\"w-3 h-3 mr-1\" /> Pendiente\r\n                                          </Badge>\r\n                                      )}\r\n                                  </div>\r\n\r\n                                  <h3 className=\"font-bold text-lg leading-tight mb-1 truncate\" title={getProcedureTypeLabel(consent.procedureType)}>\r\n                                      {getProcedureTypeLabel(consent.procedureType)}\r\n                                  </h3>\r\n                                  <p className=\"text-sm text-muted-foreground mb-4 line-clamp-1\">\r\n                                      {consent.procedureDescription || consent.description || \"Sin descripci├│n\"}\r\n                                  </p>\r\n\r\n                                  <div className=\"space-y-2 pt-3 border-t text-xs text-muted-foreground\">\r\n                                      <div className=\"flex items-center gap-2\">\r\n                                          <UserCheck className=\"w-3.5 h-3.5\" />\r\n                                          <span className=\"font-medium text-foreground\">{consent.patientName}</span>\r\n                                      </div>\r\n                                      <div className=\"flex items-center gap-2\">\r\n                                          {consent.isSigned ? (\r\n                                              <>\r\n                                                  <Calendar className=\"w-3.5 h-3.5\" />\r\n                                                  <span>{format(new Date(consent.signedDate!), 'dd MMM yyyy', { locale: es })}</span>\r\n                                              </>\r\n                                          ) : (\r\n                                              <>\r\n                                                  <Clock className=\"w-3.5 h-3.5\" />\r\n                                                  <span>Esperando firma...</span>\r\n                                              </>\r\n                                          )}\r\n                                      </div>\r\n                                  </div>\r\n\r\n                                  {/* Hover Action */}\r\n                                  <div className=\"absolute inset-0 bg-primary/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none\">\r\n                                      <span className=\"bg-background px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm border flex items-center gap-1\">\r\n                                          <Eye className=\"w-3 h-3\" /> Ver Documento\r\n                                      </span>\r\n                                  </div>\r\n                              </CardContent>\r\n                          </Card>\r\n                      </motion.div>\r\n                  ))}\r\n              </AnimatePresence>\r\n          </div>\r\n      )}\r\n\r\n      {/* DIALOGS */}\r\n      <InformedConsentFormDialog\r\n        open={isFormOpen}\r\n        onClose={() => setIsFormOpen(false)}\r\n        onSubmit={async (data) => {\r\n            await informedConsentService.create(data);\r\n            loadData();\r\n            setIsFormOpen(false);\r\n        }}\r\n      />\r\n\r\n      <InformedConsentDetailsDialog\r\n        open={isDetailsOpen}\r\n        onClose={() => { setIsDetailsOpen(false); setSelectedConsent(undefined); }}\r\n        consent={selectedConsent}\r\n        onSign={handleSign}\r\n        onDelete={handleDelete}\r\n      />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Inventory.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadItems'. Either include it or remove the dependency array.","line":74,"column":6,"nodeType":"ArrayExpression","endLine":74,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadItems]","fix":{"range":[2562,2564],"text":"[loadItems]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadItems'. Either include it or remove the dependency array.","line":82,"column":6,"nodeType":"ArrayExpression","endLine":82,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [loadItems, searchTerm]","fix":{"range":[2767,2779],"text":"[loadItems, searchTerm]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'categoryFilterMap'. Either include it or remove the dependency array.","line":123,"column":6,"nodeType":"ArrayExpression","endLine":123,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [items, searchTerm, categoryFilter, categoryFilterMap, statusFilter]","fix":{"range":[4514,4563],"text":"[items, searchTerm, categoryFilter, categoryFilterMap, statusFilter]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4628,4631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4628,4631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4982,4985],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4982,4985],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Plus, Search, AlertTriangle, Package, Filter, \r\n  MoreHorizontal, ArrowUpDown, Box, ShoppingCart, Truck, History\r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { InventoryFormDialog } from '@/components/inventory/InventoryFormDialog';\r\nimport { InventoryDetailsDialog } from '@/components/inventory/InventoryDetailsDialog';\r\nimport { inventoryService, type InventoryItem } from '@/services';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ntype InventoryStatus = 'disponible' | 'bajo_stock' | 'agotado';\r\ntype InventoryItemDisplay = InventoryItem & { status?: InventoryStatus; supplier: string };\r\n\r\n// Configuraci├│n de traducci├│n de categor├¡as de inventario\r\nconst categoryLabels: Record<string, string> = {\r\n  MEDICATION: 'Medicamento',\r\n  SUPPLY: 'Insumo',\r\n  EQUIPMENT: 'Equipo',\r\n  FOOD: 'Alimento',\r\n  OTHER: 'Otro',\r\n  // Tambi├⌐n soportar las versiones en espa├▒ol por si acaso\r\n  medicamento: 'Medicamento',\r\n  material: 'Insumo',\r\n  alimento: 'Alimento',\r\n  equipo: 'Equipo',\r\n  otro: 'Otro',\r\n};\r\n\r\nconst getCategoryLabel = (category: string | undefined): string => {\r\n  if (!category) return 'Sin categor├¡a';\r\n  return categoryLabels[category] || category;\r\n};\r\n\r\nexport default function Inventory() {\r\n  const [items, setItems] = useState<InventoryItemDisplay[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [selectedItem, setSelectedItem] = useState<InventoryItemDisplay | null>(null);\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    loadItems();\r\n  }, []);\r\n\r\n  // Recargar cuando cambie el t├⌐rmino de b├║squeda\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      loadItems();\r\n    }, 300);\r\n    return () => clearTimeout(timeoutId);\r\n  }, [searchTerm]);\r\n\r\n  const loadItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const page = await inventoryService.getAll(0, 100, searchTerm);\r\n      const itemsWithStatus = page.content.map(item => ({\r\n        ...item,\r\n        status: (item.quantity === 0 ? 'agotado' : item.quantity <= item.minQuantity ? 'bajo_stock' : 'disponible') as InventoryStatus,\r\n        supplier: item.supplier || 'Proveedor General',\r\n      }));\r\n      setItems(itemsWithStatus);\r\n    } catch (error) {\r\n      toast({ title: 'Error de sincronizaci├│n', description: 'No se pudo actualizar el inventario.', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Mapeo de valores del filtro a valores reales de categor├¡as\r\n  const categoryFilterMap: Record<string, string[]> = {\r\n    'all': [],\r\n    'medicamento': ['MEDICATION', 'medicamento'],\r\n    'material': ['SUPPLY', 'material'],\r\n    'alimento': ['FOOD', 'alimento'],\r\n  };\r\n\r\n  const filteredItems = useMemo(() => {\r\n    return items.filter(item => {\r\n      const matchesSearch = item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                           (item.sku && item.sku.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n                           (item.supplier && item.supplier.toLowerCase().includes(searchTerm.toLowerCase()));\r\n      \r\n      const matchesCategory = categoryFilter === 'all' || \r\n                            categoryFilterMap[categoryFilter]?.includes(item.category) ||\r\n                            item.category === categoryFilter;\r\n      \r\n      const matchesStatus = statusFilter === 'all' || item.status === statusFilter;\r\n      \r\n      return matchesSearch && matchesCategory && matchesStatus;\r\n    });\r\n  }, [items, searchTerm, categoryFilter, statusFilter]);\r\n\r\n  // --- ACTIONS ---\r\n  const handleAddItem = async (data: any) => {\r\n      try {\r\n          await inventoryService.create(data); \r\n          toast({ title: 'Producto registrado', className: 'bg-emerald-50 border-emerald-200' });\r\n          setIsFormOpen(false); \r\n          loadItems();\r\n      } catch (error) { toast({ title: 'Error', variant: 'destructive' }); }\r\n  };\r\n\r\n  const handleEditItem = async (data: any) => {\r\n      if (!selectedItem) return;\r\n      try {\r\n          await inventoryService.update(selectedItem.id, data); \r\n          toast({ title: 'Inventario actualizado' });\r\n          setIsFormOpen(false); setSelectedItem(null); loadItems();\r\n      } catch (error) { toast({ title: 'Error', variant: 'destructive' }); }\r\n  };\r\n\r\n  const handleDeleteItem = async (id: string) => {\r\n      try {\r\n          await inventoryService.delete(id); \r\n          toast({ title: 'Producto eliminado' });\r\n          setIsDetailsOpen(false); setSelectedItem(null); loadItems();\r\n      } catch (error) { toast({ title: 'Error', variant: 'destructive' }); }\r\n  };\r\n\r\n  // --- UI HELPERS ---\r\n  const lowStockCount = items.filter(i => i.status === 'bajo_stock' || i.status === 'agotado').length;\r\n\r\n  const getStockLevelColor = (quantity: number, min: number) => {\r\n      if (quantity === 0) return 'bg-rose-500';\r\n      if (quantity <= min) return 'bg-orange-500';\r\n      return 'bg-emerald-500';\r\n  };\r\n\r\n  const getStockPercentage = (quantity: number, min: number) => {\r\n      const max = min * 3; // Asumimos que el \"lleno\" es 3 veces el m├¡nimo para la visualizaci├│n\r\n      return Math.min(100, (quantity / max) * 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Inventario Central <Box className=\"h-6 w-6 text-primary\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Control de stock, proveedores y reabastecimiento.\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => { setSelectedItem(null); setIsFormOpen(true); }} className=\"shadow-lg shadow-primary/20 hover:scale-105 transition-transform\">\r\n          <Plus className=\"mr-2 h-4 w-4\" /> Registrar Producto\r\n        </Button>\r\n      </div>\r\n\r\n      {/* --- ALERTS BANNER --- */}\r\n      <AnimatePresence>\r\n        {lowStockCount > 0 && (\r\n            <motion.div \r\n                initial={{ opacity: 0, height: 0 }} \r\n                animate={{ opacity: 1, height: 'auto' }}\r\n                exit={{ opacity: 0, height: 0 }}\r\n            >\r\n                <Card className=\"border-l-4 border-l-orange-500 bg-orange-50/50 shadow-sm\">\r\n                    <CardContent className=\"p-4 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"bg-orange-100 p-2 rounded-full\">\r\n                                <AlertTriangle className=\"h-5 w-5 text-orange-600\" />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"font-bold text-orange-900\">Atenci├│n Requerida</h3>\r\n                                <p className=\"text-sm text-orange-800\">\r\n                                    Tienes <strong>{lowStockCount} productos</strong> con niveles cr├¡ticos de inventario.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <Button \r\n                            variant=\"outline\" \r\n                            size=\"sm\" \r\n                            className=\"bg-white border-orange-200 text-orange-700 hover:bg-orange-100\"\r\n                            onClick={() => setStatusFilter('bajo_stock')}\r\n                        >\r\n                            Ver Productos\r\n                        </Button>\r\n                    </CardContent>\r\n                </Card>\r\n            </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* --- TOOLBAR --- */}\r\n      <div className=\"flex flex-col md:flex-row gap-4 items-center bg-muted/40 p-2 rounded-xl border sticky top-4 z-20 backdrop-blur-md\">\r\n        <div className=\"relative flex-1 w-full\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input \r\n                placeholder=\"Buscar por nombre, SKU o proveedor...\" \r\n                className=\"pl-10 bg-background border-none shadow-sm h-10\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n        </div>\r\n        <div className=\"flex gap-2 w-full md:w-auto\">\r\n            <Select value={categoryFilter} onValueChange={setCategoryFilter}>\r\n                <SelectTrigger className=\"w-full md:w-[160px] h-10 bg-background border-none shadow-sm\">\r\n                    <SelectValue placeholder=\"Categor├¡a\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todas</SelectItem>\r\n                    <SelectItem value=\"medicamento\">Medicamentos</SelectItem>\r\n                    <SelectItem value=\"material\">Insumos</SelectItem>\r\n                    <SelectItem value=\"alimento\">Alimentos</SelectItem>\r\n                </SelectContent>\r\n            </Select>\r\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                <SelectTrigger className=\"w-full md:w-[160px] h-10 bg-background border-none shadow-sm\">\r\n                    <SelectValue placeholder=\"Estado\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todos</SelectItem>\r\n                    <SelectItem value=\"disponible\">≡ƒƒó Disponible</SelectItem>\r\n                    <SelectItem value=\"bajo_stock\">≡ƒƒí Bajo Stock</SelectItem>\r\n                    <SelectItem value=\"agotado\">≡ƒö┤ Agotado</SelectItem>\r\n                </SelectContent>\r\n            </Select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- DATA TABLE --- */}\r\n      <div className=\"rounded-xl border bg-card shadow-sm overflow-hidden\">\r\n        <Table>\r\n            <TableHeader className=\"bg-muted/40\">\r\n                <TableRow className=\"hover:bg-transparent\">\r\n                    <TableHead className=\"w-[300px]\">Producto</TableHead>\r\n                    <TableHead>Categor├¡a</TableHead>\r\n                    <TableHead className=\"w-[200px]\">Nivel de Stock</TableHead>\r\n                    <TableHead>Proveedor</TableHead>\r\n                    <TableHead className=\"text-right\">Precio</TableHead>\r\n                    <TableHead className=\"w-[50px]\"></TableHead>\r\n                </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n                {loading ? (\r\n                    // Skeleton Rows\r\n                    [...Array(5)].map((_, i) => (\r\n                        <TableRow key={i}>\r\n                            <TableCell><div className=\"h-10 w-32 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-24 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-32 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-20 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-16 bg-muted/50 rounded animate-pulse ml-auto\" /></TableCell>\r\n                            <TableCell />\r\n                        </TableRow>\r\n                    ))\r\n                ) : filteredItems.length === 0 ? (\r\n                    <TableRow>\r\n                        <TableCell colSpan={6} className=\"h-64 text-center\">\r\n                            <div className=\"flex flex-col items-center justify-center text-muted-foreground opacity-50\">\r\n                                <Package className=\"h-12 w-12 mb-3\" />\r\n                                <p>No se encontraron productos.</p>\r\n                            </div>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                ) : (\r\n                    <AnimatePresence>\r\n                        {filteredItems.map((item) => (\r\n                            <motion.tr\r\n                                key={item.id}\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"group hover:bg-muted/40 transition-colors border-b last:border-0 cursor-pointer\"\r\n                                onClick={() => { setSelectedItem(item); setIsDetailsOpen(true); }}\r\n                            >\r\n                                {/* Col: Producto */}\r\n                                <TableCell>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"h-10 w-10 bg-slate-100 rounded-lg flex items-center justify-center text-slate-500 font-bold border border-slate-200\">\r\n                                            {item.name.charAt(0)}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-foreground line-clamp-1\">{item.name}</p>\r\n                                            <p className=\"text-xs text-muted-foreground font-mono\">SKU: {item.sku || 'N/A'}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Categor├¡a */}\r\n                                <TableCell>\r\n                                    <Badge variant=\"secondary\" className=\"capitalize font-normal text-muted-foreground bg-muted/50\">\r\n                                        {getCategoryLabel(item.category)}\r\n                                    </Badge>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Stock Visual */}\r\n                                <TableCell>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <div className=\"flex justify-between text-xs\">\r\n                                            <span className=\"font-semibold\">{item.quantity} {item.unit}</span>\r\n                                            <span className=\"text-muted-foreground\">Min: {item.minQuantity}</span>\r\n                                        </div>\r\n                                        <Progress \r\n                                            value={getStockPercentage(item.quantity, item.minQuantity)} \r\n                                            className=\"h-2\" \r\n                                            indicatorColor={getStockLevelColor(item.quantity, item.minQuantity)} \r\n                                        />\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Proveedor */}\r\n                                <TableCell>\r\n                                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                                        <Truck className=\"w-3.5 h-3.5\" />\r\n                                        <span className=\"truncate max-w-[120px]\" title={item.supplier}>{item.supplier}</span>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Precio */}\r\n                                <TableCell className=\"text-right\">\r\n                                    <span className=\"font-mono font-medium\">\r\n                                        ${Number(item.unitPrice).toLocaleString()}\r\n                                    </span>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Menu */}\r\n                                <TableCell>\r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent align=\"end\">\r\n                                            <DropdownMenuItem onClick={() => { setSelectedItem(item); setIsDetailsOpen(true); }}>\r\n                                                Ver Detalles\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                setSelectedItem(item); \r\n                                                setIsFormOpen(true);\r\n                                            }}>\r\n                                                Editar Stock\r\n                                            </DropdownMenuItem>\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                </TableCell>\r\n                            </motion.tr>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </TableBody>\r\n        </Table>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between text-xs text-muted-foreground px-2\">\r\n        <p>{filteredItems.length} productos listados</p>\r\n        <p>Valores actualizados en tiempo real</p>\r\n      </div>\r\n\r\n      {/* DIALOGS */}\r\n      <InventoryFormDialog\r\n        open={isFormOpen}\r\n        onOpenChange={setIsFormOpen}\r\n        onSubmit={selectedItem ? handleEditItem : handleAddItem}\r\n        initialData={selectedItem || undefined}\r\n      />\r\n\r\n      <InventoryDetailsDialog\r\n        open={isDetailsOpen}\r\n        onOpenChange={setIsDetailsOpen}\r\n        item={selectedItem}\r\n        onEdit={(item) => { setSelectedItem(item); setIsFormOpen(true); setIsDetailsOpen(false); }}\r\n        onDelete={handleDeleteItem}\r\n      />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\MedicalRecords.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadRecords'. Either include it or remove the dependency array.","line":38,"column":6,"nodeType":"ArrayExpression","endLine":38,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadRecords]","fix":{"range":[1602,1604],"text":"[loadRecords]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadRecords'. Either include it or remove the dependency array.","line":60,"column":6,"nodeType":"ArrayExpression","endLine":60,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [loadRecords, searchTerm]","fix":{"range":[2287,2299],"text":"[loadRecords, searchTerm]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":285,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14931,14934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14931,14934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, Calendar, Activity, FileText, Thermometer, \r\n  Weight, AlertCircle, Stethoscope, HeartPulse, Clock, \r\n  ChevronRight, Filter, ClipboardList\r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { MedicalRecordFormDialog } from '@/components/medical-records/MedicalRecordFormDialog';\r\nimport { MedicalRecordDetailsDialog } from '@/components/medical-records/MedicalRecordDetailsDialog';\r\nimport { medicalRecordService } from '@/services/medicalRecordService';\r\nimport type { MedicalRecord } from '@/types/medicalRecord';\r\nimport { toast } from 'sonner';\r\nimport { format, isSameDay } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport default function MedicalRecords() {\r\n  const [records, setRecords] = useState<MedicalRecord[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterType, setFilterType] = useState('all');\r\n  const [selectedRecord, setSelectedRecord] = useState<MedicalRecord | null>(null);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadRecords();\r\n  }, []);\r\n\r\n  const loadRecords = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await medicalRecordService.getAll(0, 100, searchTerm);\r\n      // Ordenar por fecha descendente (lo m├ís reciente primero)\r\n      const sorted = (response.content || []).sort((a, b) => \r\n        new Date(b.recordDate).getTime() - new Date(a.recordDate).getTime()\r\n      );\r\n      setRecords(sorted);\r\n    } catch (error) {\r\n      toast.error('Error al sincronizar expedientes');\r\n      setRecords([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => loadRecords(), 500);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  const filteredRecords = useMemo(() => {\r\n    return records.filter((record) => {\r\n      const matchesSearch = `${record.patientName} ${record.veterinarianName} ${record.diagnosis}`\r\n          .toLowerCase()\r\n          .includes(searchTerm.toLowerCase());\r\n      \r\n      if (filterType === 'followup') return matchesSearch && record.followUpRequired;\r\n      return matchesSearch;\r\n    });\r\n  }, [records, searchTerm, filterType]);\r\n\r\n  const getInitials = (name: string) => name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Expedientes Cl├¡nicos <Activity className=\"text-primary h-6 w-6\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Historial m├⌐dico cronol├│gico y seguimiento de pacientes.\r\n          </p>\r\n        </div>\r\n        <MedicalRecordFormDialog onSuccess={loadRecords}>\r\n          <Button className=\"shadow-lg shadow-primary/20 hover:scale-105 transition-transform\">\r\n            <Plus className=\"mr-2 h-4 w-4\" />\r\n            Nueva Consulta\r\n          </Button>\r\n        </MedicalRecordFormDialog>\r\n      </div>\r\n\r\n      {/* --- TOOLBAR --- */}\r\n      <div className=\"sticky top-4 z-20 bg-background/80 backdrop-blur-xl border p-2 rounded-2xl shadow-sm flex flex-col sm:flex-row gap-2\">\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Buscar en diagn├│sticos, pacientes o doctores...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"pl-10 border-none bg-transparent shadow-none focus-visible:ring-0\"\r\n          />\r\n        </div>\r\n        <div className=\"h-8 w-px bg-border hidden sm:block my-auto\" />\r\n        <div className=\"flex items-center gap-2 px-2\">\r\n            <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n            <Select value={filterType} onValueChange={setFilterType}>\r\n                <SelectTrigger className=\"w-[180px] border-none bg-transparent shadow-none h-9\">\r\n                    <SelectValue placeholder=\"Filtrar por...\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todos los registros</SelectItem>\r\n                    <SelectItem value=\"followup\">Requiere Seguimiento ΓÜá∩╕Å</SelectItem>\r\n                </SelectContent>\r\n            </Select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- TIMELINE CONTENT --- */}\r\n      <div className=\"relative pl-4 md:pl-8 space-y-8\">\r\n        {/* L├¡nea vertical del timeline */}\r\n        <div className=\"absolute left-4 md:left-8 top-0 bottom-0 w-px bg-gradient-to-b from-border via-border to-transparent\" />\r\n\r\n        {loading ? (\r\n             // Skeleton Loading\r\n             [1, 2, 3].map((i) => (\r\n                <div key={i} className=\"relative pl-8 md:pl-12\">\r\n                    <div className=\"h-32 bg-muted/30 rounded-2xl animate-pulse\" />\r\n                </div>\r\n             ))\r\n        ) : filteredRecords.length === 0 ? (\r\n            <div className=\"relative pl-8 md:pl-12\">\r\n                <Card className=\"p-12 text-center border-dashed bg-muted/5\">\r\n                    <ClipboardList className=\"mx-auto h-12 w-12 text-muted-foreground/30 mb-4\" />\r\n                    <h3 className=\"text-lg font-semibold text-muted-foreground\">Sin registros cl├¡nicos</h3>\r\n                    <p className=\"text-sm text-muted-foreground/70\">\r\n                        {searchTerm ? \"No se encontraron resultados para tu b├║squeda.\" : \"Comienza una nueva consulta para ver el historial aqu├¡.\"}\r\n                    </p>\r\n                </Card>\r\n            </div>\r\n        ) : (\r\n            <AnimatePresence>\r\n                {filteredRecords.map((record, index) => (\r\n                    <motion.div\r\n                        key={record.id}\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: index * 0.1 }}\r\n                        className=\"relative pl-4 md:pl-8 group\"\r\n                    >\r\n                        {/* Timeline Dot */}\r\n                        <div className={`\r\n                            absolute left-0 top-6 w-8 h-8 md:w-8 md:h-8 rounded-full border-4 border-background flex items-center justify-center z-10 shadow-sm transition-transform group-hover:scale-110\r\n                            ${record.followUpRequired ? 'bg-orange-500 text-white' : 'bg-primary text-primary-foreground'}\r\n                        `}>\r\n                            {record.followUpRequired ? <AlertCircle className=\"w-4 h-4\" /> : <Stethoscope className=\"w-4 h-4\" />}\r\n                        </div>\r\n\r\n                        {/* Card Content */}\r\n                        <Card \r\n                            className={`\r\n                                cursor-pointer hover:shadow-lg transition-all duration-300 border-l-4 overflow-hidden\r\n                                ${record.followUpRequired ? 'border-l-orange-500' : 'border-l-primary/50'}\r\n                            `}\r\n                            onClick={() => { setSelectedRecord(record); setIsDetailsOpen(true); }}\r\n                        >\r\n                            <div className=\"flex flex-col md:flex-row\">\r\n                                \r\n                                {/* Date Column */}\r\n                                <div className=\"p-4 md:p-6 bg-muted/10 md:w-48 flex flex-row md:flex-col justify-between md:justify-center items-center md:items-start gap-2 border-b md:border-b-0 md:border-r\">\r\n                                    <div className=\"text-center md:text-left\">\r\n                                        <p className=\"text-sm font-bold text-muted-foreground uppercase tracking-wider\">\r\n                                            {format(new Date(record.recordDate), \"MMM\", { locale: es })}\r\n                                        </p>\r\n                                        <p className=\"text-3xl font-bold text-foreground leading-none\">\r\n                                            {format(new Date(record.recordDate), \"dd\")}\r\n                                        </p>\r\n                                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                            {format(new Date(record.recordDate), \"yyyy ΓÇó HH:mm\")}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <Avatar className=\"h-8 w-8 border\">\r\n                                            <AvatarFallback className=\"text-[10px] bg-background\">\r\n                                                {getInitials(record.veterinarianName)}\r\n                                            </AvatarFallback>\r\n                                        </Avatar>\r\n                                        <div className=\"text-xs text-right md:text-left\">\r\n                                            <p className=\"font-semibold text-foreground line-clamp-1\">Dr. {record.veterinarianName.split(' ')[0]}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Main Content */}\r\n                                <div className=\"flex-1 p-4 md:p-6 space-y-4\">\r\n                                    <div className=\"flex justify-between items-start gap-4\">\r\n                                        <div>\r\n                                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                                <h3 className=\"font-bold text-lg text-primary\">{record.patientName}</h3>\r\n                                                {record.followUpRequired && (\r\n                                                    <Badge variant=\"destructive\" className=\"text-[10px] px-1.5 h-5 bg-orange-500 hover:bg-orange-600\">\r\n                                                        Seguimiento\r\n                                                    </Badge>\r\n                                                )}\r\n                                            </div>\r\n                                            <h4 className=\"font-semibold text-foreground/90 text-base\">{record.diagnosis}</h4>\r\n                                        </div>\r\n                                        <ChevronRight className=\"text-muted-foreground/30 w-5 h-5 group-hover:text-primary transition-colors\" />\r\n                                    </div>\r\n\r\n                                    <p className=\"text-sm text-muted-foreground line-clamp-2 leading-relaxed\">\r\n                                        {record.treatment}\r\n                                    </p>\r\n\r\n                                    {/* Vital Signs Widgets */}\r\n                                    <div className=\"flex flex-wrap gap-3 pt-2\">\r\n                                        {record.weight && (\r\n                                            <VitalChip \r\n                                                icon={<Weight className=\"w-3.5 h-3.5\" />} \r\n                                                label=\"Peso\" \r\n                                                value={`${record.weight} kg`} \r\n                                                color=\"text-indigo-600 bg-indigo-50 border-indigo-100\"\r\n                                            />\r\n                                        )}\r\n                                        {record.temperature && (\r\n                                            <VitalChip \r\n                                                icon={<Thermometer className=\"w-3.5 h-3.5\" />} \r\n                                                label=\"Temp\" \r\n                                                value={`${record.temperature}┬░C`} \r\n                                                color=\"text-rose-600 bg-rose-50 border-rose-100\"\r\n                                            />\r\n                                        )}\r\n                                        {record.heartRate && (\r\n                                            <VitalChip \r\n                                                icon={<HeartPulse className=\"w-3.5 h-3.5\" />} \r\n                                                label=\"Frec.\" \r\n                                                value={`${record.heartRate} bpm`} \r\n                                                color=\"text-emerald-600 bg-emerald-50 border-emerald-100\"\r\n                                            />\r\n                                        )}\r\n                                        {record.followUpDate && (\r\n                                            <VitalChip \r\n                                                icon={<Clock className=\"w-3.5 h-3.5\" />} \r\n                                                label=\"Pr├│xima\" \r\n                                                value={format(new Date(record.followUpDate), \"dd MMM\")} \r\n                                                color=\"text-orange-600 bg-orange-50 border-orange-100\"\r\n                                            />\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </motion.div>\r\n                ))}\r\n            </AnimatePresence>\r\n        )}\r\n      </div>\r\n\r\n      {selectedRecord && (\r\n        <MedicalRecordDetailsDialog\r\n          record={selectedRecord}\r\n          open={isDetailsOpen}\r\n          onOpenChange={setIsDetailsOpen}\r\n          onEdit={() => setIsDetailsOpen(false)}\r\n          onDelete={async () => {\r\n            try {\r\n              await medicalRecordService.delete(selectedRecord.id);\r\n              toast.success('Registro eliminado');\r\n              setIsDetailsOpen(false);\r\n              loadRecords();\r\n            } catch (error) {\r\n              toast.error('Error al eliminar');\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Subcomponente para los Signos Vitales\r\nfunction VitalChip({ icon, label, value, color }: { icon: any, label: string, value: string, color: string }) {\r\n    return (\r\n        <div className={`flex items-center gap-2 px-3 py-1.5 rounded-lg border text-xs font-medium transition-colors ${color}`}>\r\n            {icon}\r\n            <span className=\"opacity-70\">{label}:</span>\r\n            <span className=\"font-bold\">{value}</span>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Owners.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadOwners'. Either include it or remove the dependency array.","line":40,"column":6,"nodeType":"ArrayExpression","endLine":40,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadOwners]","fix":{"range":[1390,1392],"text":"[loadOwners]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadOwners'. Either include it or remove the dependency array.","line":59,"column":6,"nodeType":"ArrayExpression","endLine":59,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [loadOwners, searchTerm]","fix":{"range":[1897,1909],"text":"[loadOwners, searchTerm]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, Mail, Phone, MapPin, MoreHorizontal, \r\n  User, FileText, ArrowUpDown, Filter, Building2\r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { OwnerFormDialog } from '@/components/owners/OwnerFormDialog';\r\nimport { OwnerDetailsDialog } from '@/components/owners/OwnerDetailsDialog';\r\nimport { ownerService } from '@/services/ownerService';\r\nimport type { Owner } from '@/types/owner';\r\nimport { toast } from 'sonner';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport default function Owners() {\r\n  const [owners, setOwners] = useState<Owner[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedOwner, setSelectedOwner] = useState<Owner | null>(null);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadOwners();\r\n  }, []);\r\n\r\n  const loadOwners = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await ownerService.getAll(0, 100, searchTerm);\r\n      setOwners(response.content || []);\r\n    } catch (error) {\r\n      toast.error('Error al cargar la base de datos de clientes');\r\n      setOwners([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Debounce search\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => loadOwners(), 400);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  const getInitials = (firstName: string, lastName: string) => {\r\n    return `${firstName.charAt(0)}${lastName.charAt(0)}`.toUpperCase();\r\n  };\r\n\r\n  const getRandomColor = (name: string) => {\r\n    const colors = [\r\n      'bg-red-100 text-red-700',\r\n      'bg-green-100 text-green-700',\r\n      'bg-blue-100 text-blue-700',\r\n      'bg-yellow-100 text-yellow-700',\r\n      'bg-purple-100 text-purple-700',\r\n      'bg-pink-100 text-pink-700',\r\n      'bg-indigo-100 text-indigo-700',\r\n    ];\r\n    let hash = 0;\r\n    for (let i = 0; i < name.length; i++) hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n    return colors[Math.abs(hash) % colors.length];\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-4 border-b\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Directorio de Clientes</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Gestiona la base de datos de propietarios y contactos.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <Button variant=\"outline\" className=\"hidden sm:flex\" onClick={() => loadOwners()}>\r\n                <ArrowUpDown className=\"mr-2 h-4 w-4\" /> Actualizar\r\n            </Button>\r\n            <OwnerFormDialog onSuccess={loadOwners}>\r\n                <Button className=\"shadow-md\">\r\n                    <Plus className=\"mr-2 h-4 w-4\" /> Nuevo Cliente\r\n                </Button>\r\n            </OwnerFormDialog>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- TOOLBAR --- */}\r\n      <div className=\"flex items-center gap-4 bg-muted/40 p-2 rounded-xl border\">\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Buscar por nombre, c├⌐dula o correo...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"pl-10 bg-background border-none shadow-sm h-10\"\r\n          />\r\n        </div>\r\n        <Button variant=\"ghost\" size=\"icon\" className=\"text-muted-foreground\">\r\n            <Filter className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* --- DATA TABLE --- */}\r\n      <div className=\"rounded-xl border bg-card shadow-sm overflow-hidden\">\r\n        <Table>\r\n            <TableHeader className=\"bg-muted/40\">\r\n                <TableRow className=\"hover:bg-transparent\">\r\n                    <TableHead className=\"w-[300px]\">Cliente</TableHead>\r\n                    <TableHead>Identificaci├│n</TableHead>\r\n                    <TableHead>Contacto</TableHead>\r\n                    <TableHead>Ubicaci├│n</TableHead>\r\n                    <TableHead className=\"text-right\">Acciones</TableHead>\r\n                </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n                {loading ? (\r\n                    // Skeleton Rows\r\n                    [...Array(5)].map((_, i) => (\r\n                        <TableRow key={i}>\r\n                            <TableCell><div className=\"flex gap-3\"><div className=\"h-10 w-10 rounded-full bg-muted animate-pulse\" /><div className=\"space-y-2\"><div className=\"h-4 w-32 bg-muted animate-pulse rounded\" /><div className=\"h-3 w-20 bg-muted animate-pulse rounded\" /></div></div></TableCell>\r\n                            <TableCell><div className=\"h-4 w-24 bg-muted animate-pulse rounded\" /></TableCell>\r\n                            <TableCell><div className=\"space-y-2\"><div className=\"h-4 w-32 bg-muted animate-pulse rounded\" /><div className=\"h-3 w-24 bg-muted animate-pulse rounded\" /></div></TableCell>\r\n                            <TableCell><div className=\"h-4 w-20 bg-muted animate-pulse rounded\" /></TableCell>\r\n                            <TableCell className=\"text-right\"><div className=\"h-8 w-8 bg-muted animate-pulse rounded inline-block\" /></TableCell>\r\n                        </TableRow>\r\n                    ))\r\n                ) : owners.length === 0 ? (\r\n                    <TableRow>\r\n                        <TableCell colSpan={5} className=\"h-64 text-center\">\r\n                            <div className=\"flex flex-col items-center justify-center text-muted-foreground\">\r\n                                <Search className=\"h-10 w-10 mb-2 opacity-20\" />\r\n                                <p>No se encontraron clientes con esos criterios.</p>\r\n                            </div>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                ) : (\r\n                    <AnimatePresence>\r\n                        {owners.map((owner) => (\r\n                            <motion.tr\r\n                                key={owner.id}\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"group hover:bg-muted/40 transition-colors border-b last:border-0 cursor-pointer\"\r\n                                onClick={() => { setSelectedOwner(owner); setIsDetailsOpen(true); }}\r\n                            >\r\n                                {/* Col: Cliente (Avatar + Nombre) */}\r\n                                <TableCell>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <Avatar className=\"h-10 w-10 border border-muted\">\r\n                                            <AvatarFallback className={`${getRandomColor(owner.firstName)} font-bold text-xs`}>\r\n                                                {getInitials(owner.firstName, owner.lastName)}\r\n                                            </AvatarFallback>\r\n                                        </Avatar>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-foreground\">{owner.firstName} {owner.lastName}</p>\r\n                                            <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\r\n                                                <User className=\"h-3 w-3\" /> Cliente #{owner.id}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Identificaci├│n */}\r\n                                <TableCell>\r\n                                    <Badge variant=\"outline\" className=\"font-mono font-normal text-muted-foreground\">\r\n                                        {owner.documentType} {owner.documentNumber}\r\n                                    </Badge>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Contacto */}\r\n                                <TableCell>\r\n                                    <div className=\"flex flex-col gap-1\">\r\n                                        <div className=\"flex items-center gap-2 text-sm\">\r\n                                            <Mail className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                            <a href={`mailto:${owner.email}`} className=\"hover:text-primary transition-colors\" onClick={(e) => e.stopPropagation()}>\r\n                                                {owner.email}\r\n                                            </a>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                                            <Phone className=\"h-3.5 w-3.5\" />\r\n                                            <span>{owner.phone}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Ubicaci├│n */}\r\n                                <TableCell>\r\n                                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                                        <MapPin className=\"h-3.5 w-3.5\" />\r\n                                        <span>{owner.city}, {owner.address}</span>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Acciones */}\r\n                                <TableCell className=\"text-right\">\r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent align=\"end\">\r\n                                            <DropdownMenuItem onClick={() => { setSelectedOwner(owner); setIsDetailsOpen(true); }}>\r\n                                                Ver Detalles\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                // Aqu├¡ ir├¡a la l├│gica de edici├│n directa si existiera un bot├│n separado\r\n                                                setSelectedOwner(owner); \r\n                                                setIsDetailsOpen(true);\r\n                                            }}>\r\n                                                Editar Informaci├│n\r\n                                            </DropdownMenuItem>\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                </TableCell>\r\n                            </motion.tr>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </TableBody>\r\n        </Table>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between text-xs text-muted-foreground px-2\">\r\n        <p>Total: {owners.length} clientes</p>\r\n        <p>Base de datos sincronizada</p>\r\n      </div>\r\n\r\n      {selectedOwner && (\r\n        <OwnerDetailsDialog\r\n          owner={selectedOwner}\r\n          open={isDetailsOpen}\r\n          onOpenChange={setIsDetailsOpen}\r\n          onUpdate={loadOwners}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Patients.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPatients'. Either include it or remove the dependency array.","line":69,"column":6,"nodeType":"ArrayExpression","endLine":69,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadPatients]","fix":{"range":[2641,2643],"text":"[loadPatients]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":108,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4075,4078],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4075,4078],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":325,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":325,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16265,16268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16265,16268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":331,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":331,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16463,16466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16463,16466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, Filter, PawPrint, Edit, Eye, \r\n  Dog, Cat, Bird, Rabbit, MoreHorizontal,\r\n  ChevronDown, ArrowUpDown, History, Phone, User\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { PatientFormDialog } from '@/components/patients/PatientFormDialog';\r\nimport { PatientDetailsDialog } from '@/components/patients/PatientDetailsDialog';\r\nimport { patientService, Patient } from '@/services';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { differenceInYears, differenceInMonths, format } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\n\r\n// Iconos minimalistas por especie\r\nconst getSpeciesIcon = (species: string) => {\r\n  const s = species.toLowerCase();\r\n  const className = \"w-4 h-4\";\r\n  if (s === 'dog' || s === 'perro') return <Dog className={className} />;\r\n  if (s === 'cat' || s === 'gato') return <Cat className={className} />;\r\n  if (s === 'bird' || s === 'ave') return <Bird className={className} />;\r\n  if (s === 'rabbit' || s === 'conejo') return <Rabbit className={className} />;\r\n  return <PawPrint className={className} />;\r\n};\r\n\r\nconst getSpeciesStyle = (species: string) => {\r\n    const s = species.toLowerCase();\r\n    if (s === 'dog') return 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400';\r\n    if (s === 'cat') return 'bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400';\r\n    return 'bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400';\r\n};\r\n\r\nexport default function Patients() {\r\n  const [patients, setPatients] = useState<Patient[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [speciesFilter, setSpeciesFilter] = useState<string>('all');\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [selectedPatient, setSelectedPatient] = useState<Patient | undefined>();\r\n  const [loading, setLoading] = useState(true);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    loadPatients();\r\n  }, []);\r\n\r\n  const loadPatients = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await patientService.getAll();\r\n      setPatients(response.content || []);\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Error al cargar listado', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredPatients = useMemo(() => {\r\n    return patients.filter((patient) => {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      const matchesSearch =\r\n        patient.name.toLowerCase().includes(searchLower) ||\r\n        (patient.ownerName && patient.ownerName.toLowerCase().includes(searchLower)) ||\r\n        (patient.breed && patient.breed.toLowerCase().includes(searchLower));\r\n      \r\n      const matchesSpecies = speciesFilter === 'all' || \r\n        patient.species.toLowerCase() === speciesFilter.toLowerCase();\r\n      \r\n      return matchesSearch && matchesSpecies;\r\n    });\r\n  }, [patients, searchTerm, speciesFilter]);\r\n\r\n  const calculateAge = (dateString?: string) => {\r\n    if (!dateString) return <span className=\"text-muted-foreground\">-</span>;\r\n    const date = new Date(dateString);\r\n    const years = differenceInYears(new Date(), date);\r\n    if (years > 0) return `${years} a├▒os`;\r\n    const months = differenceInMonths(new Date(), date);\r\n    return `${months} meses`;\r\n  };\r\n\r\n  // Manejo de guardado\r\n  const handleSave = async (data: any) => {\r\n    try {\r\n      if (selectedPatient) {\r\n        await patientService.update(selectedPatient.id, data);\r\n        toast({ title: 'Actualizado', description: 'Paciente actualizado correctamente' });\r\n      } else {\r\n        await patientService.create(data);\r\n        toast({ title: 'Creado', description: 'Paciente registrado correctamente' });\r\n      }\r\n      loadPatients();\r\n      setIsFormOpen(false);\r\n    } catch (error) {\r\n        toast({ title: 'Error', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n      \r\n      {/* --- HEADER CLEAN --- */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-4 border-b\">\r\n        <div>\r\n            <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Pacientes</h1>\r\n            <p className=\"text-muted-foreground mt-1\">\r\n                Directorio cl├¡nico y gesti├│n de expedientes.\r\n            </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <Button variant=\"outline\" className=\"hidden sm:flex\">\r\n                <ArrowUpDown className=\"mr-2 h-4 w-4\" /> Exportar\r\n            </Button>\r\n            <Button onClick={() => { setSelectedPatient(undefined); setIsFormOpen(true); }} className=\"shadow-md\">\r\n                <Plus className=\"mr-2 h-4 w-4\" /> Nuevo Paciente\r\n            </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- TOOLBAR --- */}\r\n      <div className=\"flex flex-col md:flex-row gap-4 items-center bg-muted/40 p-2 rounded-xl border\">\r\n        <div className=\"relative flex-1 w-full\">\r\n            <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n            <Input \r\n                placeholder=\"Buscar por nombre, chip o propietario...\" \r\n                className=\"pl-10 bg-background border-none shadow-sm h-10\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n        </div>\r\n        <div className=\"flex items-center gap-2 w-full md:w-auto\">\r\n            <Filter className=\"h-4 w-4 text-muted-foreground hidden md:block\" />\r\n            <Select value={speciesFilter} onValueChange={setSpeciesFilter}>\r\n                <SelectTrigger className=\"w-full md:w-[200px] h-10 bg-background border-none shadow-sm\">\r\n                    <SelectValue placeholder=\"Especie\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todas las especies</SelectItem>\r\n                    <SelectItem value=\"dog\">Perros</SelectItem>\r\n                    <SelectItem value=\"cat\">Gatos</SelectItem>\r\n                    <SelectItem value=\"bird\">Aves</SelectItem>\r\n                    <SelectItem value=\"rabbit\">Conejos</SelectItem>\r\n                </SelectContent>\r\n            </Select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- DATA TABLE --- */}\r\n      <div className=\"rounded-xl border bg-card shadow-sm overflow-hidden\">\r\n        <Table>\r\n            <TableHeader className=\"bg-muted/40\">\r\n                <TableRow className=\"hover:bg-transparent\">\r\n                    <TableHead className=\"w-[300px]\">Paciente</TableHead>\r\n                    <TableHead>Propietario</TableHead>\r\n                    <TableHead>Detalles</TableHead>\r\n                    <TableHead>Peso</TableHead>\r\n                    <TableHead>Registro</TableHead>\r\n                    <TableHead className=\"text-right\">Acciones</TableHead>\r\n                </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n                {loading ? (\r\n                    // Skeleton Loading Rows\r\n                    [...Array(5)].map((_, i) => (\r\n                        <TableRow key={i}>\r\n                            <TableCell><div className=\"h-10 w-32 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-24 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-16 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-10 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell><div className=\"h-4 w-20 bg-muted/50 rounded animate-pulse\" /></TableCell>\r\n                            <TableCell className=\"text-right\"><div className=\"h-8 w-8 bg-muted/50 rounded animate-pulse inline-block\" /></TableCell>\r\n                        </TableRow>\r\n                    ))\r\n                ) : filteredPatients.length === 0 ? (\r\n                    <TableRow>\r\n                        <TableCell colSpan={6} className=\"h-64 text-center\">\r\n                            <div className=\"flex flex-col items-center justify-center text-muted-foreground\">\r\n                                <Search className=\"h-10 w-10 mb-2 opacity-20\" />\r\n                                <p>No se encontraron pacientes.</p>\r\n                            </div>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                ) : (\r\n                    <AnimatePresence>\r\n                        {filteredPatients.map((patient) => (\r\n                            <motion.tr\r\n                                key={patient.id}\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"group hover:bg-muted/40 transition-colors border-b last:border-0\"\r\n                            >\r\n                                {/* Col: Paciente */}\r\n                                <TableCell>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className={`h-10 w-10 rounded-full flex items-center justify-center ${getSpeciesStyle(patient.species)}`}>\r\n                                            {getSpeciesIcon(patient.species)}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-foreground\">{patient.name}</p>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <Badge variant=\"outline\" className=\"text-[10px] h-5 px-1.5 font-normal border-muted-foreground/30 text-muted-foreground\">\r\n                                                    {patient.breed || 'Sin raza'}\r\n                                                </Badge>\r\n                                                {patient.microchipNumber && (\r\n                                                    <span className=\"text-[10px] text-muted-foreground font-mono\">\r\n                                                        #{patient.microchipNumber.slice(-4)}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Propietario */}\r\n                                <TableCell>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <div className=\"flex items-center gap-1.5 text-sm font-medium\">\r\n                                            <User className=\"w-3 h-3 text-muted-foreground\" />\r\n                                            {patient.ownerName}\r\n                                        </div>\r\n                                        {/* Simulaci├│n de tel├⌐fono si existiera en el modelo */}\r\n                                        {/* <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground mt-0.5\">\r\n                                            <Phone className=\"w-3 h-3\" />\r\n                                            +57 300 123 4567\r\n                                        </div> */}\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Detalles (Edad/Sexo) */}\r\n                                <TableCell>\r\n                                    <div className=\"flex flex-col gap-1\">\r\n                                        <span className=\"text-sm\">{calculateAge(patient.birthDate)}</span>\r\n                                        <span className=\"text-xs text-muted-foreground capitalize flex items-center gap-1\">\r\n                                            {patient.gender === 'MALE' ? 'Macho' : patient.gender === 'FEMALE' ? 'Hembra' : '-'}\r\n                                        </span>\r\n                                    </div>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Peso */}\r\n                                <TableCell>\r\n                                    {patient.weight ? (\r\n                                        <span className=\"font-mono text-sm bg-muted/30 px-2 py-1 rounded\">\r\n                                            {patient.weight} kg\r\n                                        </span>\r\n                                    ) : (\r\n                                        <span className=\"text-muted-foreground text-xs\">-</span>\r\n                                    )}\r\n                                </TableCell>\r\n\r\n                                {/* Col: Registro */}\r\n                                <TableCell>\r\n                                    <span className=\"text-sm text-muted-foreground\">\r\n                                        {patient.createdAt ? format(new Date(patient.createdAt), 'd MMM yyyy', { locale: es }) : '-'}\r\n                                    </span>\r\n                                </TableCell>\r\n\r\n                                {/* Col: Acciones */}\r\n                                <TableCell className=\"text-right\">\r\n                                    <div className=\"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                        <Button \r\n                                            variant=\"ghost\" \r\n                                            size=\"icon\" \r\n                                            className=\"h-8 w-8 hover:bg-blue-50 hover:text-blue-600\"\r\n                                            onClick={() => { setSelectedPatient(patient); setIsDetailsOpen(true); }}\r\n                                            title=\"Ver Expediente\"\r\n                                        >\r\n                                            <Eye className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                        <Button \r\n                                            variant=\"ghost\" \r\n                                            size=\"icon\" \r\n                                            className=\"h-8 w-8 hover:bg-orange-50 hover:text-orange-600\"\r\n                                            onClick={() => { setSelectedPatient(patient); setIsFormOpen(true); }}\r\n                                            title=\"Editar\"\r\n                                        >\r\n                                            <Edit className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </TableCell>\r\n                            </motion.tr>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </TableBody>\r\n        </Table>\r\n      </div>\r\n      \r\n      {/* Footer Info */}\r\n      <div className=\"flex items-center justify-between text-xs text-muted-foreground px-2\">\r\n        <p>Mostrando {filteredPatients.length} pacientes</p>\r\n        <p>├Ültima actualizaci├│n: hace unos segundos</p>\r\n      </div>\r\n\r\n      {/* DIALOGS */}\r\n      <PatientFormDialog\r\n        open={isFormOpen}\r\n        onClose={() => { setIsFormOpen(false); setSelectedPatient(undefined); }}\r\n        onSubmit={handleSave}\r\n        patient={selectedPatient as any}\r\n      />\r\n\r\n      <PatientDetailsDialog\r\n        open={isDetailsOpen}\r\n        onClose={() => { setIsDetailsOpen(false); setSelectedPatient(undefined); }}\r\n        patient={selectedPatient as any}\r\n      />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Prescriptions.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPrescriptions'. Either include it or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [loadPrescriptions, page]","fix":{"range":[1974,1980],"text":"[loadPrescriptions, page]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, FileText, Download, Eye, Edit, Trash2, \r\n  Pill, Clock, CalendarRange, User, AlertCircle, FileSpreadsheet, \r\n  CheckCircle2, XCircle, MoreVertical\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuSeparator\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { PrescriptionFormDialog } from '@/components/prescriptions/PrescriptionFormDialog';\r\nimport { PrescriptionDetailsDialog } from '@/components/prescriptions/PrescriptionDetailsDialog';\r\nimport { prescriptionService, Prescription } from '@/services/prescriptionService';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { format, differenceInDays, isPast, isFuture } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport default function Prescriptions() {\r\n  const [prescriptions, setPrescriptions] = useState<Prescription[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [selectedPrescription, setSelectedPrescription] = useState<Prescription | undefined>();\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    loadPrescriptions();\r\n  }, [page]);\r\n\r\n  const loadPrescriptions = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await prescriptionService.getAll(page, 12); // Cargamos 12 para grid 3x4 o 4x3\r\n      setPrescriptions(response.content || []);\r\n      setTotalPages(response.totalPages || 0);\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Error al sincronizar recetas', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredPrescriptions = useMemo(() => {\r\n    return prescriptions.filter((prescription) => {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      const matchesSearch =\r\n        prescription.medicationName?.toLowerCase().includes(searchLower) ||\r\n        prescription.patientName?.toLowerCase().includes(searchLower);\r\n      \r\n      const matchesStatus = statusFilter === 'all' || \r\n        (statusFilter === 'ACTIVE' && prescription.isCurrentlyActive) ||\r\n        (statusFilter === 'EXPIRED' && prescription.isExpired) ||\r\n        (prescription.status === statusFilter);\r\n      \r\n      return matchesSearch && matchesStatus;\r\n    });\r\n  }, [prescriptions, searchTerm, statusFilter]);\r\n\r\n  // --- ACTIONS ---\r\n  const handleExport = async (id: number, format: 'PDF' | 'EXCEL') => {\r\n    try {\r\n        toast({ title: 'Generando documento...', description: 'La descarga comenzar├í en breve.' });\r\n        const blob = await prescriptionService.exportPrescription(id, format);\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `Receta_${id}_${new Date().getTime()}.${format.toLowerCase() === 'excel' ? 'xlsx' : 'pdf'}`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(a);\r\n        toast({ title: 'Descarga completa', className: 'bg-green-50 border-green-200' });\r\n    } catch (error) {\r\n        toast({ title: 'Error de exportaci├│n', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n      try {\r\n          await prescriptionService.delete(id);\r\n          toast({ title: 'Eliminado', description: 'La prescripci├│n ha sido eliminada.' });\r\n          loadPrescriptions();\r\n          setIsDetailsOpen(false);\r\n      } catch (error) {\r\n          toast({ title: 'Error', variant: 'destructive' });\r\n      }\r\n  };\r\n\r\n  // --- UI HELPERS ---\r\n  const getProgressInfo = (start?: string, end?: string) => {\r\n      if (!start || !end) return { value: 0, label: 'Indefinido', color: 'bg-slate-200' };\r\n      \r\n      const startDate = new Date(start);\r\n      const endDate = new Date(end);\r\n      const now = new Date();\r\n      const totalDays = differenceInDays(endDate, startDate);\r\n      const daysPassed = differenceInDays(now, startDate);\r\n      \r\n      let percentage = 0;\r\n      if (totalDays > 0) {\r\n          percentage = Math.min(100, Math.max(0, (daysPassed / totalDays) * 100));\r\n      } else if (isPast(endDate)) {\r\n          percentage = 100;\r\n      }\r\n\r\n      let color = 'bg-emerald-500'; // Active\r\n      let label = `${Math.max(0, differenceInDays(endDate, now))} d├¡as restantes`;\r\n\r\n      if (percentage >= 100) {\r\n          color = 'bg-slate-400';\r\n          label = 'Completado';\r\n      } else if (percentage > 80) {\r\n          color = 'bg-orange-500';\r\n          label = 'Finalizando pronto';\r\n      }\r\n\r\n      return { value: percentage, label, color };\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Farmacia y Recetas <Pill className=\"h-6 w-6 text-primary\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Control de medicaci├│n y generaci├│n de documentos oficiales.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <PrescriptionFormDialog onSuccess={loadPrescriptions}>\r\n                <Button className=\"shadow-lg shadow-primary/20 hover:scale-105 transition-transform\">\r\n                    <Plus className=\"mr-2 h-4 w-4\" /> Nueva Prescripci├│n\r\n                </Button>\r\n            </PrescriptionFormDialog>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- TOOLBAR --- */}\r\n      <div className=\"sticky top-4 z-20 bg-background/80 backdrop-blur-xl border p-2 rounded-2xl shadow-sm flex flex-col sm:flex-row gap-2\">\r\n        <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n                placeholder=\"Buscar medicamento o paciente...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"pl-10 border-none bg-transparent shadow-none h-10\"\r\n            />\r\n        </div>\r\n        <div className=\"h-8 w-px bg-border hidden sm:block my-auto\" />\r\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n            <SelectTrigger className=\"w-[180px] border-none bg-transparent shadow-none h-10\">\r\n                <SelectValue placeholder=\"Estado\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n                <SelectItem value=\"all\">Todas</SelectItem>\r\n                <SelectItem value=\"ACTIVE\">≡ƒƒó Activas</SelectItem>\r\n                <SelectItem value=\"EXPIRED\">≡ƒö┤ Vencidas / Completadas</SelectItem>\r\n            </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      {/* --- GRID CONTENT --- */}\r\n      {loading ? (\r\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n              {[1,2,3,4,5,6].map(i => (\r\n                  <div key={i} className=\"h-64 bg-muted/20 rounded-2xl animate-pulse border border-muted/30\" />\r\n              ))}\r\n          </div>\r\n      ) : filteredPrescriptions.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center py-24 border-2 border-dashed border-muted rounded-3xl bg-muted/5 text-center\">\r\n              <div className=\"bg-background p-4 rounded-full shadow-sm mb-4\">\r\n                  <Pill className=\"h-8 w-8 text-muted-foreground/50\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold mb-2\">No hay recetas</h3>\r\n              <p className=\"text-muted-foreground max-w-sm\">\r\n                  {searchTerm ? \"No se encontraron resultados para tu b├║squeda.\" : \"Genera la primera receta digital para comenzar.\"}\r\n              </p>\r\n          </div>\r\n      ) : (\r\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3\">\r\n              <AnimatePresence>\r\n                  {filteredPrescriptions.map((p) => {\r\n                      const progress = getProgressInfo(p.startDate, p.endDate);\r\n                      const isActive = p.isCurrentlyActive;\r\n\r\n                      return (\r\n                        <motion.div\r\n                            key={p.id}\r\n                            layout\r\n                            initial={{ opacity: 0, scale: 0.95 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            exit={{ opacity: 0, scale: 0.95 }}\r\n                        >\r\n                            <Card className={`\r\n                                h-full flex flex-col relative overflow-hidden transition-all duration-300 hover:shadow-xl border-l-4\r\n                                ${isActive ? 'border-l-emerald-500' : 'border-l-slate-300'}\r\n                            `}>\r\n                                {/* Header */}\r\n                                <div className=\"p-5 pb-0 flex justify-between items-start\">\r\n                                    <div className=\"flex gap-3\">\r\n                                        <div className={`\r\n                                            h-12 w-12 rounded-xl flex items-center justify-center text-xl font-bold shadow-sm\r\n                                            ${isActive ? 'bg-emerald-50 text-emerald-600' : 'bg-slate-100 text-slate-500'}\r\n                                        `}>\r\n                                            Rx\r\n                                        </div>\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-lg leading-tight line-clamp-1\" title={p.medicationName}>\r\n                                                {p.medicationName}\r\n                                            </h3>\r\n                                            <p className=\"text-xs text-muted-foreground flex items-center gap-1 mt-1\">\r\n                                                <User className=\"h-3 w-3\" /> {p.patientName}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    \r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 -mt-1 -mr-2\">\r\n                                                <MoreVertical className=\"h-4 w-4 text-muted-foreground\" />\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent align=\"end\">\r\n                                            <DropdownMenuItem onClick={() => { setSelectedPrescription(p); setIsDetailsOpen(true); }}>\r\n                                                <Eye className=\"mr-2 h-4 w-4\" /> Ver Detalles\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem onClick={() => handleExport(p.id, 'PDF')}>\r\n                                                <FileText className=\"mr-2 h-4 w-4\" /> Exportar PDF\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem onClick={() => handleExport(p.id, 'EXCEL')}>\r\n                                                <FileSpreadsheet className=\"mr-2 h-4 w-4\" /> Exportar Excel\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuSeparator />\r\n                                            <DropdownMenuItem className=\"text-destructive focus:text-destructive\" onClick={() => handleDelete(p.id)}>\r\n                                                <Trash2 className=\"mr-2 h-4 w-4\" /> Eliminar\r\n                                            </DropdownMenuItem>\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                </div>\r\n\r\n                                <CardContent className=\"p-5 pt-4 flex-1 flex flex-col\">\r\n                                    {/* Dosis Info */}\r\n                                    <div className=\"grid grid-cols-2 gap-3 mb-4 bg-muted/20 p-3 rounded-lg border border-muted/30\">\r\n                                        <div>\r\n                                            <p className=\"text-[10px] uppercase text-muted-foreground font-bold\">Dosis</p>\r\n                                            <p className=\"text-sm font-semibold truncate\" title={p.dosage}>{p.dosage}</p>\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"text-[10px] uppercase text-muted-foreground font-bold\">Frecuencia</p>\r\n                                            <p className=\"text-sm font-semibold truncate\" title={p.frequency}>{p.frequency}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"mt-auto space-y-3\">\r\n                                        {/* Progress Bar (Timeline) */}\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <div className=\"flex justify-between text-xs\">\r\n                                                <span className=\"text-muted-foreground font-medium flex items-center gap-1\">\r\n                                                    <CalendarRange className=\"h-3 w-3\" /> Progreso\r\n                                                </span>\r\n                                                <span className={`font-bold ${isActive ? 'text-emerald-600' : 'text-slate-500'}`}>\r\n                                                    {progress.label}\r\n                                                </span>\r\n                                            </div>\r\n                                            <Progress value={progress.value} className=\"h-2\" indicatorColor={progress.color} />\r\n                                            <div className=\"flex justify-between text-[10px] text-muted-foreground/70 font-mono\">\r\n                                                <span>{p.startDate ? format(new Date(p.startDate), 'dd MMM') : '-'}</span>\r\n                                                <span>{p.endDate ? format(new Date(p.endDate), 'dd MMM') : '-'}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Status Badge */}\r\n                                        {p.isExpired ? (\r\n                                            <div className=\"flex items-center gap-1.5 text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded w-fit\">\r\n                                                <CheckCircle2 className=\"h-3.5 w-3.5\" /> Tratamiento Finalizado\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"flex items-center gap-1.5 text-xs text-emerald-600 bg-emerald-50 px-2 py-1 rounded w-fit animate-pulse\">\r\n                                                <Clock className=\"h-3.5 w-3.5\" /> En curso\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </motion.div>\r\n                      );\r\n                  })}\r\n              </AnimatePresence>\r\n          </div>\r\n      )}\r\n\r\n      {/* Pagination (Si aplica) */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-center gap-2 pt-4\">\r\n            <Button variant=\"outline\" onClick={() => setPage(p => Math.max(0, p - 1))} disabled={page === 0}>\r\n                Anterior\r\n            </Button>\r\n            <span className=\"flex items-center px-4 text-sm font-medium\">\r\n                P├ígina {page + 1} de {totalPages}\r\n            </span>\r\n            <Button variant=\"outline\" onClick={() => setPage(p => Math.min(totalPages - 1, p + 1))} disabled={page >= totalPages - 1}>\r\n                Siguiente\r\n            </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* DIALOGS */}\r\n      <PrescriptionFormDialog\r\n        open={isFormOpen}\r\n        onClose={() => setIsFormOpen(false)}\r\n        onSubmit={async (data) => {\r\n            await prescriptionService.create(data); \r\n            loadPrescriptions(); \r\n            setIsFormOpen(false); \r\n        }}\r\n      />\r\n\r\n      <PrescriptionDetailsDialog\r\n        open={isDetailsOpen}\r\n        onClose={() => { setIsDetailsOpen(false); setSelectedPrescription(undefined); }}\r\n        prescription={selectedPrescription}\r\n        onEdit={(updated) => { /* l├│gica de update */ loadPrescriptions(); }}\r\n        onDelete={handleDelete}\r\n        onExport={handleExport}\r\n      />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Register.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1114,1117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1114,1117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { PawPrint } from 'lucide-react';\r\nimport { authService } from '@/services/authService';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function Register() {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    phone: '',\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await authService.register({\r\n        ...formData,\r\n        roles: ['RECEPTIONIST'], // Rol por defecto\r\n      });\r\n      toast.success('Registro exitoso. Por favor inicia sesi├│n.');\r\n      navigate('/login');\r\n    } catch (error: any) {\r\n      const errorMessage = error?.response?.data?.message || 'Error al registrar usuario';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-background p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-4 text-center\">\r\n          <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary\">\r\n            <PawPrint className=\"h-10 w-10 text-primary-foreground\" />\r\n          </div>\r\n          <div>\r\n            <CardTitle className=\"text-2xl font-bold\">Registro</CardTitle>\r\n            <CardDescription>Crea una nueva cuenta</CardDescription>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"firstName\">Nombre *</Label>\r\n                <Input\r\n                  id=\"firstName\"\r\n                  type=\"text\"\r\n                  placeholder=\"Nombre\"\r\n                  value={formData.firstName}\r\n                  onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"lastName\">Apellido *</Label>\r\n                <Input\r\n                  id=\"lastName\"\r\n                  type=\"text\"\r\n                  placeholder=\"Apellido\"\r\n                  value={formData.lastName}\r\n                  onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"username\">Usuario *</Label>\r\n              <Input\r\n                id=\"username\"\r\n                type=\"text\"\r\n                placeholder=\"Nombre de usuario\"\r\n                value={formData.username}\r\n                onChange={(e) => setFormData({ ...formData, username: e.target.value })}\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\">Email *</Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"correo@ejemplo.com\"\r\n                value={formData.email}\r\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"phone\">Tel├⌐fono</Label>\r\n              <Input\r\n                id=\"phone\"\r\n                type=\"tel\"\r\n                placeholder=\"3001234567\"\r\n                value={formData.phone}\r\n                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">Contrase├▒a *</Label>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"M├¡nimo 6 caracteres\"\r\n                value={formData.password}\r\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                required\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\r\n              {isLoading ? 'Registrando...' : 'Registrarse'}\r\n            </Button>\r\n          </form>\r\n          \r\n          <div className=\"mt-4 text-center text-sm\">\r\n            <span className=\"text-muted-foreground\">┬┐Ya tienes cuenta? </span>\r\n            <Link to=\"/login\" className=\"text-primary hover:underline\">\r\n              Inicia sesi├│n\r\n            </Link>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Reports.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10507,10510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10507,10510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":268,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11781,11784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11781,11784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { \r\n  AreaChart, Area, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, \r\n  CartesianGrid, Tooltip, ResponsiveContainer, Legend \r\n} from 'recharts';\r\nimport { \r\n  Calendar, DollarSign, TrendingUp, Users, FileText, Download, \r\n  Loader2, Activity, Package, ArrowUpRight, ArrowDownRight \r\n} from 'lucide-react';\r\nimport { dashboardService, reportService } from '@/services';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport default function Reports() {\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(false);\r\n  const [generatingReport, setGeneratingReport] = useState<string | null>(null);\r\n  const [stats, setStats] = useState({\r\n    totalPatients: 0,\r\n    totalOwners: 0,\r\n    todayAppointments: 0,\r\n    lowStockItems: 0,\r\n    monthlyRevenue: 0,\r\n    activeUsers: 0,\r\n  });\r\n\r\n  useEffect(() => { loadStats(); }, []);\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      const dashboardStats = await dashboardService.getStats();\r\n      setStats(dashboardStats);\r\n    } catch (error) { console.error('Error stats', error); }\r\n  };\r\n\r\n  const handleGenerateReport = async (type: 'APPOINTMENTS' | 'PATIENTS' | 'SERVICES') => {\r\n    try {\r\n      setGeneratingReport(type);\r\n      let blob: Blob;\r\n      let filename: string;\r\n\r\n      switch (type) {\r\n        case 'APPOINTMENTS':\r\n          blob = await reportService.generateAppointmentsReport();\r\n          filename = `Reporte_Citas_${new Date().toISOString().split('T')[0]}.xlsx`;\r\n          break;\r\n        case 'PATIENTS':\r\n          blob = await reportService.generatePatientsReport();\r\n          filename = `Reporte_Pacientes_${new Date().toISOString().split('T')[0]}.xlsx`;\r\n          break;\r\n        case 'SERVICES':\r\n          blob = await reportService.generateServicesReport();\r\n          filename = `Reporte_Servicios_${new Date().toISOString().split('T')[0]}.xlsx`;\r\n          break;\r\n        default: throw new Error('Tipo inv├ílido');\r\n      }\r\n\r\n      reportService.downloadBlob(blob, filename);\r\n      toast({ title: 'Reporte descargado', className: 'bg-green-50 border-green-200' });\r\n    } catch (error) {\r\n      toast({ title: 'Error de generaci├│n', variant: 'destructive' });\r\n    } finally {\r\n      setGeneratingReport(null);\r\n    }\r\n  };\r\n\r\n  // Mock Data for Charts (Simulating API)\r\n  const revenueData = [\r\n    { name: 'Ene', value: 4000 }, { name: 'Feb', value: 3000 }, \r\n    { name: 'Mar', value: 2000 }, { name: 'Abr', value: 2780 },\r\n    { name: 'May', value: 1890 }, { name: 'Jun', value: 2390 },\r\n    { name: 'Jul', value: 3490 }, { name: 'Ago', value: 4200 },\r\n    { name: 'Sep', value: 5100 }, { name: 'Oct', value: 5800 },\r\n    { name: 'Nov', value: 6200 }, { name: 'Dic', value: 7100 },\r\n  ];\r\n\r\n  const pieData = [\r\n    { name: 'Consultas', value: 400, color: '#4F46E5' },\r\n    { name: 'Vacunas', value: 300, color: '#10B981' },\r\n    { name: 'Cirug├¡as', value: 100, color: '#F43F5E' },\r\n    { name: 'Est├⌐tica', value: 200, color: '#F59E0B' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Anal├¡tica y Reportes <TrendingUp className=\"h-6 w-6 text-primary\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Inteligencia de negocios y exportaci├│n de datos.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n            <ExportButton \r\n                label=\"Citas\" \r\n                loading={generatingReport === 'APPOINTMENTS'} \r\n                onClick={() => handleGenerateReport('APPOINTMENTS')} \r\n            />\r\n            <ExportButton \r\n                label=\"Pacientes\" \r\n                loading={generatingReport === 'PATIENTS'} \r\n                onClick={() => handleGenerateReport('PATIENTS')} \r\n            />\r\n            <ExportButton \r\n                label=\"Servicios\" \r\n                loading={generatingReport === 'SERVICES'} \r\n                onClick={() => handleGenerateReport('SERVICES')} \r\n            />\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- KPI CARDS --- */}\r\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n        <KPICard \r\n            title=\"Ingresos Mensuales\" \r\n            value={`$${stats.monthlyRevenue.toLocaleString()}`} \r\n            icon={<DollarSign className=\"h-4 w-4 text-emerald-600\" />} \r\n            trend=\"+12.5%\" \r\n            trendUp={true} \r\n        />\r\n        <KPICard \r\n            title=\"Citas Hoy\" \r\n            value={stats.todayAppointments} \r\n            icon={<Calendar className=\"h-4 w-4 text-blue-600\" />} \r\n            trend=\"+3 vs ayer\" \r\n            trendUp={true} \r\n        />\r\n        <KPICard \r\n            title=\"Pacientes Activos\" \r\n            value={stats.totalPatients} \r\n            icon={<Users className=\"h-4 w-4 text-violet-600\" />} \r\n            trend=\"+15 este mes\" \r\n            trendUp={true} \r\n        />\r\n        <KPICard \r\n            title=\"Alertas Stock\" \r\n            value={stats.lowStockItems} \r\n            icon={<Package className=\"h-4 w-4 text-orange-600\" />} \r\n            trend=\"-2 resueltas\" \r\n            trendUp={false} \r\n            isWarning={stats.lowStockItems > 0} \r\n        />\r\n      </div>\r\n\r\n      {/* --- CHARTS SECTION --- */}\r\n      <Tabs defaultValue=\"overview\" className=\"space-y-6\">\r\n        <TabsList className=\"bg-muted/50 p-1 rounded-xl\">\r\n            <TabsTrigger value=\"overview\" className=\"rounded-lg\">Visi├│n General</TabsTrigger>\r\n            <TabsTrigger value=\"financial\" className=\"rounded-lg\">Financiero</TabsTrigger>\r\n            <TabsTrigger value=\"clinical\" className=\"rounded-lg\">Cl├¡nico</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"overview\" className=\"space-y-6\">\r\n            <div className=\"grid gap-6 md:grid-cols-7\">\r\n                \r\n                {/* Main Revenue Chart */}\r\n                <Card className=\"md:col-span-4 shadow-sm\">\r\n                    <CardHeader>\r\n                        <CardTitle>Tendencia de Ingresos (2024)</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"pl-2\">\r\n                        <ResponsiveContainer width=\"100%\" height={300}>\r\n                            <AreaChart data={revenueData}>\r\n                                <defs>\r\n                                    <linearGradient id=\"colorRevenue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#4F46E5\" stopOpacity={0.3}/>\r\n                                        <stop offset=\"95%\" stopColor=\"#4F46E5\" stopOpacity={0}/>\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#E5E7EB\" />\r\n                                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{fill: '#6B7280', fontSize: 12}} />\r\n                                <YAxis axisLine={false} tickLine={false} tick={{fill: '#6B7280', fontSize: 12}} tickFormatter={(value) => `$${value}`} />\r\n                                <Tooltip \r\n                                    contentStyle={{ backgroundColor: '#fff', borderRadius: '8px', border: '1px solid #E5E7EB', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }}\r\n                                    formatter={(value: number) => [`$${value.toLocaleString()}`, 'Ingresos']}\r\n                                />\r\n                                <Area type=\"monotone\" dataKey=\"value\" stroke=\"#4F46E5\" strokeWidth={3} fillOpacity={1} fill=\"url(#colorRevenue)\" />\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Distribution Pie Chart */}\r\n                <Card className=\"md:col-span-3 shadow-sm\">\r\n                    <CardHeader>\r\n                        <CardTitle>Distribuci├│n de Servicios</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <ResponsiveContainer width=\"100%\" height={300}>\r\n                            <PieChart>\r\n                                <Pie\r\n                                    data={pieData}\r\n                                    cx=\"50%\"\r\n                                    cy=\"50%\"\r\n                                    innerRadius={60}\r\n                                    outerRadius={80}\r\n                                    paddingAngle={5}\r\n                                    dataKey=\"value\"\r\n                                >\r\n                                    {pieData.map((entry, index) => (\r\n                                        <Cell key={`cell-${index}`} fill={entry.color} />\r\n                                    ))}\r\n                                </Pie>\r\n                                <Tooltip \r\n                                    contentStyle={{ backgroundColor: '#fff', borderRadius: '8px', border: '1px solid #E5E7EB' }}\r\n                                />\r\n                                <Legend verticalAlign=\"bottom\" height={36} iconType=\"circle\" />\r\n                            </PieChart>\r\n                        </ResponsiveContainer>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </TabsContent>\r\n\r\n        {/* Placeholder contents for other tabs to show structure */}\r\n        <TabsContent value=\"financial\">\r\n            <Card className=\"h-96 flex items-center justify-center text-muted-foreground border-dashed\">\r\n                Contenido Financiero Detallado\r\n            </Card>\r\n        </TabsContent>\r\n        <TabsContent value=\"clinical\">\r\n            <Card className=\"h-96 flex items-center justify-center text-muted-foreground border-dashed\">\r\n                Estad├¡sticas Cl├¡nicas\r\n            </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- SUBCOMPONENTES ---\r\n\r\nfunction KPICard({ title, value, icon, trend, trendUp, isWarning }: any) {\r\n    return (\r\n        <Card className={`hover:shadow-md transition-shadow ${isWarning ? 'border-orange-200 bg-orange-50/50' : ''}`}>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                    {title}\r\n                </CardTitle>\r\n                <div className={`p-2 rounded-lg ${isWarning ? 'bg-orange-100' : 'bg-muted/50'}`}>\r\n                    {icon}\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className=\"text-2xl font-bold\">{value}</div>\r\n                <div className=\"flex items-center text-xs text-muted-foreground mt-1\">\r\n                    {trendUp ? (\r\n                        <ArrowUpRight className=\"h-3 w-3 text-emerald-500 mr-1\" />\r\n                    ) : (\r\n                        <ArrowDownRight className=\"h-3 w-3 text-rose-500 mr-1\" />\r\n                    )}\r\n                    <span className={trendUp ? 'text-emerald-600' : 'text-rose-600'}>\r\n                        {trend}\r\n                    </span>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction ExportButton({ label, loading, onClick }: any) {\r\n    return (\r\n        <Button variant=\"outline\" size=\"sm\" onClick={onClick} disabled={loading} className=\"bg-background\">\r\n            {loading ? <Loader2 className=\"mr-2 h-3 w-3 animate-spin\" /> : <Download className=\"mr-2 h-3 w-3\" />}\r\n            {label}\r\n        </Button>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\ResetPassword.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1658,1661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1658,1661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useNavigate, useSearchParams, Link } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { PawPrint, Lock } from 'lucide-react';\r\nimport { authService } from '@/services/authService';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function ResetPassword() {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const token = searchParams.get('token');\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      toast.error('Token de recuperaci├│n no v├ílido');\r\n      navigate('/forgot-password');\r\n    }\r\n  }, [token, navigate]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (password !== confirmPassword) {\r\n      toast.error('Las contrase├▒as no coinciden');\r\n      return;\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      toast.error('La contrase├▒a debe tener al menos 6 caracteres');\r\n      return;\r\n    }\r\n\r\n    if (!token) {\r\n      toast.error('Token no v├ílido');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await authService.resetPassword({\r\n        token,\r\n        newPassword: password,\r\n      });\r\n      toast.success('Contrase├▒a restablecida exitosamente');\r\n      navigate('/login');\r\n    } catch (error: any) {\r\n      const errorMessage = error?.response?.data?.message || 'Error al restablecer contrase├▒a';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-background p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-4 text-center\">\r\n          <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary\">\r\n            <Lock className=\"h-10 w-10 text-primary-foreground\" />\r\n          </div>\r\n          <div>\r\n            <CardTitle className=\"text-2xl font-bold\">Restablecer Contrase├▒a</CardTitle>\r\n            <CardDescription>Ingresa tu nueva contrase├▒a</CardDescription>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">Nueva Contrase├▒a *</Label>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"M├¡nimo 6 caracteres\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"confirmPassword\">Confirmar Contrase├▒a *</Label>\r\n              <Input\r\n                id=\"confirmPassword\"\r\n                type=\"password\"\r\n                placeholder=\"Confirma tu contrase├▒a\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                required\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading || !token}>\r\n              {isLoading ? 'Restableciendo...' : 'Restablecer Contrase├▒a'}\r\n            </Button>\r\n          </form>\r\n          \r\n          <div className=\"mt-4 text-center text-sm\">\r\n            <Link to=\"/login\" className=\"text-primary hover:underline\">\r\n              Volver al Login\r\n            </Link>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Services.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadServices'. Either include it or remove the dependency array.","line":52,"column":40,"nodeType":"ArrayExpression","endLine":52,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [loadServices, page]","fix":{"range":[2347,2353],"text":"[loadServices, page]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3471,3474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3471,3474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":82,"column":95,"nodeType":"BlockStatement","messageId":"unexpected","endLine":82,"endColumn":97,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3577,3577],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":85,"column":96,"nodeType":"BlockStatement","messageId":"unexpected","endLine":85,"endColumn":98,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3730,3730],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Search, Plus, Briefcase, Edit, Trash2, \r\n  Stethoscope, Syringe, Scissors, Activity, Clock, \r\n  DollarSign, CheckCircle2, XCircle, MoreVertical, Sparkles\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { ServiceFormDialog } from '@/components/services/ServiceFormDialog';\r\nimport { ServiceDetailsDialog } from '@/components/services/ServiceDetailsDialog';\r\nimport { clinicService, ClinicService } from '@/services/clinicService';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// Iconos y colores por categor├¡a (Soft Pastel Theme)\r\nconst getCategoryStyle = (cat: string) => {\r\n    const c = cat.toLowerCase();\r\n    if (c.includes('consulta')) return { icon: Stethoscope, bg: 'bg-blue-100', text: 'text-blue-600' };\r\n    if (c.includes('vacuna')) return { icon: Syringe, bg: 'bg-emerald-100', text: 'text-emerald-600' };\r\n    if (c.includes('cirug├¡a')) return { icon: Activity, bg: 'bg-rose-100', text: 'text-rose-600' };\r\n    if (c.includes('est├⌐tica')) return { icon: Scissors, bg: 'bg-pink-100', text: 'text-pink-600' };\r\n    return { icon: Sparkles, bg: 'bg-violet-100', text: 'text-violet-600' };\r\n};\r\n\r\nexport default function Services() {\r\n  const [services, setServices] = useState<ClinicService[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\r\n  const [statusFilter, setStatusFilter] = useState<string>('active');\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const [selectedService, setSelectedService] = useState<ClinicService | undefined>();\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => { loadServices(); }, [page]);\r\n\r\n  const loadServices = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await clinicService.getAllPaginated(page, 10);\r\n      setServices(response.content || []);\r\n      setTotalPages(response.totalPages || 0);\r\n    } catch (error) {\r\n      toast({ title: 'Error', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const categories = Array.from(new Set(services.map(s => s.category)));\r\n\r\n  const filteredServices = useMemo(() => {\r\n      return services.filter((service) => {\r\n        const matchesSearch = service.name?.toLowerCase().includes(searchTerm.toLowerCase());\r\n        const matchesCategory = categoryFilter === 'all' || service.category === categoryFilter;\r\n        const matchesStatus = statusFilter === 'all' || \r\n          (statusFilter === 'active' && service.isActive) ||\r\n          (statusFilter === 'inactive' && !service.isActive);\r\n        return matchesSearch && matchesCategory && matchesStatus;\r\n      });\r\n  }, [services, searchTerm, categoryFilter, statusFilter]);\r\n\r\n  // Actions\r\n  const handleAddService = async (data: any) => {\r\n    try { await clinicService.create(data); loadServices(); setIsFormOpen(false); } catch (e) {}\r\n  };\r\n  const handleDelete = async (id: number) => {\r\n    try { await clinicService.delete(id); loadServices(); setIsDetailsOpen(false); } catch (e) {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10 max-w-5xl mx-auto\">\r\n      \r\n      {/* HEADER */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Servicios <Briefcase className=\"h-6 w-6 text-primary\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">Configuraci├│n del cat├ílogo cl├¡nico.</p>\r\n        </div>\r\n        <Button onClick={() => setIsFormOpen(true)} className=\"shadow-lg hover:scale-105 transition-transform rounded-full px-6\">\r\n          <Plus className=\"mr-2 h-4 w-4\" /> Nuevo Servicio\r\n        </Button>\r\n      </div>\r\n\r\n      {/* FILTERS BAR */}\r\n      <div className=\"bg-background/60 backdrop-blur-xl border p-2 rounded-2xl shadow-sm flex flex-col sm:flex-row gap-2 sticky top-4 z-20\">\r\n        <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input \r\n                placeholder=\"Buscar servicio...\" \r\n                className=\"pl-10 border-none bg-transparent h-10 focus-visible:ring-0\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n            <Select value={categoryFilter} onValueChange={setCategoryFilter}>\r\n                <SelectTrigger className=\"w-[150px] border-none bg-transparent h-10\"><SelectValue placeholder=\"Categor├¡a\" /></SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todas</SelectItem>\r\n                    {categories.map((c) => <SelectItem key={c} value={c}>{c}</SelectItem>)}\r\n                </SelectContent>\r\n            </Select>\r\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                <SelectTrigger className=\"w-[130px] border-none bg-transparent h-10\"><SelectValue placeholder=\"Estado\" /></SelectTrigger>\r\n                <SelectContent>\r\n                    <SelectItem value=\"all\">Todos</SelectItem>\r\n                    <SelectItem value=\"active\">Activos</SelectItem>\r\n                    <SelectItem value=\"inactive\">Inactivos</SelectItem>\r\n                </SelectContent>\r\n            </Select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* LIST CONTENT */}\r\n      <div className=\"space-y-4\">\r\n        {loading ? (\r\n            [1,2,3].map(i => <div key={i} className=\"h-24 bg-muted/20 rounded-2xl animate-pulse\" />)\r\n        ) : filteredServices.length === 0 ? (\r\n            <div className=\"py-20 text-center text-muted-foreground border-2 border-dashed rounded-3xl\">No hay servicios disponibles.</div>\r\n        ) : (\r\n            <AnimatePresence>\r\n                {filteredServices.map((service) => {\r\n                    const style = getCategoryStyle(service.category);\r\n                    const Icon = style.icon;\r\n\r\n                    return (\r\n                        <motion.div\r\n                            key={service.id}\r\n                            layout\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95 }}\r\n                            className=\"group\"\r\n                        >\r\n                            <div \r\n                                className=\"bg-card hover:bg-muted/30 border rounded-2xl p-4 flex items-center gap-5 transition-all duration-300 hover:shadow-lg hover:-translate-x-1 cursor-pointer relative overflow-hidden\"\r\n                                onClick={() => { setSelectedService(service); setIsDetailsOpen(true); }}\r\n                            >\r\n                                {/* Left Color Strip */}\r\n                                <div className={`absolute left-0 top-0 bottom-0 w-1.5 ${service.isActive ? 'bg-primary' : 'bg-muted'}`} />\r\n\r\n                                {/* Icon Avatar */}\r\n                                <div className={`h-14 w-14 rounded-2xl flex items-center justify-center shrink-0 ${style.bg} ${style.text}`}>\r\n                                    <Icon className=\"h-7 w-7\" />\r\n                                </div>\r\n\r\n                                {/* Content */}\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                        <h3 className=\"font-bold text-lg text-foreground truncate\">{service.name}</h3>\r\n                                        {!service.isActive && (\r\n                                            <Badge variant=\"secondary\" className=\"text-[10px] h-5 px-1.5\">Inactivo</Badge>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className=\"text-sm text-muted-foreground truncate pr-4\">\r\n                                        {service.description || \"Sin descripci├│n\"}\r\n                                    </p>\r\n                                    <div className=\"flex items-center gap-3 mt-2 text-xs font-medium text-muted-foreground\">\r\n                                        <span className=\"bg-muted px-2 py-0.5 rounded-md uppercase tracking-wide\">{service.category}</span>\r\n                                        {service.durationMinutes && (\r\n                                            <span className=\"flex items-center gap-1\"><Clock className=\"w-3 h-3\" /> {service.durationMinutes} min</span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Price & Actions */}\r\n                                <div className=\"flex items-center gap-6 pl-4 border-l border-border/50\">\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"text-xl font-bold text-foreground tabular-nums\">\r\n                                            ${service.price?.toLocaleString()}\r\n                                        </div>\r\n                                    </div>\r\n                                    \r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-muted-foreground hover:text-foreground\">\r\n                                                <MoreVertical className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent align=\"end\">\r\n                                            <DropdownMenuItem onClick={() => { setSelectedService(service); setIsDetailsOpen(true); }}>\r\n                                                Ver Detalles\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem onClick={() => { setSelectedService(service); setIsFormOpen(true); }}>\r\n                                                Editar\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem className=\"text-destructive focus:text-destructive\" onClick={() => handleDelete(service.id)}>\r\n                                                Eliminar\r\n                                            </DropdownMenuItem>\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    );\r\n                })}\r\n            </AnimatePresence>\r\n        )}\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-center gap-2 pt-6\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setPage(p => Math.max(0, p - 1))} disabled={page === 0}>Prev</Button>\r\n            <span className=\"flex items-center px-3 text-sm\">Pag {page + 1}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setPage(p => Math.min(totalPages - 1, p + 1))} disabled={page >= totalPages - 1}>Next</Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Dialogs (sin cambios en l├│gica) */}\r\n      <ServiceFormDialog open={isFormOpen} onClose={() => setIsFormOpen(false)} onSubmit={handleAddService} />\r\n      <ServiceDetailsDialog \r\n        open={isDetailsOpen} \r\n        onClose={() => { setIsDetailsOpen(false); setSelectedService(undefined); }} \r\n        service={selectedService} \r\n        onEdit={(u) => { loadServices(); }} \r\n        onDelete={handleDelete} \r\n      />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2551,2554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2551,2554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { \r\n  Building2, Clock, Bell, Lock, Save, \r\n  MapPin, Phone, Mail, Globe, CheckCircle2, \r\n  ShieldCheck, AlertTriangle, Smartphone\r\n} from 'lucide-react';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { authService } from '@/services/authService';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport default function Settings() {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  \r\n  // State (Mock data for demo)\r\n  const [clinicInfo, setClinicInfo] = useState({\r\n    name: 'VetClinic Pro',\r\n    address: 'Calle Principal 123, Ciudad',\r\n    phone: '+57 300 123 4567',\r\n    email: 'contacto@vetclinic.com',\r\n    website: 'www.vetclinic.com'\r\n  });\r\n\r\n  const [schedule, setSchedule] = useState({\r\n    open: '08:00',\r\n    close: '18:00',\r\n    duration: 30\r\n  });\r\n\r\n  const [notifications, setNotifications] = useState({\r\n    email: true,\r\n    sms: false,\r\n    reminders: true\r\n  });\r\n\r\n  const [passwordData, setPasswordData] = useState({\r\n    current: '',\r\n    new: '',\r\n    confirm: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Handlers\r\n  const handleSaveClinic = () => {\r\n    toast({ title: 'Informaci├│n actualizada', description: 'Los datos de la cl├¡nica se han guardado.' });\r\n  };\r\n\r\n  const handleSaveSchedule = () => {\r\n    toast({ title: 'Horario actualizado', description: 'La configuraci├│n de agenda se ha guardado.' });\r\n  };\r\n\r\n  const handlePasswordChange = async () => {\r\n    if (passwordData.new !== passwordData.confirm) {\r\n      toast({ title: 'Error', description: 'Las contrase├▒as no coinciden', variant: 'destructive' });\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await authService.changePassword({\r\n        currentPassword: passwordData.current,\r\n        newPassword: passwordData.new\r\n      });\r\n      toast({ title: 'Contrase├▒a actualizada', description: 'Tu seguridad ha sido reforzada.' });\r\n      setPasswordData({ current: '', new: '', confirm: '' });\r\n    } catch (error: any) {\r\n      toast({ title: 'Error', description: error?.response?.data?.message || 'Error al cambiar', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10 max-w-5xl mx-auto\">\r\n      \r\n      {/* HEADER */}\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Configuraci├│n</h1>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Administra las preferencias generales, seguridad y notificaciones.\r\n        </p>\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"general\" className=\"w-full flex flex-col md:flex-row gap-8\">\r\n        \r\n        {/* SIDEBAR NAVIGATION */}\r\n        <TabsList className=\"flex md:flex-col justify-start h-auto bg-transparent p-0 gap-2 min-w-[240px]\">\r\n            <TabsTrigger value=\"general\" className=\"w-full justify-start px-4 py-3 data-[state=active]:bg-muted data-[state=active]:shadow-none rounded-lg\">\r\n                <Building2 className=\"mr-3 h-4 w-4\" /> Informaci├│n General\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"schedule\" className=\"w-full justify-start px-4 py-3 data-[state=active]:bg-muted data-[state=active]:shadow-none rounded-lg\">\r\n                <Clock className=\"mr-3 h-4 w-4\" /> Horarios y Agenda\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"notifications\" className=\"w-full justify-start px-4 py-3 data-[state=active]:bg-muted data-[state=active]:shadow-none rounded-lg\">\r\n                <Bell className=\"mr-3 h-4 w-4\" /> Notificaciones\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"security\" className=\"w-full justify-start px-4 py-3 data-[state=active]:bg-muted data-[state=active]:shadow-none rounded-lg\">\r\n                <Lock className=\"mr-3 h-4 w-4\" /> Seguridad\r\n            </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* CONTENT AREA */}\r\n        <div className=\"flex-1\">\r\n            \r\n            {/* GENERAL SETTINGS */}\r\n            <TabsContent value=\"general\" className=\"mt-0 space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Perfil de la Cl├¡nica</CardTitle>\r\n                        <CardDescription>Esta informaci├│n aparecer├í en facturas y correos.</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Nombre Comercial</Label>\r\n                            <Input value={clinicInfo.name} onChange={e => setClinicInfo({...clinicInfo, name: e.target.value})} />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Direcci├│n F├¡sica</Label>\r\n                            <div className=\"relative\">\r\n                                <MapPin className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                <Textarea className=\"pl-9 min-h-[80px]\" value={clinicInfo.address} onChange={e => setClinicInfo({...clinicInfo, address: e.target.value})} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"grid md:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Tel├⌐fono</Label>\r\n                                <div className=\"relative\">\r\n                                    <Phone className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input className=\"pl-9\" value={clinicInfo.phone} onChange={e => setClinicInfo({...clinicInfo, phone: e.target.value})} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Email de Contacto</Label>\r\n                                <div className=\"relative\">\r\n                                    <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input className=\"pl-9\" value={clinicInfo.email} onChange={e => setClinicInfo({...clinicInfo, email: e.target.value})} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex justify-end pt-4\">\r\n                            <Button onClick={handleSaveClinic}>Guardar Cambios</Button>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </TabsContent>\r\n\r\n            {/* SCHEDULE SETTINGS */}\r\n            <TabsContent value=\"schedule\" className=\"mt-0 space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Configuraci├│n de Agenda</CardTitle>\r\n                        <CardDescription>Define los l├¡mites para la reserva de citas.</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-6\">\r\n                        <div className=\"grid md:grid-cols-2 gap-6\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Hora de Apertura</Label>\r\n                                <Input type=\"time\" value={schedule.open} onChange={e => setSchedule({...schedule, open: e.target.value})} />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Hora de Cierre</Label>\r\n                                <Input type=\"time\" value={schedule.close} onChange={e => setSchedule({...schedule, close: e.target.value})} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Duraci├│n Est├índar de Cita (minutos)</Label>\r\n                            <Input type=\"number\" value={schedule.duration} onChange={e => setSchedule({...schedule, duration: parseInt(e.target.value)})} />\r\n                            <p className=\"text-xs text-muted-foreground\">Esto definir├í los bloques de tiempo en el calendario.</p>\r\n                        </div>\r\n                        <div className=\"flex justify-end pt-4\">\r\n                            <Button onClick={handleSaveSchedule}>Actualizar Horario</Button>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </TabsContent>\r\n\r\n            {/* NOTIFICATIONS SETTINGS */}\r\n            <TabsContent value=\"notifications\" className=\"mt-0 space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Canales de Comunicaci├│n</CardTitle>\r\n                        <CardDescription>Elige c├│mo quieres recibir las alertas del sistema.</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"flex items-center justify-between p-4 border rounded-xl hover:bg-muted/30 transition-colors cursor-pointer\" onClick={() => setNotifications({...notifications, email: !notifications.email})}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-blue-100 rounded-lg text-blue-600\"><Mail className=\"h-5 w-5\" /></div>\r\n                                <div>\r\n                                    <p className=\"font-medium\">Correos Electr├│nicos</p>\r\n                                    <p className=\"text-sm text-muted-foreground\">Recibe res├║menes diarios y alertas de seguridad.</p>\r\n                                </div>\r\n                            </div>\r\n                            <Switch checked={notifications.email} />\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between p-4 border rounded-xl hover:bg-muted/30 transition-colors cursor-pointer\" onClick={() => setNotifications({...notifications, sms: !notifications.sms})}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-green-100 rounded-lg text-green-600\"><Smartphone className=\"h-5 w-5\" /></div>\r\n                                <div>\r\n                                    <p className=\"font-medium\">Mensajes SMS</p>\r\n                                    <p className=\"text-sm text-muted-foreground\">Alertas cr├¡ticas directo a tu m├│vil.</p>\r\n                                </div>\r\n                            </div>\r\n                            <Switch checked={notifications.sms} />\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between p-4 border rounded-xl hover:bg-muted/30 transition-colors cursor-pointer\" onClick={() => setNotifications({...notifications, reminders: !notifications.reminders})}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-purple-100 rounded-lg text-purple-600\"><Clock className=\"h-5 w-5\" /></div>\r\n                                <div>\r\n                                    <p className=\"font-medium\">Recordatorios de Citas</p>\r\n                                    <p className=\"text-sm text-muted-foreground\">Notificar autom├íticamente a los clientes.</p>\r\n                                </div>\r\n                            </div>\r\n                            <Switch checked={notifications.reminders} />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </TabsContent>\r\n\r\n            {/* SECURITY SETTINGS */}\r\n            <TabsContent value=\"security\" className=\"mt-0 space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Cambio de Contrase├▒a</CardTitle>\r\n                        <CardDescription>Mant├⌐n tu cuenta segura actualizando tu clave peri├│dicamente.</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Contrase├▒a Actual</Label>\r\n                            <Input type=\"password\" value={passwordData.current} onChange={e => setPasswordData({...passwordData, current: e.target.value})} />\r\n                        </div>\r\n                        <Separator />\r\n                        <div className=\"grid md:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Nueva Contrase├▒a</Label>\r\n                                <Input type=\"password\" value={passwordData.new} onChange={e => setPasswordData({...passwordData, new: e.target.value})} />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Confirmar Nueva Contrase├▒a</Label>\r\n                                <Input type=\"password\" value={passwordData.confirm} onChange={e => setPasswordData({...passwordData, confirm: e.target.value})} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex justify-end pt-4\">\r\n                            <Button onClick={handlePasswordChange} disabled={loading} variant=\"destructive\">\r\n                                {loading ? 'Actualizando...' : 'Cambiar Contrase├▒a'}\r\n                            </Button>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4 flex gap-3\">\r\n                    <AlertTriangle className=\"h-5 w-5 text-orange-600 mt-0.5\" />\r\n                    <div>\r\n                        <h4 className=\"font-bold text-orange-800 text-sm\">Zona de Peligro</h4>\r\n                        <p className=\"text-xs text-orange-700 mt-1\">\r\n                            Si deseas eliminar tu cuenta o resetear la base de datos, por favor contacta al soporte t├⌐cnico. Esta acci├│n no se puede deshacer desde aqu├¡.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </TabsContent>\r\n\r\n        </div>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\Users.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUsers'. Either include it or remove the dependency array.","line":78,"column":37,"nodeType":"ArrayExpression","endLine":78,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [loadUsers]","fix":{"range":[3059,3061],"text":"[loadUsers]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3887,3890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3887,3890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n  Plus, Search, UserCircle, Shield, Stethoscope, \r\n  Headphones, MoreVertical, Mail, Hash, UserCheck, UserX \r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { UserFormDialog } from '@/components/users/UserFormDialog';\r\nimport { UserDetailsDialog } from '@/components/users/UserDetailsDialog';\r\nimport { User, UserRole } from '@/contexts/AuthContext';\r\nimport { userService } from '@/services';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\n\r\n// Configuraci├│n de traducci├│n de roles\r\nconst roleLabels: Record<string, string> = {\r\n  ADMIN: 'Administrador',\r\n  VETERINARIAN: 'Veterinario',\r\n  RECEPTIONIST: 'Recepcionista',\r\n  OWNER: 'Propietario',\r\n  // Tambi├⌐n soportar versiones en min├║sculas\r\n  admin: 'Administrador',\r\n  veterinarian: 'Veterinario',\r\n  receptionist: 'Recepcionista',\r\n  owner: 'Propietario',\r\n};\r\n\r\nconst getRoleLabel = (role: string | undefined): string => {\r\n  if (!role) return 'Sin rol';\r\n  return roleLabels[role.toUpperCase()] || roleLabels[role] || role;\r\n};\r\n\r\n// Helpers visuales\r\nconst getRoleIcon = (role: string) => {\r\n    const r = role.toLowerCase();\r\n    if (r.includes('admin')) return <Shield className=\"h-4 w-4\" />;\r\n    if (r.includes('veterinarian')) return <Stethoscope className=\"h-4 w-4\" />;\r\n    if (r.includes('receptionist')) return <Headphones className=\"h-4 w-4\" />;\r\n    return <UserCircle className=\"h-4 w-4\" />;\r\n};\r\n\r\nconst getRoleColor = (role: string) => {\r\n    const r = role.toLowerCase();\r\n    if (r.includes('admin')) return 'bg-purple-100 text-purple-700 border-purple-200';\r\n    if (r.includes('veterinarian')) return 'bg-blue-100 text-blue-700 border-blue-200';\r\n    if (r.includes('receptionist')) return 'bg-orange-100 text-orange-700 border-orange-200';\r\n    return 'bg-gray-100 text-gray-700 border-gray-200';\r\n};\r\n\r\nconst getInitials = (name: string) => name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\r\n\r\nexport default function Users() {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState<string>('all');\r\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => { loadUsers(); }, []);\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const page = await userService.getAll(0, 100, searchTerm);\r\n      setUsers(page.content);\r\n    } catch (error) {\r\n      toast({ title: 'Error', variant: 'destructive' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredUsers = useMemo(() => {\r\n      return users.filter(user => {\r\n        const matchesSearch = (user.fullName?.toLowerCase() || '').includes(searchTerm.toLowerCase()) ||\r\n                             (user.email?.toLowerCase() || '').includes(searchTerm.toLowerCase());\r\n        const matchesRole = roleFilter === 'all' || user.role === roleFilter;\r\n        return matchesSearch && matchesRole;\r\n      });\r\n  }, [users, searchTerm, roleFilter]);\r\n\r\n  // Actions\r\n  const handleAddUser = async (data: any) => {\r\n      try {\r\n          await userService.create({ ...data, roles: [data.role.toUpperCase()] });\r\n          toast({ title: 'Usuario creado', description: 'Credenciales enviadas.' });\r\n          setIsFormOpen(false); loadUsers();\r\n      } catch (error) { toast({ title: 'Error', variant: 'destructive' }); }\r\n  };\r\n\r\n  const handleDeleteUser = async (id: string) => {\r\n      try {\r\n          await userService.delete(id);\r\n          toast({ title: 'Usuario eliminado' });\r\n          setIsDetailsOpen(false); loadUsers();\r\n      } catch (error) { toast({ title: 'Error', variant: 'destructive' }); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-in fade-in duration-500 pb-10\">\r\n      \r\n      {/* --- HEADER --- */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2\">\r\n            Equipo & Accesos <Shield className=\"h-6 w-6 text-primary\" />\r\n          </h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Administra roles, permisos y miembros del equipo.\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => { setSelectedUser(null); setIsFormOpen(true); }} className=\"shadow-lg shadow-primary/20 hover:scale-105 transition-transform\">\r\n          <Plus className=\"mr-2 h-4 w-4\" /> Invitar Miembro\r\n        </Button>\r\n      </div>\r\n\r\n      {/* --- TOOLBAR --- */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4 items-center bg-muted/40 p-2 rounded-xl border sticky top-4 z-20 backdrop-blur-md\">\r\n        <div className=\"relative flex-1 w-full\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input \r\n                placeholder=\"Buscar por nombre, email o cargo...\" \r\n                className=\"pl-10 bg-background border-none shadow-sm h-10\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n        </div>\r\n        <Select value={roleFilter} onValueChange={setRoleFilter}>\r\n            <SelectTrigger className=\"w-full sm:w-[200px] bg-background border-none shadow-sm h-10\">\r\n                <SelectValue placeholder=\"Filtrar por Rol\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n                <SelectItem value=\"all\">Todos los roles</SelectItem>\r\n                <SelectItem value=\"admin\">Administradores</SelectItem>\r\n                <SelectItem value=\"veterinarian\">Veterinarios</SelectItem>\r\n                <SelectItem value=\"receptionist\">Recepci├│n</SelectItem>\r\n            </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      {/* --- TEAM GRID --- */}\r\n      {loading ? (\r\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n              {[1,2,3,4].map(i => <div key={i} className=\"h-60 bg-muted/20 rounded-2xl animate-pulse\" />)}\r\n          </div>\r\n      ) : filteredUsers.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center py-20 border-2 border-dashed border-muted rounded-3xl bg-muted/5\">\r\n              <UserCircle className=\"h-12 w-12 text-muted-foreground/30 mb-3\" />\r\n              <p className=\"text-muted-foreground font-medium\">No se encontraron usuarios</p>\r\n          </div>\r\n      ) : (\r\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n              <AnimatePresence>\r\n                  {filteredUsers.map((user) => (\r\n                      <motion.div\r\n                          key={user.id}\r\n                          layout\r\n                          initial={{ opacity: 0, scale: 0.95 }}\r\n                          animate={{ opacity: 1, scale: 1 }}\r\n                          exit={{ opacity: 0, scale: 0.95 }}\r\n                      >\r\n                          <Card className=\"group relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border h-full\">\r\n                              {/* Background Pattern */}\r\n                              <div className=\"absolute top-0 left-0 w-full h-24 bg-gradient-to-br from-primary/10 to-primary/5 group-hover:from-primary/20 transition-colors\" />\r\n                              \r\n                              <CardContent className=\"p-6 flex flex-col items-center text-center relative pt-12\">\r\n                                  \r\n                                  {/* Avatar */}\r\n                                  <div className=\"relative mb-4\">\r\n                                      <Avatar className=\"h-20 w-20 border-4 border-background shadow-sm\">\r\n                                          <AvatarImage src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`} />\r\n                                          <AvatarFallback className=\"bg-slate-100 text-slate-500 text-lg font-bold\">\r\n                                              {getInitials(user.fullName)}\r\n                                          </AvatarFallback>\r\n                                      </Avatar>\r\n                                      {/* Status Dot */}\r\n                                      <div className={`absolute bottom-1 right-1 w-4 h-4 rounded-full border-2 border-background ${user.isActive !== false ? 'bg-emerald-500' : 'bg-slate-400'}`} />\r\n                                  </div>\r\n\r\n                                  <h3 className=\"font-bold text-lg text-foreground mb-1\">{user.fullName}</h3>\r\n                                  <p className=\"text-sm text-muted-foreground mb-4\">@{user.username}</p>\r\n\r\n                                  <Badge variant=\"secondary\" className={`mb-6 px-3 py-1 ${getRoleColor(user.role)}`}>\r\n                                      <span className=\"mr-1.5\">{getRoleIcon(user.role)}</span>\r\n                                      {getRoleLabel(user.role)}\r\n                                  </Badge>\r\n\r\n                                  <div className=\"w-full pt-4 border-t flex justify-between items-center text-xs text-muted-foreground\">\r\n                                      <div className=\"flex items-center gap-1.5\" title={user.email}>\r\n                                          <Mail className=\"w-3.5 h-3.5\" /> \r\n                                          <span className=\"truncate max-w-[120px]\">{user.email}</span>\r\n                                      </div>\r\n                                      \r\n                                      <DropdownMenu>\r\n                                          <DropdownMenuTrigger asChild>\r\n                                              <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\">\r\n                                                  <MoreVertical className=\"w-4 h-4\" />\r\n                                              </Button>\r\n                                          </DropdownMenuTrigger>\r\n                                          <DropdownMenuContent align=\"end\">\r\n                                              <DropdownMenuItem onClick={() => { setSelectedUser(user); setIsDetailsOpen(true); }}>\r\n                                                  Ver Perfil\r\n                                              </DropdownMenuItem>\r\n                                              <DropdownMenuItem onClick={() => { setSelectedUser(user); setIsFormOpen(true); }}>\r\n                                                  Editar Permisos\r\n                                              </DropdownMenuItem>\r\n                                              {user.isActive !== false ? (\r\n                                                  <DropdownMenuItem className=\"text-orange-600\">\r\n                                                      <UserX className=\"w-4 h-4 mr-2\" /> Desactivar\r\n                                                  </DropdownMenuItem>\r\n                                              ) : (\r\n                                                  <DropdownMenuItem className=\"text-emerald-600\">\r\n                                                      <UserCheck className=\"w-4 h-4 mr-2\" /> Activar\r\n                                                  </DropdownMenuItem>\r\n                                              )}\r\n                                          </DropdownMenuContent>\r\n                                      </DropdownMenu>\r\n                                  </div>\r\n\r\n                              </CardContent>\r\n                          </Card>\r\n                      </motion.div>\r\n                  ))}\r\n              </AnimatePresence>\r\n          </div>\r\n      )}\r\n\r\n      {/* DIALOGS */}\r\n      <UserFormDialog\r\n        open={isFormOpen}\r\n        onOpenChange={setIsFormOpen}\r\n        onSubmit={selectedUser ? (data) => {/* edit logic */} : handleAddUser}\r\n        initialData={selectedUser || undefined}\r\n      />\r\n\r\n      <UserDetailsDialog\r\n        open={isDetailsOpen}\r\n        onOpenChange={setIsDetailsOpen}\r\n        user={selectedUser}\r\n        onEdit={(user) => { setSelectedUser(user); setIsFormOpen(true); setIsDetailsOpen(false); }}\r\n        onDelete={handleDeleteUser}\r\n      />\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\owner\\OwnerAvailableServices.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\owner\\OwnerBookAppointment.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadInitialData'. Either include it or remove the dependency array.","line":116,"column":8,"nodeType":"ArrayExpression","endLine":116,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadInitialData]","fix":{"range":[4553,4555],"text":"[loadInitialData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6391,6394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6391,6394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport { \r\n    Calendar, \r\n    Clock, \r\n    Stethoscope, \r\n    FileText, \r\n    AlertCircle,\r\n    Loader2,\r\n    ArrowLeft,\r\n    Sparkles,\r\n    Check,\r\n    CalendarDays,\r\n    Info,\r\n    ChevronRight,\r\n    Dog,\r\n    Cat,\r\n    Bird,\r\n    Rabbit\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { toast } from 'sonner';\r\nimport { ownerPortalService } from '@/services/ownerPortalService';\r\nimport { userService } from '@/services/userService';\r\nimport type { Patient } from '@/types/patient';\r\nimport type { User } from '@/contexts/AuthContext';\r\nimport { cn } from '@/lib/utils';\r\nimport { format } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\n\r\n// --- CONFIGURACI├ôN & SCHEMA ---\r\n\r\nconst formSchema = z.object({\r\n    patientId: z.string().min(1, 'Selecciona una mascota'),\r\n    veterinarianId: z.string().min(1, 'Selecciona un veterinario'),\r\n    scheduledDate: z.string().min(1, 'Fecha y hora son requeridas'),\r\n    appointmentType: z.enum(['CONSULTATION', 'VACCINATION', 'SURGERY', 'CHECKUP', 'EMERGENCY'], {\r\n        errorMap: () => ({ message: 'Selecciona el tipo de cita' }),\r\n    }),\r\n    reason: z.string().min(10, 'El motivo debe ser m├ís detallado (m├¡n. 10 caracteres)'),\r\n    durationMinutes: z.number(),\r\n    notes: z.string().optional(),\r\n});\r\n\r\ntype FormData = z.infer<typeof formSchema>;\r\n\r\nconst appointmentTypes = [\r\n    { id: 'CONSULTATION', label: 'Consulta General', icon: '≡ƒ⌐║', desc: 'Revisi├│n m├⌐dica est├índar', color: 'bg-gradient-to-br from-blue-600 to-blue-700 border-blue-600 text-white' },\r\n    { id: 'VACCINATION', label: 'Vacunaci├│n', icon: '≡ƒÆë', desc: 'Refuerzos o esquema inicial', color: 'bg-emerald-50 border-emerald-200 text-emerald-700' },\r\n    { id: 'CHECKUP', label: 'Control / Chequeo', icon: '≡ƒôï', desc: 'Seguimiento de tratamiento', color: 'bg-violet-50 border-violet-200 text-violet-700' },\r\n    { id: 'SURGERY', label: 'Cirug├¡a', icon: '≡ƒÅÑ', desc: 'Procedimientos quir├║rgicos', color: 'bg-rose-50 border-rose-200 text-rose-700' },\r\n    { id: 'EMERGENCY', label: 'Urgencia', icon: '≡ƒÜ¿', desc: 'Atenci├│n inmediata', color: 'bg-orange-50 border-orange-200 text-orange-700' },\r\n];\r\n\r\nconst getPetIcon = (species: string) => {\r\n    const s = species.toLowerCase();\r\n    if (s.includes('dog') || s.includes('perro')) return <Dog className=\"w-5 h-5\" />;\r\n    if (s.includes('cat') || s.includes('gato')) return <Cat className=\"w-5 h-5\" />;\r\n    if (s.includes('bird') || s.includes('ave')) return <Bird className=\"w-5 h-5\" />;\r\n    if (s.includes('rabbit')) return <Rabbit className=\"w-5 h-5\" />;\r\n    return <Sparkles className=\"w-5 h-5\" />;\r\n};\r\n\r\nexport default function OwnerBookAppointment() {\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [initialLoading, setInitialLoading] = useState(true);\r\n    const [pets, setPets] = useState<Patient[]>([]);\r\n    const [veterinarians, setVeterinarians] = useState<User[]>([]);\r\n    const [ownerId, setOwnerId] = useState<string>('');\r\n\r\n    const form = useForm<FormData>({\r\n        resolver: zodResolver(formSchema),\r\n        defaultValues: {\r\n            patientId: '',\r\n            veterinarianId: '',\r\n            scheduledDate: '',\r\n            appointmentType: 'CONSULTATION',\r\n            reason: '',\r\n            durationMinutes: 30,\r\n            notes: '',\r\n        },\r\n    });\r\n\r\n    // Watch values for Live Preview\r\n    const watchAllFields = form.watch();\r\n    const selectedPet = pets.find(p => p.id.toString() === watchAllFields.patientId);\r\n    const selectedVet = veterinarians.find(v => v.id.toString() === watchAllFields.veterinarianId);\r\n    const selectedTypeConfig = appointmentTypes.find(t => t.id === watchAllFields.appointmentType);\r\n\r\n    useEffect(() => {\r\n        loadInitialData();\r\n    }, []);\r\n\r\n    const loadInitialData = async () => {\r\n        try {\r\n            setInitialLoading(true);\r\n            const userStr = localStorage.getItem('vetclinic_user');\r\n            if (!userStr) {\r\n                navigate('/login');\r\n                return;\r\n            }\r\n\r\n            const localUser = JSON.parse(userStr);\r\n            const fullUser = await userService.getByUsername(localUser.username);\r\n            const ownerData = await ownerPortalService.getOwnerByUserId(fullUser.id);\r\n            setOwnerId(ownerData.id);\r\n\r\n            const [petsData, usersData] = await Promise.all([\r\n                ownerPortalService.getMyPets(),\r\n                userService.getAll(0, 100),\r\n            ]);\r\n\r\n            setPets(petsData);\r\n            setVeterinarians(usersData.content.filter((u: User) => \r\n                u.roles?.some((r: string) => r.includes('VETERINARIAN'))\r\n            ));\r\n        } catch (error) {\r\n            console.error(error);\r\n            toast.error('Error cargando datos del sistema');\r\n        } finally {\r\n            setInitialLoading(false);\r\n        }\r\n    };\r\n\r\n    const onSubmit = async (data: FormData) => {\r\n        try {\r\n            setLoading(true);\r\n            await ownerPortalService.createAppointment({\r\n                ownerId: parseInt(ownerId),\r\n                patientId: parseInt(data.patientId),\r\n                veterinarianId: data.veterinarianId,\r\n                scheduledDate: new Date(data.scheduledDate).toISOString(),\r\n                appointmentType: data.appointmentType,\r\n                reason: data.reason,\r\n                durationMinutes: data.durationMinutes,\r\n                notes: data.notes || '',\r\n            });\r\n\r\n            toast.success('┬íCita agendada con ├⌐xito!');\r\n            navigate('/owner/appointments');\r\n        } catch (error: any) {\r\n            toast.error(error?.response?.data?.message || 'Error al crear la cita');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (initialLoading) return <LoadingScreen />;\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-8 pb-10 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n            \r\n            {/* Nav Header */}\r\n            <div className=\"flex items-center gap-4 border-b pb-6\">\r\n                <Link to=\"/owner/appointments\">\r\n                    <Button variant=\"ghost\" size=\"icon\" className=\"rounded-full hover:bg-muted\">\r\n                        <ArrowLeft className=\"h-5 w-5\" />\r\n                    </Button>\r\n                </Link>\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold tracking-tight\">Nueva Cita</h1>\r\n                    <p className=\"text-muted-foreground text-sm\">Paso 1 de 1: Detalles de la reserva</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid lg:grid-cols-12 gap-8\">\r\n                {/* LEFT COLUMN: FORM */}\r\n                <div className=\"lg:col-span-8 space-y-8\">\r\n                    <Form {...form}>\r\n                        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\r\n                            \r\n                            {/* 1. SELECCI├ôN DE MASCOTA */}\r\n                            <section className=\"space-y-4\">\r\n                                <div className=\"flex items-center gap-2 text-primary font-semibold\">\r\n                                    <div className=\"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs\">1</div>\r\n                                    <h3>┬┐Qui├⌐n es el paciente?</h3>\r\n                                </div>\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"patientId\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n                                                {pets.map((pet) => (\r\n                                                    <div \r\n                                                        key={pet.id}\r\n                                                        onClick={() => field.onChange(pet.id.toString())}\r\n                                                        className={cn(\r\n                                                            \"cursor-pointer border rounded-xl p-4 transition-all hover:border-primary/50 hover:bg-muted/50 flex flex-col gap-2\",\r\n                                                            field.value === pet.id.toString() \r\n                                                                ? \"border-primary bg-primary/5 ring-1 ring-primary\" \r\n                                                                : \"bg-card\"\r\n                                                        )}\r\n                                                    >\r\n                                                        <div className=\"flex justify-between items-start\">\r\n                                                            <div className={cn(\r\n                                                                \"p-2 rounded-lg\",\r\n                                                                field.value === pet.id.toString() ? \"bg-primary/20 text-primary\" : \"bg-muted text-muted-foreground\"\r\n                                                            )}>\r\n                                                                {getPetIcon(pet.species)}\r\n                                                            </div>\r\n                                                            {field.value === pet.id.toString() && <Check className=\"h-4 w-4 text-primary\" />}\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <p className=\"font-semibold\">{pet.name}</p>\r\n                                                            <p className=\"text-xs text-muted-foreground capitalize\">{pet.species} ΓÇó {pet.breed}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </section>\r\n\r\n                            <Separator />\r\n\r\n                            {/* 2. TIPO DE CITA */}\r\n                            <section className=\"space-y-4\">\r\n                                <div className=\"flex items-center gap-2 text-primary font-semibold\">\r\n                                    <div className=\"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs\">2</div>\r\n                                    <h3>Tipo de visita</h3>\r\n                                </div>\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"appointmentType\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n                                                {appointmentTypes.map((type) => (\r\n                                                    <div \r\n                                                        key={type.id}\r\n                                                        onClick={() => field.onChange(type.id)}\r\n                                                        className={cn(\r\n                                                            \"cursor-pointer border rounded-xl p-3 transition-all hover:-translate-y-0.5\",\r\n                                                            field.value === type.id \r\n                                                                ? cn(\"ring-2 ring-offset-1\", type.color) \r\n                                                                : \"bg-card hover:bg-muted/50\"\r\n                                                        )}\r\n                                                    >\r\n                                                        <div className=\"flex items-center gap-3\">\r\n                                                            <span className=\"text-2xl\">{type.icon}</span>\r\n                                                            <div>\r\n                                                                <p className=\"font-semibold text-sm\">{type.label}</p>\r\n                                                                <p className=\"text-[10px] text-muted-foreground\">{type.desc}</p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </section>\r\n\r\n                            <Separator />\r\n\r\n                            {/* 3. DETALLES DE TIEMPO Y VETERINARIO */}\r\n                            <section className=\"space-y-4\">\r\n                                <div className=\"flex items-center gap-2 text-primary font-semibold\">\r\n                                    <div className=\"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs\">3</div>\r\n                                    <h3>Agenda y Especialista</h3>\r\n                                </div>\r\n                                <div className=\"grid md:grid-cols-2 gap-6 p-6 bg-muted/20 rounded-xl border\">\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"veterinarianId\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Veterinario</FormLabel>\r\n                                                <Select onValueChange={field.onChange} value={field.value}>\r\n                                                    <FormControl>\r\n                                                        <SelectTrigger className=\"bg-background\">\r\n                                                            <SelectValue placeholder=\"Seleccionar especialista\" />\r\n                                                        </SelectTrigger>\r\n                                                    </FormControl>\r\n                                                    <SelectContent>\r\n                                                        {veterinarians.map((vet) => (\r\n                                                            <SelectItem key={vet.id} value={vet.id}>\r\n                                                                Dr. {vet.fullName}\r\n                                                            </SelectItem>\r\n                                                        ))}\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    \r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"scheduledDate\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Fecha y Hora</FormLabel>\r\n                                                <FormControl>\r\n                                                    <div className=\"relative\">\r\n                                                        <CalendarDays className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                                                        <Input\r\n                                                            type=\"datetime-local\"\r\n                                                            className=\"pl-9 bg-background\"\r\n                                                            min={new Date().toISOString().slice(0, 16)}\r\n                                                            {...field}\r\n                                                        />\r\n                                                    </div>\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"durationMinutes\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Duraci├│n Estimada</FormLabel>\r\n                                                <Select onValueChange={(v) => field.onChange(parseInt(v))} value={field.value.toString()}>\r\n                                                    <FormControl>\r\n                                                        <SelectTrigger className=\"bg-background\">\r\n                                                            <SelectValue />\r\n                                                        </SelectTrigger>\r\n                                                    </FormControl>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"15\">15 min (R├ípida)</SelectItem>\r\n                                                        <SelectItem value=\"30\">30 min (Est├índar)</SelectItem>\r\n                                                        <SelectItem value=\"60\">60 min (Extensa)</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                </div>\r\n                            </section>\r\n\r\n                            <Separator />\r\n\r\n                            {/* 4. MOTIVO */}\r\n                            <section className=\"space-y-4\">\r\n                                <div className=\"flex items-center gap-2 text-primary font-semibold\">\r\n                                    <div className=\"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs\">4</div>\r\n                                    <h3>Motivo de la consulta</h3>\r\n                                </div>\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"reason\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormControl>\r\n                                                <Textarea\r\n                                                    placeholder=\"Por favor describe los s├¡ntomas o el motivo de tu visita...\"\r\n                                                    className=\"min-h-[100px] resize-none text-base\"\r\n                                                    {...field}\r\n                                                />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"notes\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel className=\"text-xs text-muted-foreground uppercase tracking-wide\">Notas opcionales</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input placeholder=\"Alergias, comportamiento agresivo, etc.\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </section>\r\n\r\n                            {/* MOBILE ACTION BUTTON */}\r\n                            <div className=\"lg:hidden\">\r\n                                <Button type=\"submit\" size=\"lg\" className=\"w-full\" disabled={loading}>\r\n                                    {loading ? \"Confirmando...\" : \"Confirmar Cita\"}\r\n                                </Button>\r\n                            </div>\r\n                        </form>\r\n                    </Form>\r\n                </div>\r\n\r\n                {/* RIGHT COLUMN: LIVE TICKET PREVIEW */}\r\n                <div className=\"hidden lg:block lg:col-span-4\">\r\n                    <div className=\"sticky top-8 space-y-6\">\r\n                        <Card className=\"border-2 border-dashed shadow-lg overflow-hidden bg-muted/20\">\r\n                            <div className=\"bg-primary px-6 py-4\">\r\n                                <h2 className=\"text-primary-foreground font-bold text-lg flex items-center gap-2\">\r\n                                    <Sparkles className=\"w-5 h-5\" />\r\n                                    Resumen de Cita\r\n                                </h2>\r\n                            </div>\r\n                            <CardContent className=\"p-6 space-y-6 bg-background\">\r\n                                {/* Paciente */}\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"h-12 w-12 rounded-full bg-muted flex items-center justify-center border\">\r\n                                        {selectedPet ? getPetIcon(selectedPet.species) : <Sparkles className=\"text-muted-foreground\" />}\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-xs text-muted-foreground uppercase font-bold\">Paciente</p>\r\n                                        <p className=\"font-semibold text-lg\">{selectedPet?.name || \"Selecciona mascota\"}</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <Separator />\r\n\r\n                                {/* Detalles */}\r\n                                <div className=\"space-y-4\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                                            <Stethoscope className=\"w-4 h-4\" /> Especialista\r\n                                        </div>\r\n                                        <p className=\"font-medium text-sm text-right\">{selectedVet ? `Dr. ${selectedVet.fullName.split(' ')[0]}` : \"Pendiente\"}</p>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                                            <FileText className=\"w-4 h-4\" /> Tipo\r\n                                        </div>\r\n                                        {selectedTypeConfig ? (\r\n                                            <Badge variant=\"outline\" className={cn(\"text-xs\", selectedTypeConfig.color.split(' ')[2])}>\r\n                                                {selectedTypeConfig.label}\r\n                                            </Badge>\r\n                                        ) : <span>-</span>}\r\n                                    </div>\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                                            <Calendar className=\"w-4 h-4\" /> Fecha\r\n                                        </div>\r\n                                        <p className=\"font-medium text-sm\">\r\n                                            {watchAllFields.scheduledDate \r\n                                                ? format(new Date(watchAllFields.scheduledDate), \"d MMM, HH:mm\", { locale: es }) \r\n                                                : \"-\"}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                                            <Clock className=\"w-4 h-4\" /> Duraci├│n\r\n                                        </div>\r\n                                        <p className=\"font-medium text-sm\">{watchAllFields.durationMinutes} min</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"bg-gradient-to-br from-blue-600/10 to-blue-700/10 dark:from-blue-700/20 dark:to-blue-800/20 border border-blue-600/20 dark:border-blue-700/30 p-3 rounded-lg flex gap-3 items-start text-xs text-blue-700 dark:text-blue-300\">\r\n                                    <Info className=\"w-4 h-4 shrink-0 mt-0.5\" />\r\n                                    <p>Por favor llega 10 minutos antes. La cancelaci├│n es gratuita hasta 24h antes.</p>\r\n                                </div>\r\n                            </CardContent>\r\n                            <div className=\"p-4 bg-muted/50 border-t border-dashed\">\r\n                                <Button \r\n                                    size=\"lg\" \r\n                                    className=\"w-full shadow-lg\" \r\n                                    onClick={form.handleSubmit(onSubmit)}\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? (\r\n                                        <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\r\n                                    ) : (\r\n                                        <Check className=\"w-4 h-4 mr-2\" />\r\n                                    )}\r\n                                    Confirmar Reserva\r\n                                </Button>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- Componentes Auxiliares ---\r\n\r\nfunction LoadingScreen() {\r\n    return (\r\n        <div className=\"flex h-[60vh] flex-col items-center justify-center space-y-4\">\r\n            <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\r\n            <p className=\"text-muted-foreground font-medium\">Preparando formulario...</p>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\owner\\OwnerMyAppointments.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4732,4735],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4732,4735],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":380,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":380,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18453,18456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18453,18456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n    Calendar, \r\n    Clock, \r\n    Stethoscope, \r\n    FileText, \r\n    X, \r\n    Plus,\r\n    CalendarCheck,\r\n    AlertCircle,\r\n    CheckCircle2,\r\n    Loader2,\r\n    LayoutGrid,\r\n    List as ListIcon,\r\n    MapPin,\r\n    ChevronRight,\r\n    Syringe,\r\n    Activity,\r\n    AlertOctagon\r\n} from 'lucide-react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { ownerPortalService } from '@/services/ownerPortalService';\r\nimport type { Appointment } from '@/types/appointment';\r\nimport { toast } from 'sonner';\r\nimport { format, isToday, isTomorrow, isFuture, differenceInHours } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { Link } from 'react-router-dom';\r\nimport { cn } from '@/lib/utils';\r\n\r\n// --- CONFIGURACI├ôN VISUAL ---\r\n\r\nconst statusConfig: Record<string, { label: string; style: string; icon: React.ReactNode }> = {\r\n    SCHEDULED: { \r\n        label: 'Programada', \r\n        style: 'bg-gradient-to-br from-blue-600 to-blue-700 text-white border-blue-600 dark:from-blue-700 dark:to-blue-800 dark:border-blue-700',\r\n        icon: <Calendar className=\"w-3 h-3\" />\r\n    },\r\n    CONFIRMED: { \r\n        label: 'Confirmada', \r\n        style: 'bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800',\r\n        icon: <CheckCircle2 className=\"w-3 h-3\" />\r\n    },\r\n    IN_PROGRESS: { \r\n        label: 'En Consulta', \r\n        style: 'bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800',\r\n        icon: <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n    },\r\n    COMPLETED: { \r\n        label: 'Finalizada', \r\n        style: 'bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700',\r\n        icon: <CheckCircle2 className=\"w-3 h-3\" />\r\n    },\r\n    CANCELLED: { \r\n        label: 'Cancelada', \r\n        style: 'bg-rose-50 text-rose-600 border-rose-100 dark:bg-rose-900/20 dark:text-rose-400 dark:border-rose-900',\r\n        icon: <X className=\"w-3 h-3\" />\r\n    },\r\n};\r\n\r\nconst typeConfig: Record<string, { label: string; icon: React.ReactNode; color: string; border: string }> = {\r\n    CONSULTATION: { label: 'Consulta General', icon: <Stethoscope size={18} />, color: 'text-white bg-gradient-to-br from-blue-600 to-blue-700', border: 'border-blue-600' },\r\n    VACCINATION: { label: 'Vacunaci├│n', icon: <Syringe size={18} />, color: 'text-emerald-600 bg-emerald-50', border: 'border-emerald-500' },\r\n    SURGERY: { label: 'Cirug├¡a', icon: <Activity size={18} />, color: 'text-rose-600 bg-rose-50', border: 'border-rose-500' },\r\n    CHECKUP: { label: 'Chequeo', icon: <FileText size={18} />, color: 'text-violet-600 bg-violet-50', border: 'border-violet-500' },\r\n    EMERGENCY: { label: 'Urgencia', icon: <AlertOctagon size={18} />, color: 'text-orange-600 bg-orange-50', border: 'border-orange-500' },\r\n};\r\n\r\nexport default function OwnerMyAppointments() {\r\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [statusFilter, setStatusFilter] = useState<string>('all');\r\n    const [viewMode, setViewMode] = useState<'list' | 'grid'>('grid');\r\n    const [cancelDialogOpen, setCancelDialogOpen] = useState(false);\r\n    const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\r\n\r\n    useEffect(() => {\r\n        loadAppointments();\r\n    }, []);\r\n\r\n    const loadAppointments = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await ownerPortalService.getMyAppointments();\r\n            setAppointments(data);\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            toast.error('No se pudieron cargar las citas');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCancelAction = async () => {\r\n        if (!selectedAppointment) return;\r\n        try {\r\n            await ownerPortalService.cancelAppointment(selectedAppointment.id);\r\n            toast.success('Cita cancelada correctamente');\r\n            setCancelDialogOpen(false);\r\n            setSelectedAppointment(null);\r\n            loadAppointments();\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.message || 'Error al cancelar');\r\n        }\r\n    };\r\n\r\n    const filteredData = useMemo(() => {\r\n        let filtered = appointments;\r\n        if (statusFilter !== 'all') filtered = filtered.filter(a => a.status === statusFilter);\r\n        return filtered.sort((a, b) => new Date(a.scheduledDate).getTime() - new Date(b.scheduledDate).getTime());\r\n    }, [appointments, statusFilter]);\r\n\r\n    const stats = useMemo(() => ({\r\n        total: appointments.length,\r\n        upcoming: appointments.filter(a => ['SCHEDULED', 'CONFIRMED'].includes(a.status)).length,\r\n        completed: appointments.filter(a => a.status === 'COMPLETED').length\r\n    }), [appointments]);\r\n\r\n    if (loading) return <LoadingState />;\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in duration-700\">\r\n            {/* Header Area */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b pb-6\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Agenda M├⌐dica</h1>\r\n                    <p className=\"text-muted-foreground mt-1\">Gestiona tus pr├│ximas visitas y consulta el historial.</p>\r\n                </div>\r\n                <Link to=\"/owner/book-appointment\">\r\n                    <Button size=\"lg\" className=\"shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all\">\r\n                        <Plus className=\"mr-2 h-5 w-5\" /> Nueva Cita\r\n                    </Button>\r\n                </Link>\r\n            </div>\r\n\r\n            {/* Dashboard Stats */}\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n                <StatCard label=\"Total Citas\" value={stats.total} icon={<Calendar />} />\r\n                <StatCard label=\"Pr├│ximas\" value={stats.upcoming} icon={<Clock />} active />\r\n                <StatCard label=\"Finalizadas\" value={stats.completed} icon={<CheckCircle2 />} />\r\n            </div>\r\n\r\n            {/* Controls & Filters */}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-center bg-muted/30 p-2 rounded-xl border\">\r\n                <Tabs value={statusFilter} onValueChange={setStatusFilter} className=\"w-full sm:w-auto\">\r\n                    <TabsList className=\"w-full sm:w-auto bg-transparent p-0 h-auto flex flex-wrap gap-1\">\r\n                        {['all', 'SCHEDULED', 'CONFIRMED', 'COMPLETED', 'CANCELLED'].map((tab) => (\r\n                            <TabsTrigger \r\n                                key={tab} \r\n                                value={tab}\r\n                                className=\"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm border border-transparent data-[state=active]:border-border px-4 py-2 capitalize\"\r\n                            >\r\n                                {tab === 'all' ? 'Todas' : statusConfig[tab]?.label || tab}\r\n                            </TabsTrigger>\r\n                        ))}\r\n                    </TabsList>\r\n                </Tabs>\r\n\r\n                <div className=\"flex bg-background border rounded-lg p-1 gap-1\">\r\n                    <Button\r\n                        variant={viewMode === 'list' ? 'secondary' : 'ghost'}\r\n                        size=\"sm\"\r\n                        onClick={() => setViewMode('list')}\r\n                        className=\"h-8 w-8 p-0\"\r\n                    >\r\n                        <ListIcon className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    <Button\r\n                        variant={viewMode === 'grid' ? 'secondary' : 'ghost'}\r\n                        size=\"sm\"\r\n                        onClick={() => setViewMode('grid')}\r\n                        className=\"h-8 w-8 p-0\"\r\n                    >\r\n                        <LayoutGrid className=\"h-4 w-4\" />\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            {filteredData.length === 0 ? (\r\n                <EmptyState filter={statusFilter} />\r\n            ) : (\r\n                <div className={cn(\r\n                    \"grid gap-4\",\r\n                    viewMode === 'grid' ? \"md:grid-cols-2 xl:grid-cols-3\" : \"grid-cols-1\"\r\n                )}>\r\n                    {filteredData.map((apt) => (\r\n                        <AppointmentCard \r\n                            key={apt.id} \r\n                            appointment={apt} \r\n                            viewMode={viewMode}\r\n                            onCancel={() => {\r\n                                setSelectedAppointment(apt);\r\n                                setCancelDialogOpen(true);\r\n                            }} \r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Cancel Dialog */}\r\n            <AlertDialog open={cancelDialogOpen} onOpenChange={setCancelDialogOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Cancelar Cita</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            ┬┐Est├ís seguro de cancelar la cita para <strong>{selectedAppointment?.patientName}</strong>? \r\n                            Esta acci├│n liberar├í el horario para otros pacientes.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Mantener</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={handleCancelAction} className=\"bg-rose-600 hover:bg-rose-700\">\r\n                            S├¡, Cancelar\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- SUBCOMPONENTES ---\r\n\r\nfunction AppointmentCard({ appointment, viewMode, onCancel }: { appointment: Appointment, viewMode: 'list' | 'grid', onCancel: () => void }) {\r\n    const status = statusConfig[appointment.status] || statusConfig.SCHEDULED;\r\n    const type = typeConfig[appointment.appointmentType] || typeConfig.CONSULTATION;\r\n    const date = new Date(appointment.scheduledDate);\r\n    const isUpcoming = isFuture(date) && !['CANCELLED', 'COMPLETED'].includes(appointment.status);\r\n    const isUrgent = isUpcoming && differenceInHours(date, new Date()) < 24;\r\n\r\n    const canCancel = isUpcoming && differenceInHours(date, new Date()) > 24;\r\n\r\n    if (viewMode === 'list') {\r\n        return (\r\n            <div className=\"group flex flex-col sm:flex-row items-center gap-4 bg-card border rounded-xl p-4 transition-all hover:shadow-md hover:border-primary/20\">\r\n                {/* Date Box */}\r\n                <div className={cn(\r\n                    \"flex flex-col items-center justify-center w-full sm:w-24 h-20 rounded-lg border-2 bg-background shrink-0\",\r\n                    type.border\r\n                )}>\r\n                    <span className=\"text-xs font-bold uppercase text-muted-foreground\">{format(date, 'MMM', { locale: es })}</span>\r\n                    <span className=\"text-2xl font-bold text-foreground\">{format(date, 'd')}</span>\r\n                    <span className=\"text-xs text-muted-foreground\">{format(date, 'HH:mm')}</span>\r\n                </div>\r\n\r\n                {/* Info */}\r\n                <div className=\"flex-1 text-center sm:text-left space-y-1\">\r\n                    <div className=\"flex items-center justify-center sm:justify-start gap-2\">\r\n                        <h3 className=\"font-bold text-lg\">{appointment.patientName}</h3>\r\n                        <Badge variant=\"outline\" className={cn(\"text-[10px] px-1.5 py-0 h-5\", status.style)}>\r\n                            {status.label}\r\n                        </Badge>\r\n                    </div>\r\n                    <p className=\"text-sm text-muted-foreground flex items-center justify-center sm:justify-start gap-2\">\r\n                        {type.icon} {type.label} con <span className=\"font-medium text-foreground\">{appointment.veterinarianName}</span>\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex items-center gap-3\">\r\n                    {canCancel && (\r\n                        <Button variant=\"ghost\" size=\"sm\" onClick={onCancel} className=\"text-rose-500 hover:text-rose-600 hover:bg-rose-50\">\r\n                            Cancelar\r\n                        </Button>\r\n                    )}\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"hidden sm:flex\">\r\n                        Detalles <ChevronRight className=\"ml-1 h-4 w-4\" />\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Grid View\r\n    return (\r\n        <Card className={cn(\r\n            \"group relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1\",\r\n            isUrgent && \"ring-2 ring-amber-400 dark:ring-amber-600\"\r\n        )}>\r\n            {/* Top Color Bar */}\r\n            <div className={cn(\"absolute top-0 left-0 right-0 h-1.5\", type.color.split(' ')[1].replace('bg-', 'bg-').replace('50', '500'))} />\r\n            \r\n            <CardContent className=\"pt-6 pb-4 px-5\">\r\n                {/* Header */}\r\n                <div className=\"flex justify-between items-start mb-4\">\r\n                    <div className=\"flex gap-3\">\r\n                        {/* Date Block */}\r\n                        <div className=\"flex flex-col items-center justify-center w-14 h-14 rounded-lg bg-muted/50 border shadow-sm\">\r\n                            <span className=\"text-[10px] font-bold uppercase text-muted-foreground leading-none mb-0.5\">\r\n                                {format(date, 'MMM', { locale: es })}\r\n                            </span>\r\n                            <span className=\"text-xl font-bold leading-none text-foreground\">\r\n                                {format(date, 'd')}\r\n                            </span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg leading-tight group-hover:text-primary transition-colors\">\r\n                                {appointment.patientName}\r\n                            </h3>\r\n                            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground mt-1\">\r\n                                <Clock size={14} />\r\n                                {format(date, 'HH:mm')}\r\n                                <span className=\"text-xs mx-1\">ΓÇó</span>\r\n                                {isToday(date) ? 'Hoy' : isTomorrow(date) ? 'Ma├▒ana' : format(date, 'EEEE', { locale: es })}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <Badge variant=\"outline\" className={cn(\"capitalize shadow-none\", status.style)}>\r\n                        {status.icon} <span className=\"ml-1.5\">{status.label}</span>\r\n                    </Badge>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div className=\"h-px w-full bg-border/50 my-4\" />\r\n\r\n                {/* Details */}\r\n                <div className=\"space-y-3 mb-4\">\r\n                    <div className=\"flex items-center justify-between text-sm\">\r\n                        <span className=\"text-muted-foreground flex items-center gap-2\">\r\n                            <Stethoscope size={16} /> Especialista\r\n                        </span>\r\n                        <span className=\"font-medium text-right\">{appointment.veterinarianName}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between text-sm\">\r\n                        <span className=\"text-muted-foreground flex items-center gap-2\">\r\n                            <FileText size={16} /> Tipo\r\n                        </span>\r\n                        <Badge variant=\"secondary\" className={cn(\"font-normal\", type.color)}>\r\n                            {type.label}\r\n                        </Badge>\r\n                    </div>\r\n                    {appointment.reason && (\r\n                        <div className=\"bg-muted/30 p-2.5 rounded-lg text-xs text-muted-foreground italic border border-dashed\">\r\n                            \"{appointment.reason}\"\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer Alert & Actions */}\r\n                {isUrgent && (\r\n                    <div className=\"mb-4 flex items-center gap-2 text-xs text-amber-600 bg-amber-50 p-2 rounded border border-amber-100\">\r\n                        <AlertCircle size={14} />\r\n                        <span className=\"font-semibold\">Cita en menos de 24h</span>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex gap-2\">\r\n                    {canCancel ? (\r\n                        <Button \r\n                            variant=\"outline\" \r\n                            className=\"w-full text-muted-foreground hover:text-rose-600 hover:border-rose-200 hover:bg-rose-50\"\r\n                            onClick={onCancel}\r\n                        >\r\n                            Cancelar\r\n                        </Button>\r\n                    ) : (\r\n                        <Button variant=\"secondary\" className=\"w-full\" disabled>\r\n                            {status.label === 'COMPLETED' ? 'Finalizada' : 'No Cancelable'}\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction StatCard({ label, value, icon, active }: { label: string, value: number, icon: any, active?: boolean }) {\r\n    return (\r\n        <div className={cn(\r\n            \"flex flex-col items-center justify-center p-4 rounded-xl border transition-all\",\r\n            active \r\n                ? \"bg-primary/5 border-primary/20 shadow-sm\" \r\n                : \"bg-background border-border/60\"\r\n        )}>\r\n            <div className={cn(\r\n                \"mb-2 p-2 rounded-full\", \r\n                active ? \"bg-primary/10 text-primary\" : \"bg-muted text-muted-foreground\"\r\n            )}>\r\n                {icon}\r\n            </div>\r\n            <span className=\"text-2xl font-bold\">{value}</span>\r\n            <span className=\"text-xs text-muted-foreground font-medium uppercase tracking-wider\">{label}</span>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LoadingState() {\r\n    return (\r\n        <div className=\"flex h-[60vh] flex-col items-center justify-center space-y-4\">\r\n            <div className=\"relative\">\r\n                <div className=\"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse\" />\r\n                <Loader2 className=\"h-12 w-12 animate-spin text-primary relative z-10\" />\r\n            </div>\r\n            <p className=\"text-muted-foreground font-medium\">Cargando tu agenda...</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction EmptyState({ filter }: { filter: string }) {\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center py-20 px-4 border-2 border-dashed border-muted rounded-3xl bg-muted/5\">\r\n            <div className=\"bg-background p-6 rounded-full shadow-lg mb-6\">\r\n                <CalendarCheck size={48} className=\"text-muted-foreground/50\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-bold mb-2\">Sin citas {filter !== 'all' && 'en esta categor├¡a'}</h3>\r\n            <p className=\"text-muted-foreground text-center max-w-sm mb-8\">\r\n                {filter === 'all' \r\n                    ? 'A├║n no tienes citas programadas. ┬íEs un buen momento para un chequeo!' \r\n                    : `No hay citas con el estado \"${filter.toLowerCase()}\" actualmente.`}\r\n            </p>\r\n            {filter === 'all' && (\r\n                <Link to=\"/owner/book-appointment\">\r\n                    <Button>Agendar Ahora</Button>\r\n                </Link>\r\n            )}\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\pages\\owner\\OwnerMyPets.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\agendaService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[490,493],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[490,493],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[859,862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[859,862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1225,1228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1225,1228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1593,1596],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1593,1596],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\nimport type { Appointment } from '@/types/appointment';\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport type AgendaViewType = 'DAILY' | 'WEEKLY' | 'MONTHLY';\r\n\r\nexport const agendaService = {\r\n  /**\r\n   * Obtener vista de agenda seg├║n el tipo\r\n   */\r\n  async getAgendaView(\r\n    type: AgendaViewType = 'DAILY',\r\n    date: string,\r\n    veterinarianId?: string\r\n  ): Promise<Appointment[]> {\r\n    const params: any = { type, date };\r\n    if (veterinarianId) params.veterinarianId = veterinarianId;\r\n\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/agenda/view', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Obtener vista diaria\r\n   */\r\n  async getDailyView(date: string, veterinarianId?: string): Promise<Appointment[]> {\r\n    const params: any = { date };\r\n    if (veterinarianId) params.veterinarianId = veterinarianId;\r\n\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/agenda/daily', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Obtener vista semanal\r\n   */\r\n  async getWeeklyView(date: string, veterinarianId?: string): Promise<Appointment[]> {\r\n    const params: any = { date };\r\n    if (veterinarianId) params.veterinarianId = veterinarianId;\r\n\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/agenda/weekly', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Obtener vista mensual\r\n   */\r\n  async getMonthlyView(date: string, veterinarianId?: string): Promise<Appointment[]> {\r\n    const params: any = { date };\r\n    if (veterinarianId) params.veterinarianId = veterinarianId;\r\n\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/agenda/monthly', { params });\r\n    return response.data.data;\r\n  },\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[553,556],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[553,556],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[588,591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[588,591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios, { AxiosInstance, InternalAxiosRequestConfig, AxiosError } from 'axios';\r\n\r\n// Base API configuration - usar variable de entorno o valor por defecto\r\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8081/api';\r\n\r\n// Create axios instance\r\nconst api: AxiosInstance = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 30000, // 30 seconds para operaciones m├ís complejas\r\n});\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue: Array<{\r\n  resolve: (value?: any) => void;\r\n  reject: (reason?: any) => void;\r\n}> = [];\r\n\r\nconst processQueue = (error: AxiosError | null, token: string | null = null) => {\r\n  failedQueue.forEach((prom) => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token);\r\n    }\r\n  });\r\n  failedQueue = [];\r\n};\r\n\r\n// Request interceptor to add JWT token\r\napi.interceptors.request.use(\r\n  (config: InternalAxiosRequestConfig) => {\r\n    const token = localStorage.getItem('vetclinic_token');\r\n    if (token && config.headers) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor for handling errors and token refresh\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error: AxiosError) => {\r\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\r\n\r\n    // Si el error es 401 y no hemos intentado refrescar el token\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      if (isRefreshing) {\r\n        // Si ya estamos refrescando, agregar a la cola\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject });\r\n        })\r\n          .then((token) => {\r\n            if (originalRequest.headers) {\r\n              originalRequest.headers.Authorization = `Bearer ${token}`;\r\n            }\r\n            return api(originalRequest);\r\n          })\r\n          .catch((err) => {\r\n            return Promise.reject(err);\r\n          });\r\n      }\r\n\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n\r\n      const refreshToken = localStorage.getItem('vetclinic_refresh_token');\r\n\r\n      if (!refreshToken) {\r\n        // No hay refresh token, redirigir a login\r\n        processQueue(error, null);\r\n        localStorage.removeItem('vetclinic_token');\r\n        localStorage.removeItem('vetclinic_refresh_token');\r\n        localStorage.removeItem('vetclinic_user');\r\n        window.location.href = '/login';\r\n        return Promise.reject(error);\r\n      }\r\n\r\n      try {\r\n        // Intentar refrescar el token\r\n        const response = await axios.post(`${API_BASE_URL}/auth/refresh-token`, {\r\n          refreshToken,\r\n        });\r\n\r\n        const { data } = response.data;\r\n        const newToken = data.token;\r\n        const newRefreshToken = data.refreshToken;\r\n\r\n        localStorage.setItem('vetclinic_token', newToken);\r\n        localStorage.setItem('vetclinic_refresh_token', newRefreshToken);\r\n\r\n        if (originalRequest.headers) {\r\n          originalRequest.headers.Authorization = `Bearer ${newToken}`;\r\n        }\r\n\r\n        processQueue(null, newToken);\r\n        isRefreshing = false;\r\n\r\n        return api(originalRequest);\r\n      } catch (refreshError) {\r\n        // Error al refrescar token, redirigir a login\r\n        processQueue(refreshError as AxiosError, null);\r\n        isRefreshing = false;\r\n        localStorage.removeItem('vetclinic_token');\r\n        localStorage.removeItem('vetclinic_refresh_token');\r\n        localStorage.removeItem('vetclinic_user');\r\n        window.location.href = '/login';\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n\r\n    // Otros errores\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\appointmentService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[371,374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[371,374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[547,550],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[547,550],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\nimport type { Appointment, CreateAppointmentRequest, UpdateAppointmentRequest } from '@/types/appointment';\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\ninterface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n  errors: any;\r\n  timestamp: string;\r\n}\r\n\r\nexport const appointmentService = {\r\n  async getAll(page = 0, size = 10, search = ''): Promise<PageResponse<Appointment>> {\r\n    const params: any = { page, size };\r\n    if (search) params.search = search;\r\n    \r\n    console.log('≡ƒôí [appointmentService] Llamando a /appointments/page con params:', params);\r\n    const response = await api.get<ApiResponse<PageResponse<Appointment>>>('/appointments/page', { params });\r\n    console.log('≡ƒôí [appointmentService] Response completo:', response);\r\n    console.log('≡ƒôí [appointmentService] Response.data.data:', response.data.data);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getById(id: number): Promise<Appointment> {\r\n    const response = await api.get<ApiResponse<Appointment>>(`/appointments/${id}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByPatientId(patientId: number): Promise<Appointment[]> {\r\n    const response = await api.get<ApiResponse<Appointment[]>>(`/appointments/patient/${patientId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByVeterinarianId(veterinarianId: string): Promise<Appointment[]> {\r\n    const response = await api.get<ApiResponse<Appointment[]>>(`/appointments/veterinarian/${veterinarianId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByDate(date: string): Promise<Appointment[]> {\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/appointments/date', {\r\n      params: { date },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByDateRange(startDate: string, endDate: string): Promise<Appointment[]> {\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/appointments/date-range', {\r\n      params: { startDate, endDate },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async create(appointment: CreateAppointmentRequest): Promise<Appointment> {\r\n    const response = await api.post<ApiResponse<Appointment>>('/appointments', appointment);\r\n    return response.data.data;\r\n  },\r\n\r\n  async update(id: number, appointment: UpdateAppointmentRequest): Promise<Appointment> {\r\n    const response = await api.put<ApiResponse<Appointment>>(`/appointments/${id}`, appointment);\r\n    return response.data.data;\r\n  },\r\n\r\n  async updateStatus(id: number, status: Appointment['status']): Promise<Appointment> {\r\n    const response = await api.patch<ApiResponse<Appointment>>(`/appointments/${id}/status`, null, {\r\n      params: { status },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async delete(id: number): Promise<void> {\r\n    await api.delete(`/appointments/${id}`);\r\n  },\r\n\r\n  async search(searchTerm: string): Promise<Appointment[]> {\r\n    // El backend no tiene endpoint de b├║squeda, usar getAll y filtrar en el frontend\r\n    const response = await api.get<ApiResponse<PageResponse<Appointment>>>('/appointments/page', {\r\n      params: { page: 0, size: 100 },\r\n    });\r\n    const appointments = response.data.data.content;\r\n    // Filtrar por t├⌐rmino de b├║squeda en el frontend\r\n    return appointments.filter(apt => \r\n      apt.patientName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      apt.ownerName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      apt.appointmentType?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n  },\r\n\r\n  async cancel(id: number): Promise<void> {\r\n    await api.put(`/appointments/${id}/cancel`);\r\n  },\r\n\r\n  async confirm(id: number): Promise<Appointment> {\r\n    const response = await api.put<ApiResponse<Appointment>>(`/appointments/${id}`, {\r\n      status: 'CONFIRMED',\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  /**\r\n   * Acciones desde recordatorios (RF018)\r\n   */\r\n  async confirmFromReminder(id: number, token: string): Promise<Appointment> {\r\n    const response = await api.get<ApiResponse<Appointment>>(`/appointments/${id}/confirm`, {\r\n      params: { token },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async cancelFromReminder(id: number, token: string): Promise<void> {\r\n    await api.get(`/appointments/${id}/cancel-reminder`, {\r\n      params: { token },\r\n    });\r\n  },\r\n\r\n  async rescheduleFromReminder(\r\n    id: number,\r\n    token: string,\r\n    newScheduledDate: string,\r\n    reason?: string\r\n  ): Promise<Appointment> {\r\n    const response = await api.post<ApiResponse<Appointment>>(\r\n      `/appointments/${id}/reschedule`,\r\n      {\r\n        newScheduledDate,\r\n        reason,\r\n      },\r\n      {\r\n        params: { token },\r\n      }\r\n    );\r\n    return response.data.data;\r\n  },\r\n\r\n  // ========== NUEVO ENDPOINT ==========\r\n\r\n  async count(): Promise<number> {\r\n    const response = await api.get<ApiResponse<number>>('/appointments/count');\r\n    return response.data.data;\r\n  },\r\n\r\n  async getUpcoming(): Promise<Appointment[]> {\r\n    const response = await api.get<ApiResponse<Appointment[]>>('/appointments/upcoming');\r\n    return response.data.data;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\clinicService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\dashboardService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1273,1276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1273,1276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1330,1333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1330,1333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\n\r\nexport interface DashboardStats {\r\n  totalPatients: number;\r\n  totalOwners: number;\r\n  todayAppointments: number;\r\n  lowStockItems: number;\r\n  monthlyRevenue?: number;\r\n  activeUsers?: number;\r\n}\r\n\r\nexport interface AppointmentStats {\r\n  scheduled: number;\r\n  completed: number;\r\n  cancelled: number;\r\n  total: number;\r\n}\r\n\r\nexport interface RevenueStats {\r\n  daily: number;\r\n  weekly: number;\r\n  monthly: number;\r\n  yearly: number;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport const dashboardService = {\r\n  async getStats(): Promise<DashboardStats> {\r\n    const response = await api.get<ApiResponse<DashboardStats>>('/dashboard/stats');\r\n    return response.data.data;\r\n  },\r\n\r\n  async getAppointmentStats(startDate: string, endDate: string): Promise<AppointmentStats> {\r\n    const response = await api.get<ApiResponse<AppointmentStats>>('/dashboard/appointments-stats', {\r\n      params: { startDate, endDate },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getRevenueStats(): Promise<RevenueStats> {\r\n    const response = await api.get<ApiResponse<RevenueStats>>('/dashboard/revenue-stats');\r\n    return response.data.data;\r\n  },\r\n\r\n  async getRecentActivity(): Promise<any[]> {\r\n    const response = await api.get<ApiResponse<any[]>>('/dashboard/recent-activity');\r\n    return response.data.data;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\informedConsentService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\inventoryService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[793,796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[793,796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\n\r\nexport interface InventoryItem {\r\n  id: string;\r\n  name: string;\r\n  category: 'MEDICATION' | 'SUPPLY' | 'EQUIPMENT' | 'FOOD' | 'OTHER';\r\n  description?: string;\r\n  sku?: string;\r\n  quantity: number;\r\n  unit: string;\r\n  minQuantity: number;\r\n  unitPrice: number;\r\n  supplier?: string;\r\n  expirationDate?: string;\r\n  location?: string;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\nexport const inventoryService = {\r\n  async getAll(page = 0, size = 10, search = ''): Promise<PageResponse<InventoryItem>> {\r\n    const params: any = { page, size };\r\n    if (search) {\r\n      // Si hay b├║squeda, usar el endpoint de b├║squeda\r\n      const searchResponse = await api.get<ApiResponse<PageResponse<InventoryItem>>>('/inventory/search', {\r\n        params: { q: search, page, size },\r\n      });\r\n      return searchResponse.data.data;\r\n    }\r\n    \r\n    const response = await api.get<ApiResponse<PageResponse<InventoryItem>>>('/inventory/page', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getById(id: string): Promise<InventoryItem> {\r\n    const response = await api.get<ApiResponse<InventoryItem>>(`/inventory/${id}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getLowStock(): Promise<InventoryItem[]> {\r\n    const response = await api.get<ApiResponse<InventoryItem[]>>('/inventory/low-stock');\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByCategory(category: InventoryItem['category']): Promise<InventoryItem[]> {\r\n    const response = await api.get<ApiResponse<InventoryItem[]>>('/inventory/category', {\r\n      params: { category },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async create(item: Omit<InventoryItem, 'id' | 'createdAt' | 'updatedAt'>): Promise<InventoryItem> {\r\n    const response = await api.post<ApiResponse<InventoryItem>>('/inventory', item);\r\n    return response.data.data;\r\n  },\r\n\r\n  async update(id: string, item: Partial<InventoryItem>): Promise<InventoryItem> {\r\n    const response = await api.put<ApiResponse<InventoryItem>>(`/inventory/${id}`, item);\r\n    return response.data.data;\r\n  },\r\n\r\n  async updateQuantity(id: string, quantity: number): Promise<InventoryItem> {\r\n    const response = await api.patch<ApiResponse<InventoryItem>>(`/inventory/${id}/quantity`, null, {\r\n      params: { quantity },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async delete(id: string): Promise<void> {\r\n    await api.delete(`/inventory/${id}`);\r\n  },\r\n\r\n  async search(searchTerm: string): Promise<InventoryItem[]> {\r\n    const response = await api.get<ApiResponse<InventoryItem[]>>('/inventory/search', {\r\n      params: { q: searchTerm },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  // ========== NUEVOS ENDPOINTS ==========\r\n\r\n  async getOutOfStock(): Promise<InventoryItem[]> {\r\n    const response = await api.get<ApiResponse<InventoryItem[]>>('/inventory/out-of-stock');\r\n    return response.data.data;\r\n  },\r\n\r\n  async getExpiringSoon(days: number = 30): Promise<InventoryItem[]> {\r\n    const response = await api.get<ApiResponse<InventoryItem[]>>('/inventory/expiring-soon', {\r\n      params: { days },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getExpired(): Promise<InventoryItem[]> {\r\n    const response = await api.get<ApiResponse<InventoryItem[]>>('/inventory/expired');\r\n    return response.data.data;\r\n  },\r\n\r\n  async count(): Promise<number> {\r\n    const response = await api.get<ApiResponse<number>>('/inventory/count');\r\n    return response.data.data;\r\n  },\r\n\r\n  async countLowStock(): Promise<number> {\r\n    const response = await api.get<ApiResponse<number>>('/inventory/low-stock/count');\r\n    return response.data.data;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\medicalRecordService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[528,531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[528,531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\nimport type { MedicalRecord, CreateMedicalRecordRequest, UpdateMedicalRecordRequest } from '@/types/medicalRecord';\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\nexport const medicalRecordService = {\r\n  async getAll(page = 0, size = 10, search = ''): Promise<PageResponse<MedicalRecord>> {\r\n    const params: any = { page, size, sortBy: 'recordDate', sortDirection: 'DESC' };\r\n    if (search) params.search = search;\r\n    \r\n    const response = await api.get<ApiResponse<PageResponse<MedicalRecord>>>('/medical-records/page', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getById(id: number): Promise<MedicalRecord> {\r\n    const response = await api.get<ApiResponse<MedicalRecord>>(`/medical-records/${id}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByPatientId(patientId: string): Promise<MedicalRecord[]> {\r\n    const response = await api.get<ApiResponse<MedicalRecord[]>>(`/medical-records/patient/${patientId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByVeterinarianId(veterinarianId: string): Promise<MedicalRecord[]> {\r\n    const response = await api.get<ApiResponse<MedicalRecord[]>>(`/medical-records/veterinarian/${veterinarianId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async create(medicalRecord: CreateMedicalRecordRequest): Promise<MedicalRecord> {\r\n    const response = await api.post<ApiResponse<MedicalRecord>>('/medical-records', medicalRecord);\r\n    return response.data.data;\r\n  },\r\n\r\n  async update(id: number, medicalRecord: UpdateMedicalRecordRequest): Promise<MedicalRecord> {\r\n    const response = await api.put<ApiResponse<MedicalRecord>>(`/medical-records/${id}`, medicalRecord);\r\n    return response.data.data;\r\n  },\r\n\r\n  async delete(id: number): Promise<void> {\r\n    await api.delete(`/medical-records/${id}`);\r\n  },\r\n\r\n  async search(searchTerm: string): Promise<MedicalRecord[]> {\r\n    const response = await api.get<ApiResponse<MedicalRecord[]>>('/medical-records/search', {\r\n      params: { q: searchTerm },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  // ========== NUEVOS ENDPOINTS ==========\r\n\r\n  async getByDateRange(startDate: string, endDate: string): Promise<MedicalRecord[]> {\r\n    const response = await api.get<ApiResponse<MedicalRecord[]>>('/medical-records/date-range', {\r\n      params: { startDate, endDate },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getFollowUpRecords(): Promise<MedicalRecord[]> {\r\n    const response = await api.get<ApiResponse<MedicalRecord[]>>('/medical-records/follow-up');\r\n    return response.data.data;\r\n  },\r\n\r\n  async count(): Promise<number> {\r\n    const response = await api.get<ApiResponse<number>>('/medical-records/count');\r\n    return response.data.data;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\ownerPortalService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[302,305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[302,305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[461,464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[461,464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[621,624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[621,624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[784,787],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[784,787],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[975,978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[975,978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1166,1169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1166,1169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1410,1413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1410,1413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\nimport type { CreateAppointmentRequest } from '@/types/appointment';\r\n\r\nclass OwnerPortalService {\r\n    /**\r\n     * Obtener el owner por UUID del usuario\r\n     * IMPORTANTE: userId debe ser un UUID, no un username\r\n     */\r\n    async getOwnerByUserId(userId: string): Promise<any> {\r\n        const response = await api.get(`/owners/user/${userId}`);\r\n        return response.data.data;\r\n    }\r\n\r\n    async getMyAppointments(): Promise<any[]> {\r\n        const response = await api.get('/owner-portal/my-appointments');\r\n        return response.data.data;\r\n    }\r\n\r\n    async getMyPets(): Promise<any[]> {\r\n        const response = await api.get('/owner-portal/my-pets');\r\n        return response.data.data;\r\n    }\r\n\r\n    async getAvailableServices(): Promise<any[]> {\r\n        const response = await api.get('/owner-portal/services');\r\n        return response.data.data;\r\n    }\r\n\r\n    async createAppointment(data: CreateAppointmentRequest): Promise<any> {\r\n        const response = await api.post('/owner-portal/appointments', data);\r\n        return response.data.data;\r\n    }\r\n\r\n    async cancelAppointment(appointmentId: number): Promise<any> {\r\n        const response = await api.put(`/owner-portal/appointments/${appointmentId}/cancel`);\r\n        return response.data.data;\r\n    }\r\n\r\n    async rescheduleAppointment(appointmentId: number, data: CreateAppointmentRequest): Promise<any> {\r\n        const response = await api.put(`/owner-portal/appointments/${appointmentId}/reschedule`, data);\r\n        return response.data.data;\r\n    }\r\n}\r\n\r\nexport const ownerPortalService = new OwnerPortalService();","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\ownerService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[492,495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[492,495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\nimport type { Owner } from '@/types/owner';\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\nexport const ownerService = {\r\n  async getAll(page = 0, size = 10, search = ''): Promise<PageResponse<Owner>> {\r\n    // Usar el endpoint de paginaci├│n /owners/page\r\n    const params: any = { page, size, sortBy: 'lastName', sortDirection: 'ASC' };\r\n    if (search) params.search = search;\r\n    \r\n    const response = await api.get<ApiResponse<PageResponse<Owner>>>('/owners/page', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getById(id: string): Promise<Owner> {\r\n    const response = await api.get<ApiResponse<Owner>>(`/owners/${id}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async create(owner: Omit<Owner, 'id' | 'createdAt' | 'updatedAt'>): Promise<Owner> {\r\n    const response = await api.post<ApiResponse<Owner>>('/owners', owner);\r\n    return response.data.data;\r\n  },\r\n\r\n  async update(id: string, owner: Partial<Owner>): Promise<Owner> {\r\n    const response = await api.put<ApiResponse<Owner>>(`/owners/${id}`, owner);\r\n    return response.data.data;\r\n  },\r\n\r\n  async delete(id: string): Promise<void> {\r\n    await api.delete(`/owners/${id}`);\r\n  },\r\n\r\n  async search(searchTerm: string): Promise<Owner[]> {\r\n    const response = await api.get<ApiResponse<PageResponse<Owner>>>('/owners/search', {\r\n      params: { query: searchTerm, page: 0, size: 100 },\r\n    });\r\n    return response.data.data.content;\r\n  },\r\n\r\n  // ========== NUEVOS ENDPOINTS ==========\r\n\r\n  async getAllSimple(): Promise<Owner[]> {\r\n    const response = await api.get<ApiResponse<Owner[]>>('/owners');\r\n    return response.data.data;\r\n  },\r\n\r\n  async count(): Promise<number> {\r\n    const response = await api.get<ApiResponse<number>>('/owners/count');\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByCity(city: string): Promise<Owner[]> {\r\n    const response = await api.get<ApiResponse<Owner[]>>(`/owners/city/${city}`);\r\n    return response.data.data;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\patientService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[711,714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[711,714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\n\r\nexport interface Patient {\r\n  id: string;\r\n  name: string;\r\n  species: string;\r\n  breed: string;\r\n  birthDate: string;\r\n  gender: 'MALE' | 'FEMALE';\r\n  color?: string;\r\n  weight?: number;\r\n  microchipNumber?: string;\r\n  ownerId: string;\r\n  ownerName?: string;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\nexport const patientService = {\r\n  async getAll(page = 0, size = 10, search = ''): Promise<PageResponse<Patient>> {\r\n    const params: any = { page, size };\r\n    if (search) params.search = search;\r\n    \r\n    const response = await api.get<ApiResponse<PageResponse<Patient>>>('/patients', { params });\r\n    return response.data.data;\r\n  },\r\n\r\n  async getById(id: string): Promise<Patient> {\r\n    const response = await api.get<ApiResponse<Patient>>(`/patients/${id}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async getByOwnerId(ownerId: string): Promise<Patient[]> {\r\n    const response = await api.get<ApiResponse<Patient[]>>(`/patients/owner/${ownerId}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async create(patient: Omit<Patient, 'id' | 'createdAt' | 'updatedAt' | 'ownerName'>): Promise<Patient> {\r\n    const response = await api.post<ApiResponse<Patient>>('/patients', patient);\r\n    return response.data.data;\r\n  },\r\n\r\n  async update(id: string, patient: Partial<Patient>): Promise<Patient> {\r\n    const response = await api.put<ApiResponse<Patient>>(`/patients/${id}`, patient);\r\n    return response.data.data;\r\n  },\r\n\r\n  async delete(id: string): Promise<void> {\r\n    await api.delete(`/patients/${id}`);\r\n  },\r\n\r\n  async search(searchTerm: string): Promise<Patient[]> {\r\n    const response = await api.get<ApiResponse<Patient[]>>('/patients/search', {\r\n      params: { name: searchTerm },\r\n    });\r\n    return response.data.data;\r\n  },\r\n\r\n  // ========== NUEVOS ENDPOINTS ==========\r\n\r\n  async getBySpecies(species: string): Promise<Patient[]> {\r\n    const response = await api.get<ApiResponse<Patient[]>>(`/patients/species/${species}`);\r\n    return response.data.data;\r\n  },\r\n\r\n  async count(): Promise<number> {\r\n    const response = await api.get<ApiResponse<number>>('/patients/count');\r\n    return response.data.data;\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\prescriptionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\reportService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[408,411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[408,411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[822,825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[822,825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\n\r\nexport type ReportType = 'APPOINTMENTS' | 'PATIENTS' | 'SERVICES';\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport const reportService = {\r\n  /**\r\n   * Generar reporte seg├║n el tipo\r\n   */\r\n  async generateReport(\r\n    type: ReportType,\r\n    startDate?: string,\r\n    endDate?: string\r\n  ): Promise<Blob> {\r\n    const params: any = { type };\r\n    if (startDate) params.startDate = startDate;\r\n    if (endDate) params.endDate = endDate;\r\n\r\n    const response = await api.get('/reports/generate', {\r\n      params,\r\n      responseType: 'blob',\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Generar reporte de citas\r\n   */\r\n  async generateAppointmentsReport(startDate?: string, endDate?: string): Promise<Blob> {\r\n    const params: any = {};\r\n    if (startDate) params.startDate = startDate;\r\n    if (endDate) params.endDate = endDate;\r\n\r\n    const response = await api.get('/reports/appointments', {\r\n      params,\r\n      responseType: 'blob',\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Generar reporte de pacientes\r\n   */\r\n  async generatePatientsReport(): Promise<Blob> {\r\n    const response = await api.get('/reports/patients', {\r\n      responseType: 'blob',\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Generar reporte de servicios\r\n   */\r\n  async generateServicesReport(): Promise<Blob> {\r\n    const response = await api.get('/reports/services', {\r\n      responseType: 'blob',\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * Descargar archivo desde blob\r\n   */\r\n  downloadBlob(blob: Blob, filename: string): void {\r\n    const url = window.URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    window.URL.revokeObjectURL(url);\r\n  },\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\roleService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\services\\userService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2107,2110],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2107,2110],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api';\r\nimport { User } from '../contexts/AuthContext';\r\n\r\nexport interface CreateUserRequest {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  phone?: string;\r\n  roles?: string[];\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface UpdateUserRequest {\r\n  email?: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  phone?: string;\r\n  roles?: string[];\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface ChangePasswordRequest {\r\n  oldPassword: string;\r\n  newPassword: string;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n}\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\n// Backend user response format\r\ninterface BackendUser {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  phone?: string;\r\n  isActive: boolean;\r\n  roles: string[];\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\n// Map backend user to frontend user format\r\nconst mapBackendUserToFrontend = (backendUser: BackendUser): User => {\r\n  // Get the first role and convert to lowercase\r\n  const backendRole = backendUser.roles?.[0] || 'RECEPTIONIST';\r\n  \r\n  // Map backend role to frontend role\r\n  const roleMap: { [key: string]: 'admin' | 'veterinarian' | 'receptionist' } = {\r\n    'ADMIN': 'admin',\r\n    'ROLE_ADMIN': 'admin',\r\n    'VETERINARIAN': 'veterinarian',\r\n    'ROLE_VETERINARIAN': 'veterinarian',\r\n    'RECEPTIONIST': 'receptionist',\r\n    'ROLE_RECEPTIONIST': 'receptionist'\r\n  };\r\n  \r\n  const role = roleMap[backendRole.toUpperCase()] || 'receptionist';\r\n  \r\n  return {\r\n    id: backendUser.id,\r\n    username: backendUser.username,\r\n    email: backendUser.email,\r\n    fullName: `${backendUser.firstName || ''} ${backendUser.lastName || ''}`.trim() || backendUser.username,\r\n    role,\r\n    roles: backendUser.roles,\r\n  };\r\n};\r\n\r\nexport const userService = {\r\n  async getAll(page = 0, size = 10, search = ''): Promise<PageResponse<User>> {\r\n    const params: any = { page, size };\r\n    if (search) params.search = search;\r\n    \r\n    const response = await api.get<ApiResponse<PageResponse<BackendUser>>>('/users', { params });\r\n    const backendPage = response.data.data;\r\n    \r\n    return {\r\n      ...backendPage,\r\n      content: backendPage.content.map(mapBackendUserToFrontend)\r\n    };\r\n  },\r\n\r\n  async getById(id: string): Promise<User> {\r\n    const response = await api.get<ApiResponse<BackendUser>>(`/users/${id}`);\r\n    return mapBackendUserToFrontend(response.data.data);\r\n  },\r\n\r\n  async create(user: CreateUserRequest): Promise<User> {\r\n    const response = await api.post<ApiResponse<BackendUser>>('/users', user);\r\n    return mapBackendUserToFrontend(response.data.data);\r\n  },\r\n\r\n  async update(id: string, user: UpdateUserRequest): Promise<User> {\r\n    const response = await api.put<ApiResponse<BackendUser>>(`/users/${id}`, user);\r\n    return mapBackendUserToFrontend(response.data.data);\r\n  },\r\n\r\n  async delete(id: string): Promise<void> {\r\n    await api.delete(`/users/${id}`);\r\n  },\r\n\r\n  async changePassword(userId: string, request: ChangePasswordRequest): Promise<void> {\r\n    await api.post(`/users/${userId}/change-password`, request);\r\n  },\r\n\r\n  async resetPassword(userId: string, newPassword: string): Promise<void> {\r\n    await api.post(`/users/${userId}/reset-password`, { newPassword });\r\n  },\r\n\r\n  async toggleActive(userId: string): Promise<User> {\r\n    const response = await api.patch<ApiResponse<BackendUser>>(`/users/${userId}/toggle-active`);\r\n    return mapBackendUserToFrontend(response.data.data);\r\n  },\r\n\r\n  // ========== NUEVOS ENDPOINTS ==========\r\n\r\n  async getByUsername(username: string): Promise<User> {\r\n    const response = await api.get<ApiResponse<BackendUser>>(`/users/username/${username}`);\r\n    return mapBackendUserToFrontend(response.data.data);\r\n  },\r\n\r\n  async unlockUser(id: string): Promise<void> {\r\n    await api.post(`/users/${id}/unlock`);\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\types\\appointment.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\types\\inventory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\types\\medicalRecord.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\types\\owner.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\types\\patient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\tailwind.config.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":102,"column":13,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":102,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Config } from \"tailwindcss\";\r\n\r\nexport default {\r\n  darkMode: [\"class\"],\r\n  content: [\"./pages/**/*.{ts,tsx}\", \"./components/**/*.{ts,tsx}\", \"./app/**/*.{ts,tsx}\", \"./src/**/*.{ts,tsx}\"],\r\n  prefix: \"\",\r\n  theme: {\r\n    container: {\r\n      center: true,\r\n      padding: \"2rem\",\r\n      screens: {\r\n        \"2xl\": \"1400px\",\r\n      },\r\n    },\r\n    extend: {\r\n      colors: {\r\n        border: \"hsl(var(--border))\",\r\n        input: \"hsl(var(--input))\",\r\n        ring: \"hsl(var(--ring))\",\r\n        background: \"hsl(var(--background))\",\r\n        foreground: \"hsl(var(--foreground))\",\r\n        primary: {\r\n          DEFAULT: \"hsl(var(--primary))\",\r\n          foreground: \"hsl(var(--primary-foreground))\",\r\n        },\r\n        secondary: {\r\n          DEFAULT: \"hsl(var(--secondary))\",\r\n          foreground: \"hsl(var(--secondary-foreground))\",\r\n        },\r\n        destructive: {\r\n          DEFAULT: \"hsl(var(--destructive))\",\r\n          foreground: \"hsl(var(--destructive-foreground))\",\r\n        },\r\n        muted: {\r\n          DEFAULT: \"hsl(var(--muted))\",\r\n          foreground: \"hsl(var(--muted-foreground))\",\r\n        },\r\n        accent: {\r\n          DEFAULT: \"hsl(var(--accent))\",\r\n          foreground: \"hsl(var(--accent-foreground))\",\r\n        },\r\n        popover: {\r\n          DEFAULT: \"hsl(var(--popover))\",\r\n          foreground: \"hsl(var(--popover-foreground))\",\r\n        },\r\n        card: {\r\n          DEFAULT: \"hsl(var(--card))\",\r\n          foreground: \"hsl(var(--card-foreground))\",\r\n        },\r\n        sidebar: {\r\n          DEFAULT: \"hsl(var(--sidebar-background))\",\r\n          foreground: \"hsl(var(--sidebar-foreground))\",\r\n          primary: \"hsl(var(--sidebar-primary))\",\r\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\r\n          accent: \"hsl(var(--sidebar-accent))\",\r\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\r\n          border: \"hsl(var(--sidebar-border))\",\r\n          ring: \"hsl(var(--sidebar-ring))\",\r\n        },\r\n        success: {\r\n          DEFAULT: \"hsl(var(--success))\",\r\n          foreground: \"hsl(var(--success-foreground))\",\r\n        },\r\n        warning: {\r\n          DEFAULT: \"hsl(var(--warning))\",\r\n          foreground: \"hsl(var(--warning-foreground))\",\r\n        },\r\n        info: {\r\n          DEFAULT: \"hsl(var(--info))\",\r\n          foreground: \"hsl(var(--info-foreground))\",\r\n        },\r\n      },\r\n      borderRadius: {\r\n        lg: \"var(--radius)\",\r\n        md: \"calc(var(--radius) - 2px)\",\r\n        sm: \"calc(var(--radius) - 4px)\",\r\n      },\r\n      keyframes: {\r\n        \"accordion-down\": {\r\n          from: {\r\n            height: \"0\",\r\n          },\r\n          to: {\r\n            height: \"var(--radix-accordion-content-height)\",\r\n          },\r\n        },\r\n        \"accordion-up\": {\r\n          from: {\r\n            height: \"var(--radix-accordion-content-height)\",\r\n          },\r\n          to: {\r\n            height: \"0\",\r\n          },\r\n        },\r\n      },\r\n      animation: {\r\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\r\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\r\n      },\r\n    },\r\n  },\r\n  plugins: [require(\"tailwindcss-animate\")],\r\n} satisfies Config;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ByArc\\Desktop\\backend-vetclinic-1\\frontend-vetclinio-1\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
